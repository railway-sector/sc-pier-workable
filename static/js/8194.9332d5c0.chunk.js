"use strict";(self.webpackChunksc_pier_workable=self.webpackChunksc_pier_workable||[]).push([[8194],{16266:(t,e,n)=>{n.d(e,{K:()=>F,t:()=>U});n(81806);var i=n(53084),o=n(31633),s=n(38983),r=n(86300),a=n(44680),l=n(34761),c=n(13191),u=n(20664),p=n(9392),h=n(5809),d=n(42294),g=n(44815),y=n(38496),f=n(45136),m=n(59883),b=n(86486),v=n(67425),_=n(99057),w=n(24947),x=n(36423),S=n(91217),P=n(7342),C=n(51990),E=n(22955),V=n(80935),A=n(87925),D=n(50468),z=n(17345),j=n(9612),R=n(25672),k=n(37046),I=n(61895);const L=["polygon","extent"];class U extends w.UF{constructor(t,e,n,i){super(t,e,n,i,function(t){return 1===(t.material?.color?.a??0)}(e)),this.ensureDrapedStatus(!1)}async doLoad(){const t=this.symbolLayer,e=t?.material,n=this.symbolLayer.material?.color?.a,i=this.needsDrivenTransparentPass||null!=n&&1!==n,o=e?.emissive,s=!this._hasDrivenColorOrOpacity&&(null==n||0===n),r={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0,ambient:p.Un,diffuse:p.Un,opacity:s?0:1,layerOpacity:this._getLayerOpacity(),drivenOpacity:i,hasSymbolColors:!0,hasSlicePlane:this._context.slicePlaneEnabled,castShadows:t.castShadows,emissiveStrength:o?.strength??0,emissiveSource:1,offsetTransparentBackfaces:!0,normalType:1},a=new I.$U(r,this._context),l=new I.$U({...r,cullFace:2},this._context);this._materials[0]=a,this._materials[1]=l,this._updateTransparentDepedentMaterialParameters()}destroy(){super.destroy(),this._materials.length=0}createGraphics3DGraphic(t){const e=t.graphic;if(!this._validateGeometry(e.geometry,L,this.symbolLayer.type))return null;const n=this._getDrivenUInt8ColorWithNaNSupport(t.renderingInfo,this._materialColor,!1);(0,C.K_)(n,n);const i=this.createElevationContextForGraphic(e);return this._createAs3DShape(e,t.renderingInfo,n,i,e.uid)}layerOpacityChanged(t,e){const n=this._getLayerOpacity();this._materials[0]?.setParameters({layerOpacity:n}),this._materials[1]?.setParameters({layerOpacity:n}),this._updateTransparentDepedentMaterialParameters(),t?.forEach(t=>e(t)?.layerOpacityChanged(n,this._context.isAsync))}layerScreenSizePerspectiveChanged(){}layerElevationInfoChanged(t,e){return this.updateGraphics3DGraphicElevationInfo(t,e,v.Kf)}slicePlaneEnabledChanged(t,e){return this._materials[0]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),this._materials[1]?.setParameters({hasSlicePlane:this._context.slicePlaneEnabled}),t?.forEach(t=>{const n=e(t);null!=n&&n.slicePlaneEnabledChanged(this._context.slicePlaneEnabled,this._context.isAsync)}),!0}physicalBasedRenderingChanged(){const t={usePBR:this._context.physicalBasedRenderingEnabled,isSchematic:!0};return this._materials[0]?.setParameters(t),this._materials[1]?.setParameters(t),!0}_getExtrusionSize(t){let e;return e=t.size&&this._drivenProperties.size?(0,b.kg)(t.size,2)??0:this._getSymbolSize(),e/=this._context.renderCoordsHelper.unitInMeters,e}applyRendererDiff(t,e){return this._drivenPropertiesChanged(e)?0:1}async queryForSnapping(t,e,n,s){const r=this._getExtrusionSize(n)*this._context.renderCoordsHelper.unitInMeters/(0,o.G9)(e),{objectId:a,target:l}=t,c=(0,i.o8)(l);switch(c.z=(c.z??0)+r,t.type){case"edge":{const{start:e,end:n}=t,o=(0,i.o8)(e),s=(0,i.o8)(n);return o.z=(o.z??0)+r,s.z=(s.z??0)+r,[(0,m.P)(a,c,1/0,o,s)]}case"vertex":return[(0,m.k)(a,c,1/0),(0,m.P)(a,l,1/0,l,c)];default:return[]}}_getSymbolSize(){return this.symbolLayer.size??1}_createAs3DShape(t,e,n,i,o){const m=(0,S.dE)(t.geometry);if(null==m)return null;if(0===m.rings.length||!m.rings.some(t=>t.length>0))return this._logGeometryValidationWarnings(m.rings,"rings","ExtrudeSymbol3DLayer"),null;const b=(0,A.C8)(m,this._context.elevationProvider,this._context.renderCoordsHelper,i);this._logGeometryCreationWarnings(b,m.rings,"rings","ExtrudeSymbol3DLayer");const w=(0,x.W$)(m);if(null==w)return null;const C=new Array,D=new Array,z=(0,d.vt)(),I=(0,c.vt)(),L=(0,p.vt)(),U=1===this._context.renderCoordsHelper.viewingMode;U||this._context.renderCoordsHelper.worldUpAtPosition(null,L),(0,h.l)(m.spatialReference,[w.x,w.y,0],I,this._context.renderCoordsHelper.spatialReference);const O=(0,c.vt)();(0,l.B8)(O,I);const B=(0,a.vt)();(0,r.Ge)(B,O);const{polygons:G,mapPositions:T,position:H}=b,K=new Map,$=this._materials[0];for(const r of G){const t=r.count;if(this._context.clippingExtent&&((0,d.vY)(r.mapPositions,z),!(0,d.KG)(z,this._context.clippingExtent)))continue;const i=(0,s.e)(r.mapPositions,r.holeIndices,3);if(0===i.length)continue;const a=i.length,l=6*t,c=(0,y.my)(l+a),u=(0,y.my)(a),p=(0,g.jh)(3*l),h=(0,g.jh)(3*l),m=(0,g.jh)(3*l),b=(0,g.jh)(l);F(H,T,i,r,p,m,h,b,c,u,this._getExtrusionSize(e),L,U),(0,f.t)(p,p,O);const v=this._context.stage.renderView.getObjectAndLayerIdColor({graphicUid:o,layerViewUid:this._context.layerViewUid}),_=new st(p,m,(0,R.fA)(h),b),w=M($,c,c.length-u.length,_,n,v),x=t,S=t,P=2*r.count,E=new rt(x,S,P,a/3);Z(w,E,I),K.set(w,E),C.push(w,M(this._materials[1],u,0,_,n,v)),D.push(_.heights)}if(0===C.length)return null;const W=new k.B({geometries:C,layerViewUid:this._context.layerViewUid,graphicUid:o,isElevationSource:!0});W.transformation=I;const Y=(0,P.Cc)(this.symbolLayer,{opacity:this._getLayerOpacity()}),q=Y?new _.H(this._materials[0],Y,this._context.slicePlaneEnabled):null,X=new _.Y(this,W,null,(t,e,n,i,o)=>function(t,e,n,i,o,s,r){const a=t.stageObject,p=a.geometries,h=p.length,d="absolute-height"!==e.mode;let g=0;const y=a.transformation,f=(0,l.Qw)((0,c.vt)(),y);for(let l=0;l<h;l+=2){const t=p[l];if(!(0,j.p)(t))continue;const e=t.getMutableAttribute("position").data,c=s[l/2],h=new V.aY(t.mapPositions),m=e.length/3;let b=!1,v=0;{let t=0;for(let s=0;s<m;s++){N[0]=e[t],N[1]=e[t+1],N[2]=e[t+2],i(h,J),d&&(v+=J.sampledElevation),E.b.TESTS_DISABLE_OPTIMIZATIONS?((0,u.j)(Q,h.array[h.offset],h.array[h.offset+1],J.z+c[t/3]),null!=n&&o.toRenderCoords(Q,n,Q),(0,u.t)(Q,Q,f)):((0,u.j)(Q,e[t],e[t+1],e[t+2]),(0,u.t)(Q,Q,y),o.setAltitude(Q,J.z+c[t/3]),(0,u.t)(Q,Q,f)),e[t]=Q[0],e[t+1]=Q[1],e[t+2]=Q[2];const s=et/o.unitInMeters;(Math.abs(N[0]-e[t])>=s||Math.abs(N[1]-e[t+1])>=s||Math.abs(N[2]-e[t+2])>=s)&&(b=!0),h.offset+=3,t+=3}}if(b){const e=r.get(t);e&&Z(t,e,y),a.geometryVertexAttributeUpdated(p[l],"normalCompressed"),t.invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(p[l],"position"),p[l+1].invalidateBoundingInfo(),a.geometryVertexAttributeUpdated(p[l+1],"position")}g+=v/m}return g/h}(t,e,n,i,o,D,K),i,q);return X.alignedSampledElevation=b.sampledElevation,X.needsElevationUpdates=(0,v.Kf)(i.mode),X}get _materialColor(){return this.symbolLayer.material?.color}_updateTransparentDepedentMaterialParameters(){const t=this._materials[0];t&&t.setParameters({cullFace:t.transparent?0:2})}}function M(t,e,n,i,o,s){const r=(0,y.EH)(e.length),a=[["position",new D.n(i.positions,e,3,!0)],["normalCompressed",new D.n(i.normals,e,2,!0)],["symbolColor",new D.n(o,r,4,!0)]];return new z.V(t,a,i.elevation,0,s,n)}function F(t,e,n,i,o,s,r,a,l,c,p,h,d){const g=n.length/3;let y=2*i.count;!function(t,e,n,i,o,s,r,a,l,c,p,h,d,g,y,f,m){(0,u.d)(q,f),l??=[],c??=[],p??=[];const b=y>0?1:-1;let v=3*n,_=0,w=3*_,x=i,S=3*x;for(let E=0;E<i;++E){const n=t[v],i=t[v+1],o=t[v+2];m&&(q[0]=n,q[1]=i,q[2]=o,(0,u.n)(q,q)),a[w+0]=n,a[w+1]=i,a[w+2]=o;const s=e[v+0],r=e[v+1],h=e[v+2];l[w+0]=s,l[w+1]=r,l[w+2]=h,c[w+0]=-b*q[0],c[w+1]=-b*q[1],c[w+2]=-b*q[2],p[_]=0,a[S+0]=n+y*q[0],a[S+1]=i+y*q[1],a[S+2]=o+y*q[2],l[S+0]=s,l[S+1]=r,l[S+2]=h,p[x]=y,w+=3,S+=3,v+=3,_+=1,x+=1}v=3*s,w=0,S=3*g;const P=y<0?tt:X,C=y<0?X:tt;for(let u=0;u<r;++u)d[w]=o[v+P[0]],d[w+1]=o[v+P[1]],d[w+2]=o[v+P[2]],h[S]=o[v+C[0]]+i,h[S+1]=o[v+C[1]]+i,h[S+2]=o[v+C[2]]+i,w+=3,S+=3,v+=3}(t,e,i.index,i.count,n,0,g,o,s,r,a,l,c,y,p,h,d);let f=0,m=2*i.count;y=0;const b=i.pathLengths[0];G(o,s,a,r,f,b,i.count,m,l,y,p),m+=4*b,y+=2*b,f+=b;for(let u=1;u<i.pathLengths.length;++u){const t=i.pathLengths[u];G(o,s,a,r,f,t,i.count,m,l,y,p),m+=4*t,y+=2*t,f+=t}}function O(t,e,n,i,o,s,r){i[s]=i[r],r*=3,t[s*=3]=t[r],t[s+1]=t[r+1],t[s+2]=t[r+2],e[s]=e[r],e[s+1]=e[r+1],e[s+2]=e[r+2],n[s]=o[0],n[s+1]=o[1],n[s+2]=o[2]}const B=(0,p.vt)();function G(t,e,n,i,o,s,r,a,l,c,u){e??=[],n??=[],i??=[];let p=o,h=o+1,d=o+r,g=o+r+1,y=a,f=a+1,m=a+2*s,b=a+2*s+1;u<0&&(p=o+r+1,g=o);let v=3*c;for(let _=0;_<s;++_)_===s-1&&(h=o,u>0?g=o+r:p=o+r),Y(t,p,h,d,B),O(t,e,i,n,B,y,p),O(t,e,i,n,B,f,h),O(t,e,i,n,B,m,d),O(t,e,i,n,B,b,g),l[v]=y,l[v+1]=m,l[v+2]=b,l[v+3]=y,l[v+4]=b,l[v+5]=f,v+=6,p++,h++,d++,g++,y+=2,f+=2,m+=2,b+=2}const T=(0,p.vt)(),H=(0,p.vt)(),K=(0,p.vt)(),$=(0,p.vt)(),W=(0,p.vt)();function Y(t,e,n,i,o){e*=3,n*=3,i*=3,(0,u.j)(T,t[e++],t[e++],t[e++]),(0,u.j)(H,t[n++],t[n++],t[n++]),(0,u.j)(K,t[i++],t[i++],t[i++]),(0,u.e)($,H,T),(0,u.e)(W,K,T),(0,u.i)(o,W,$),(0,u.n)(o,o)}const N=(0,p.vt)();function Z(t,e,n){const i=t.getMutableAttribute("position"),o=t.getMutableAttribute("normalCompressed").data,s=i.data,r=t.attributes.get("position").indices,{topVertexStart:a,topVertexCount:l,topFaceStart:c,topFaceCount:p}=e,h=c+p,d=a+l,g=nt,y=it,f=ot,m=q,b=Q;(0,u.j)(b,0,0,0);const v=(t,e)=>{const i=3*t;(0,u.j)(e,s[i+0],s[i+1],s[i+2]),(0,u.t)(e,e,n)};for(let _=c;_<h;++_){const t=3*_;v(r[t+0],g[0]),v(r[t+1],g[1]),v(r[t+2],g[2]),(0,u.a)(y,g[1],g[0]),(0,u.a)(f,g[2],g[0]),(0,u.i)(m,y,f),(0,u.g)(b,b,m)}(0,u.n)(b,b);for(let u=a;u<d;++u){const t=b[0],e=b[1],n=b[2];(0,R.aT)(o,u,t,e,n)}}const Q=(0,p.vt)(),q=(0,p.vt)(),J=new v.Uk,X=[0,2,1],tt=[0,1,2],et=.01,nt=[(0,p.vt)(),(0,p.vt)(),(0,p.vt)()],it=(0,p.vt)(),ot=(0,p.vt)();class st{constructor(t,e,n,i){this.positions=t,this.elevation=e,this.normals=n,this.heights=i}}class rt{constructor(t,e,n,i){this.topVertexStart=t,this.topVertexCount=e,this.topFaceStart=n,this.topFaceCount=i}}},29889:(t,e,n)=>{n.d(e,{A:()=>c,C:()=>l});var i=n(45308),o=n(44815),s=n(99785),r=n(67425),a=n(1599);function l(t,e,n,i){const a="polygon"===t.type?1:0,l="polygon"===t.type?t.rings:t.paths,{position:c,outlines:p}=(0,s.oR)(l,!!t.hasZ,a,t.spatialReference),h=(0,o.jh)(c.length),d=(0,r.au)(c,t.spatialReference,0,h,0,c,0,c.length/3,e,n,i),g=null!=d;return{lines:g?u(p,c,h):[],projectionSuccess:g,sampledElevation:d}}function c(t,e){const n="polygon"===t.type?1:0,o="polygon"===t.type?t.rings:t.paths,{position:r,outlines:l}=(0,s.oR)(o,!1,n),c=(0,i.projectBuffer)(r,t.spatialReference,0,r,e,0);for(let i=2;i<r.length;i+=3)r[i]=a.bi;return{lines:c?u(l,r):[],projectionSuccess:c}}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new Array;for(const{index:s,count:r}of t){if(r<=1)continue;const t=3*s,a=3*r;i.push({position:(0,o.l5)(e,3*s,3*r),mapPositions:null!=n?(0,o.l5)(n,t,a):void 0})}return i}},59883:(t,e,n)=>{function i(t,e,n){return{objectId:t,target:e,distance:n,type:"vertex"}}function o(t,e,n,i,o){return{objectId:t,target:e,distance:n,type:"edge",start:i,end:o,draped:arguments.length>5&&void 0!==arguments[5]&&arguments[5]}}n.d(e,{P:()=>o,k:()=>i})},86486:(t,e,n)=>{n.d(e,{LO:()=>a,kg:()=>l,or:()=>c,vl:()=>r});var i=n(69539),o=n(11687),s=n(15492);function r(t,e){const n=function(t,e){if(null!=t.symbol)return t.symbol;const n=e?.renderer;return null!=n&&"dot-density"!==n.type?n.getSymbol(t,e):null}(t,e);if(null==n)return null;const i=e?.renderer,r=new o.$(i,n);if(null==i||!("visualVariables"in i)||!i.visualVariables)return r;const a=(0,s.getVisualVariableValues)(i,t,e)??[],l=["proportional","proportional","proportional"];for(const{variable:o,value:s}of a)if(null!=s||"size"===o.type&&o.useSymbolValue)switch(o.type){case"color":r.color=s?.toRgba();break;case"size":if("outline"===o.target)r.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":s??"proportional";switch(t){case"width":l[0]=e;break;case"depth":l[1]=e;break;case"height":l[2]=e;break;case"width-and-depth":l[0]=l[1]=e;break;default:l[0]=l[1]=l[2]=e}}break;case"opacity":r.opacity=s;break;case"rotation":switch(o.axis){case"tilt":r.tilt=s;break;case"roll":r.roll=s;break;default:r.heading=s}}return"proportional"===l[0]&&"proportional"===l[1]&&"proportional"===l[2]||(r.size=l),r}async function a(t,e){const n=await async function(t,e){return null!=t.symbol?t.symbol:e?.renderer?.getSymbolAsync(t,e)??null}(t,e);if(!n)return null;const r=e?.renderer,a=new o.$(r,n);if(!r||!("visualVariables"in r)||!r.visualVariables)return a;const l=(0,s.getVisualVariableValues)(r,t,e)??[],c=["proportional","proportional","proportional"];for(const{variable:o,value:s}of l)if("color"===o.type)a.color=i.A.toUnitRGBA(s);else if("size"===o.type)if("outline"===o.target)a.outlineSize=s;else{const t=o.axis,e=o.useSymbolValue?"symbol-value":s;"width"===t?c[0]=e:"depth"===t?c[1]=e:"height"===t?c[2]=e:c[0]=c[1]="width-and-depth"===t?e:c[2]=e}else"opacity"===o.type?a.opacity=s:"rotation"===o.type&&"tilt"===o.axis?a.tilt=s:"rotation"===o.type&&"roll"===o.axis?a.roll=s:"rotation"===o.type&&(a.heading=s);return(isFinite(c[0])||isFinite(c[1])||isFinite(c[2]))&&(a.size=c),a}function l(t){const e=t[arguments.length>1&&void 0!==arguments[1]?arguments[1]:0];return"number"==typeof e&&isFinite(e)?e:null}function c(t){for(let e=0;e<3;e++){const n=t[e];if("number"==typeof n)return isFinite(n)?n:0}return 0}},87925:(t,e,n)=>{n.d(e,{AK:()=>c,C8:()=>l});var i=n(45308),o=n(44815),s=n(99785),r=n(67425),a=n(1599);function l(t,e,n,i){const a=(0,s.oR)(t.rings,!!t.hasZ&&"on-the-ground"!==i.mode,1,t.spatialReference),l=(0,o.jh)(a.position.length),c=(0,r.au)(a.position,t.spatialReference,0,l,0,a.position,0,a.position.length/3,e,n,i),h=null!=c;return new f(a.position,l,p(a.polygons,a.position,l),u(a.outlines,a.position,l),h,c)}function c(t,e){const n=(0,s.oR)(t.rings,!1,1),o=(0,i.projectBuffer)(n.position,t.spatialReference,0,n.position,e,0);for(let i=2;i<n.position.length;i+=3)n.position[i]=a.bi;return{position:n.position,polygons:p(n.polygons,n.position),outlines:u(n.outlines,n.position),projectionSuccess:o}}function u(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return t.filter(t=>{let{count:e}=t;return e>1}).map(t=>{let{index:i,count:s}=t;const r=3*i,a=3*s;return null!=n?new d(i,s,(0,o.l5)(e,r,a),(0,o.l5)(n,r,a)):new h(i,s,(0,o.l5)(e,r,a))})}function p(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=new Array;for(const{index:s,count:r,holeIndices:a,pathLengths:l}of t){if(r<=1)continue;const t=3*s,c=3*r,u=a.map(t=>t-s),p=null!=n?new g(s,r,(0,o.l5)(e,3*s,3*r),(0,o.l5)(n,t,c),u,l):new y(s,r,(0,o.l5)(e,3*s,3*r),u,l);i.push(p)}return i}class h{constructor(t,e,n){this.index=t,this.count=e,this.position=n}}class d extends h{constructor(t,e,n,i){super(t,e,n),this.mapPositions=i}}class g extends d{constructor(t,e,n,i,o,s){super(t,e,n,i),this.holeIndices=o,this.pathLengths=s}}class y extends h{constructor(t,e,n,i,o){super(t,e,n),this.holeIndices=i,this.pathLengths=o}}class f{constructor(t,e,n,i,o,s){this.position=t,this.mapPositions=e,this.polygons=n,this.outlines=i,this.projectionSuccess=o,this.sampledElevation=s}}},91217:(t,e,n)=>{n.d(e,{JQ:()=>g,SY:()=>h,a4:()=>p,dE:()=>d,v7:()=>u});var i=n(38983),o=n(76797),s=n(65215),r=n(38496),a=n(10294),l=n(50468),c=n(17345);function u(t,e,n){const o=(e.length>0?e[0]:t.length/3)-1,s=(0,a.S)(t,o,n);if(2!==s){t=t.slice();for(let e=0;e<t.length;e+=3)t[e+s]=t[e+2]}return(0,i.e)(t,e,3)}function p(t){const e=[["position",new l.n(t.attributeData.position,t.indices,3,!0)]],n=(0,r.EH)(t.indices.length);return null!=t.attributeData.colorFeature?e.push(["colorFeatureAttribute",new l.n([t.attributeData.colorFeature],n,1,!0)]):t.attributeData.color&&e.push(["color",new l.n(t.attributeData.color,n,4,!0)]),t.attributeData.uvMapSpace&&e.push(["uvMapSpace",new l.n(t.attributeData.uvMapSpace,t.indices,4,!0)]),t.attributeData.boundingRect&&e.push(["boundingRect",new l.n(t.attributeData.boundingRect,t.indices,9,!0)]),new c.V(t.material,e,t.mapPositions,0,t.attributeData.olidColor)}function h(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[["position",new l.n(t.attributeData.position,t.indices,3,!0)],["uv0",new l.n(t.attributeData.uv0,t.indices,2,!0)]];return new c.V(t.material,n,t.mapPositions,0,e)}function d(t){switch(t.type){case"extent":if(t instanceof o.A)return s.A.fromExtent(t);break;case"polygon":return t}return null}class g{constructor(t,e,n){this.renderData=t,this.layerViewUid=e,this.graphicUid=n,this.outGeometries=new Array}}}}]);
//# sourceMappingURL=8194.9332d5c0.chunk.js.map