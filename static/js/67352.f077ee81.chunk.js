"use strict";(self.webpackChunksc_pier_workable=self.webpackChunksc_pier_workable||[]).push([[67352],{67352:(t,e,i)=>{i.r(e),i.d(e,{default:()=>Kt});var n=i(6326),s=(i(81806),i(30726)),a=i(46053),r=i(76460),o=(i(47249),i(87990)),l=i(19747),u=i(2522),h=i(91967),d=i(24648),c=i(68134),g=i(31633),p=i(17430),v=i(29772);let _=class extends h.A{constructor(t){super(t)}initialize(){this.addHandles([(0,c.wB)(()=>({viewData:this.viewData,startPoint:this.analysis.startPoint}),t=>{let{viewData:e,startPoint:i}=t;e.elevationAlignedStartPoint=this._applyProjectionAndElevationAlignment(i)},c.pc),(0,c.wB)(()=>({viewData:this.viewData,endPoint:this.analysis.endPoint}),t=>{let{viewData:e,endPoint:i}=t;e.elevationAlignedEndPoint=this._applyProjectionAndElevationAlignment(i)},c.pc),(0,c.wB)(()=>({result:this._computedResult,viewData:this.viewData}),t=>{let{result:e,viewData:i}=t;i.result=e},c.pc)])}_applyProjectionAndElevationAlignment(t){if(null==t)return t;const{spatialReference:e,elevationProvider:i}=this.view;return(0,p.B)(t,e,i)??((0,p.V)(this.analysis,t.spatialReference,r.A.getLogger(this)),null)}get _computedResult(){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,measurementMode:i,unit:n}=this.viewData;if(null==t||null==e)return null;const s=(0,v.NH)(t,e),a=this.geodesicLengthMeasurementUtils.geodesicDistanceBetweenPoints(t,e);if(null==s)return null;let r,o;switch(i){case 0:o=null!=a?"geodesic":"euclidean",r=a??s.horizontal;break;case 2:if(null==a)return null;o="geodesic",r=a;break;case 1:o="euclidean",r=s.horizontal}let l=s.direct,u=s.vertical;const h=(0,g.Vs)(l.value,l.unit,n),c=(0,g.Vs)(r.value,r.unit,n),p=(0,g.jE)(u.value,u.unit,n);return l=(0,d.kM)(l,h),r=(0,d.kM)(r,c),u=(0,d.kM)(u,p),{mode:o,directDistance:l,horizontalDistance:r,verticalDistance:u}}};(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"viewData",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],_.prototype,"geodesicLengthMeasurementUtils",void 0),(0,n.Cg)([(0,a.MZ)()],_.prototype,"_computedResult",null),_=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementController")],_);i(11265);var m=i(59784),y=i(15941),w=i(11113),C=i(76931),b=i(19555),M=i(20664),P=i(9392),L=i(4244),f=i(66747),V=i(7256),S=i(88321),E=i(13191),O=i(43047),D=i(55855),z=i(75762),A=i(32314),Z=i(5101),x=i(71372),R=i(72017),H=i(34981),T=i(59696),G=i(45463),k=i(48549),B=i(16506),j=i(59246),Q=i(60322),W=i(90806),I=i(93345),U=i(57162);class q extends j.w{constructor(t,e){super(t,e,new B.$(W.M,()=>i.e(59492).then(i.bind(i,59492))),N.locations),this.primitiveType=I.WR.TRIANGLE_STRIP}initializePipeline(t){return(0,U.Ey)({blending:t.transparent?(0,Q.Yf)(t.oitPass):null,polygonOffset:t.polygonOffsetEnabled?{factor:0,units:-4}:null,depthTest:{func:513},depthWrite:U.Uy,colorWrite:U.kn})}}const N=(0,k.BP)().vec3f("position").vec3f("normal").vec2f("uv0").f32("length");var F=i(6485),J=i(92656);class $ extends J.E{constructor(){super(...arguments),this.polygonOffsetEnabled=!1,this.transparent=!1}}(0,n.Cg)([(0,F.W)()],$.prototype,"polygonOffsetEnabled",void 0),(0,n.Cg)([(0,F.W)()],$.prototype,"transparent",void 0);var X=i(75569);class Y extends G.i{constructor(t){super(t,tt),this._configuration=new $,this.intersectDraped=void 0,this.produces=new Map([[2,t=>!this._transparent&&(0,H.RN)(t)],[8,t=>this._transparent&&(0,H.RN)(t)]])}getConfiguration(t,e){return super.getConfiguration(t,e,this._configuration),this._configuration.polygonOffsetEnabled=this.parameters.polygonOffset,this._configuration.transparent=this._transparent,this._configuration.oitPass=e.oitPass,this._configuration}get visible(){const{outlineColor:t,stripeEvenColor:e,stripeOddColor:i}=this.parameters;return t[3]>=X.Q||e[3]>=X.Q||i[3]>=X.Q}intersect(){}createGLMaterial(t){return new K(t)}createBufferWriter(){return new rt}get _transparent(){const{parameters:t}=this;return t.outlineColor[3]<1||t.stripeEvenColor[3]<1||t.stripeOddColor[3]<1}}class K extends T.A{beginSlot(t){return this.getTechnique(q,t)}}class tt extends G.q{constructor(){super(...arguments),this.width=32,this.outlineSize=.2,this.outlineColor=(0,D.fA)(1,.5,0,1),this.stripeEvenColor=(0,D.fA)(1,1,1,1),this.stripeOddColor=(0,D.fA)(1,.5,0,1),this.stripeLength=1,this.polygonOffset=!1}}const et=(0,P.vt)(),it=(0,P.vt)(),nt=(0,P.vt)(),st=(0,P.vt)(),at=(0,P.vt)();class rt{constructor(){this.layout=N}elementCount(t){return 2*(t.get("position").indices.length/2+1)}write(t,e,i,n,s,a){const{data:r,indices:o}=i.get("position"),l=i.get("normal").data,u=r.length/3;o&&o.length!==2*(u-1)&&console.warn("MeasurementArrowMaterial does not support indices");const h=et,d=it,c=nt,g=st,p=at,v=s.position,_=s.normal,m=s.uv0;let y=0;for(let C=0;C<u;++C){const i=3*C;if((0,M.j)(h,r[i],r[i+1],r[i+2]),C<u-1){const t=3*(C+1);(0,M.j)(d,r[t],r[t+1],r[t+2]),(0,M.j)(p,l[t],l[t+1],l[t+2]),(0,M.n)(p,p),(0,M.e)(c,d,h),(0,M.n)(c,c),(0,M.i)(g,p,c),(0,M.n)(g,g)}const n=(0,M.k)(h,d);t&&e&&((0,M.t)(h,h,t),(0,M.t)(d,d,t),(0,M.t)(g,g,e));const s=a+2*C,o=s+1;v.setVec(s,h),v.setVec(o,h),_.setVec(s,g),_.setVec(o,g),m.set(s,0,y),m.set(s,1,-1),m.set(o,0,y),m.set(o,1,1),C<u-1&&(y+=n)}const w=s.length;for(let C=0;C<2*u;++C)w.set(a+C,y);return null}}class ot extends A.X{constructor(t){super(t),this._arrowWidth=16,this._arrowSubdivisions=128,this._origin=(0,P.vt)(),this._originTransform=(0,E.vt)(),this._arrowCenter=(0,P.vt)(),this._renderOccluded=4,this._geometry=null,this._stripeLength=1,this._stripesEnabled=!0,this._color=(0,D.vt)(),this._contrastColor=(0,D.vt)(),this.applyProperties(t)}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._arrowMaterial?.setParameters({renderOccluded:t}))}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this._geometryChanged()}get stripeLength(){return this._stripeLength}set stripeLength(t){this._stripeLength=t,this.attached&&this._arrowMaterial.setParameters({stripeLength:this._stripeLength})}get stripesEnabled(){return this._stripesEnabled}set stripesEnabled(t){if(this._stripesEnabled=t,this.attached){const t=this._stripesEnabled?this._contrastColor:this._color;this._arrowMaterial.setParameters({stripeEvenColor:t})}}get color(){return this._color}set color(t){(0,m.we)(t,this._color)||((0,O.d)(this._color,t),this._updateArrowColor())}get contrastColor(){return this._contrastColor}set contrastColor(t){(0,m.we)(t,this._color)||((0,O.d)(this._contrastColor,t),this._updateArrowColor())}createExternalResources(){const t=this._color,e=this._contrastColor,i=this._stripesEnabled?e:t;this._arrowMaterial=new Y({outlineColor:t,stripeEvenColor:i,stripeOddColor:t,renderOccluded:this.renderOccluded,polygonOffset:!0,isDecoration:this.isDecoration}),this._handles=new S.A,this._handles.add((0,c.wB)(()=>this.view.state.camera,()=>{this._viewChanged()}))}destroyExternalResources(){this._arrowMaterial=null,this._handles=(0,s.pR)(this._handles)}forEachMaterial(t){t(this._arrowMaterial)}createGeometries(t){if(null==this._geometry?.startRenderSpace||null==this._geometry.endRenderSpace)return;const e=this._createArrowGeometry(this._geometry.startRenderSpace,this._geometry.endRenderSpace,this._origin,this._geometry);e.transformation=this._originTransform,t.addGeometry(e),this._viewChanged()}_createArrowGeometry(t,e,i,n){const s=this.view,a=s.renderCoordsHelper,r=[],o=[],l=(t,e)=>{const n=z.rq.get();(0,M.e)(n,t,i),r.push(n),o.push(e)};if("euclidean"===n.type){n.eval(.5,this._arrowCenter);const i=z.rq.get();if(a.worldUpAtPosition(this._arrowCenter,i),function(t,e,i){const n=(0,M.a)(lt,e,t),s=(0,M.i)(lt,n,i);return 0===(0,M.H)(s)}(t,e,i)){const{heading:e,tilt:n}=s.camera,{direction:a}=(0,Z.ZC)(s,t,e,n,ut);(0,M.d)(i,a)}l(t,i),l(e,i)}else{n.eval(.5,this._arrowCenter);const t=this._arrowSubdivisions+1&-2;for(let e=0;e<t;++e){const i=e/(t-1),s=z.rq.get(),r=z.rq.get();n.eval(i,s),a.worldUpAtPosition(s,r),l(s,r)}}return(0,R.Z8)(this._arrowMaterial,r,o)}_geometryChanged(){this.recreateGeometry()}_viewChanged(){if(this.view.ready&&this.attached&&null!=this._geometry){const t=this.view.state.camera.computeScreenPixelSizeAt(this._arrowCenter);this._arrowMaterial.setParameters({width:this._arrowWidth*t})}}_updateArrowColor(){if(!this.attached)return;const t=this._color,e=this._contrastColor,i=this._stripesEnabled?e:t,n=t,s=t;this._arrowMaterial.setParameters({stripeEvenColor:i,outlineColor:n,stripeOddColor:s})}}const lt=(0,P.vt)(),ut=(0,x.NP)();var ht=i(47996),dt=i(25191),ct=i(35925),gt=i(90659),pt=i(38042),vt=i(63860);let _t=class extends h.A{get _parameters(){const t=this.view.effectiveTheme,{accentColor:e,textColor:i}=t,n=(0,m.QP)(e),s=(0,m.f6)(e,.75),a=(0,m.QP)((0,m.bJ)(e)),r=(0,m.bJ)(i,160);return{accentColor:n,contrastColor:a,translucentAccentColor:s,triangleLineWidth:3,geodesicProjectionLineWidth:2,guideLineWidth:2,guideStippleLengthPixels:3,directLabelFontSize:16,horizontalLabelFontSize:12,verticalLabelFontSize:12,textColor:i,textBackgroundColor:(0,m._L)(r,.6),textCalloutColor:(0,m._L)(r,.5)}}get visible(){return this.analysisView.visible}get viewMode(){const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e}=this.analysisView;if(null==t||null==e||t.equals(e))return 0;const i=this.analysisView.result;if(null==i)return 1;if("geodesic"===this.actualVisualizedMeasurement)return this._requiresGeodesicGuideAt(this._startPosition)||this._requiresGeodesicGuideAt(this._endPosition)?3:1;const{verticalDistance:n,horizontalDistance:s}=i,a=(0,d.kM)(n,"meters").value,r=(0,d.kM)(s,"meters").value;return Math.min(a/r,r/a)<this.triangleCollapseRatioThreshold?1:2}get actualVisualizedMeasurement(){const{measurementMode:t,result:e}=this.analysisView;switch(t){case 0:return null!=e&&(0,d.kM)(e.horizontalDistance,"meters").value>gt.U7?"geodesic":"euclidean";case 1:return"euclidean";case 2:return"geodesic"}}get allowVisualElementsOrientationChange(){return null==this._triangleOrientationOverride}set allowVisualElementsOrientationChange(t){null==this._triangleOrientationOverride!==t&&(null==this._triangleOrientationOverride?this._triangleOrientationOverride=this._actualVisualElementsOrientation:this._triangleOrientationOverride=null)}get labels(){return"geodesic"===this.actualVisualizedMeasurement?{direct:null,horizontal:this._segmentLabel,vertical:this._verticalLabel}:{direct:this._segmentLabel,horizontal:this._horizontalLabel,vertical:this._verticalLabel}}constructor(t){super(t),this._segmentVisualElement=null,this._triangleVisualElement=null,this._rightAngleQuad=null,this._projectedGeodesicLine=null,this._geodesicStartHint=null,this._geodesicEndHint=null,this._segmentLabel=null,this._verticalLabel=null,this._horizontalLabel=null,this._startPosition=(0,P.vt)(),this._endPosition=(0,P.vt)(),this._cornerPosition=(0,P.vt)(),this._startPositionAtSeaLevel=(0,P.vt)(),this._endPositionAtSeaLevel=(0,P.vt)(),this._triangleOrientationOverride=null,this.messages=null,this.loadingMessages=!0,this.visualElementOrientation=0,this.triangleCollapseRatioThreshold=.03}initialize(){const t={attached:!0,view:this.view,isDecoration:!0},{guideLineWidth:e,guideStippleLengthPixels:i,triangleLineWidth:n,geodesicProjectionLineWidth:s,directLabelFontSize:a,verticalLabelFontSize:r,horizontalLabelFontSize:o}=this._parameters;this._segmentVisualElement=new ot({...t,geometry:null,renderOccluded:4}),this._triangleVisualElement=new V.t({...t,width:n,renderOccluded:4}),this._rightAngleQuad=new ht.n({...t,renderOccluded:4});const l={...t,polygonOffset:!0,renderOccluded:4};this._projectedGeodesicLine=new V.t({...l,width:s,stipplePattern:(0,ct.wk)(i)}),this._geodesicStartHint=new V.t({...l,width:e,stipplePattern:(0,ct.wk)(i)}),this._geodesicEndHint=new V.t({...l,width:e,stipplePattern:(0,ct.wk)(i)}),this._segmentLabel=new f.N({...t,fontSize:a}),this._verticalLabel=new f.N({...t,fontSize:r}),this._horizontalLabel=new f.N({...t,fontSize:o}),this.addHandles([(0,c.wB)(()=>{const{elevationAlignedStartPoint:t,elevationAlignedEndPoint:e}=this.analysisView,i=this.view;return{view:i,camera:i.state.camera,viewMode:this.viewMode,elevationAlignedStartPoint:t,elevationAlignedEndPoint:e,orientation:this._actualVisualElementsOrientation,visualizedMeasurement:this.actualVisualizedMeasurement,stripeLength:this._measurementArrowStripeLength}},t=>this._updateGeometryAndViewMode(t),c.pc),(0,c.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),t=>this._updateVisualElementVisibility(t),c.pc),(0,c.wB)(()=>({text:this._labelsText,visualizedMeasurement:this.actualVisualizedMeasurement}),t=>this._updateLabelText(t),c.pc),(0,c.wB)(()=>({visible:this.visible,viewMode:this.viewMode}),t=>this._updateLabelVisibility(t),c.pc),(0,c.wB)(()=>this._measurementArrowStripeLength,t=>this._updateSegmentStripeLength(t),c.pc),(0,pt.oQ)(()=>this._updateMessageBundle()),(0,c.wB)(()=>this._parameters,t=>{let{textBackgroundColor:e,textCalloutColor:i,textColor:n,translucentAccentColor:s,accentColor:a,contrastColor:r}=t;const{_segmentLabel:o,_verticalLabel:l,_horizontalLabel:u,_triangleVisualElement:h,_rightAngleQuad:d,_projectedGeodesicLine:c,_geodesicStartHint:g,_geodesicEndHint:p,_segmentVisualElement:v}=this;o.backgroundColor=e,o.calloutColor=i,o.textColor=n,l.backgroundColor=e,l.calloutColor=i,l.textColor=n,u.backgroundColor=e,u.calloutColor=i,u.textColor=n,h.color=s,d.color=s,c.color=s,g.color=s,p.color=s,v.color=a,v.contrastColor=r},c.Vh)]),this._updateMessageBundle()}destroy(){this._segmentVisualElement=(0,s.pR)(this._segmentVisualElement),this._triangleVisualElement=(0,s.pR)(this._triangleVisualElement),this._rightAngleQuad=(0,s.pR)(this._rightAngleQuad),this._projectedGeodesicLine=(0,s.pR)(this._projectedGeodesicLine),this._geodesicStartHint=(0,s.pR)(this._geodesicStartHint),this._geodesicEndHint=(0,s.pR)(this._geodesicEndHint),this._segmentLabel=(0,s.pR)(this._segmentLabel),this._verticalLabel=(0,s.pR)(this._verticalLabel),this._horizontalLabel=(0,s.pR)(this._horizontalLabel),this.set("view",null)}_updateVisualElementVisibility(t){let{visible:e,viewMode:i}=t;if(this._segmentVisualElement.visible=!1,this._triangleVisualElement.visible=!1,this._rightAngleQuad.visible=!1,this._projectedGeodesicLine.visible=!1,this._geodesicStartHint.visible=!1,this._geodesicEndHint.visible=!1,e)switch(i){case 0:break;case 1:this._segmentVisualElement.visible=!0;break;case 2:this._segmentVisualElement.visible=!0,this._triangleVisualElement.visible=!0,this._rightAngleQuad.visible=!0;break;case 3:this._segmentVisualElement.visible=!0,this._projectedGeodesicLine.visible=!0,this._geodesicStartHint.visible=!0,this._geodesicEndHint.visible=!0}}_updateGeometryAndViewMode(t){let{view:e,camera:i,viewMode:n,elevationAlignedStartPoint:s,elevationAlignedEndPoint:a,orientation:r,visualizedMeasurement:o,stripeLength:l}=t;const u=e.renderCoordsHelper;if(null==u||null==s||null==a||s.equals(a))return;let h=this._startPosition,d=this._endPosition;u.toRenderCoords(s,h),u.toRenderCoords(a,d);const c=1===r?1:-1,g=c*(u.getAltitude(d)-u.getAltitude(h));g<0&&(h=this._endPosition,d=this._startPosition);const p="geodesic"===o?new dt.J(this._startPosition,this._endPosition,u.spatialReference):new dt.C(this._startPosition,this._endPosition);switch(this._segmentVisualElement.geometry=p,this._updateSegmentStripeLength(l),n){case 1:this._updateSegment(p,r);break;case 2:this._updateSegmentAndTriangle({view:e,camera:i,segment:p,orientation:r,startPosition:h,endPosition:d,deltaSign:c,altitudeDelta:g});break;case 3:this._updateSegmentAndProjection({view:e,orientation:r,startPosition:h,endPosition:d})}}_updateSegment(t,e){this._segmentLabel.anchor=1===e?"top":"bottom",this._segmentLabel.geometry={type:"segment",segment:t,sampleLocation:"center"}}_updateSegmentAndTriangle(t){let{view:{renderCoordsHelper:e},camera:i,segment:n,orientation:s,startPosition:a,endPosition:r,deltaSign:o,altitudeDelta:l}=t;const u=this._cornerPosition;e.worldUpAtPosition(a,u),(0,M.h)(u,u,o*Math.abs(l)),(0,M.g)(u,u,a),this._triangleVisualElement.geometry=[[[a[0],a[1],a[2]],[u[0],u[1],u[2]],[r[0],r[1],r[2]]]],this._rightAngleQuad.geometry={previous:a,center:u,next:r};const h=new dt.C(a,u),d=new dt.C(u,r),c=function(t,e,i,n,s){const a=(0,L.Q)(t,i,s,Ct),r=(0,L.Q)(t,e,s,bt);if(null==a||null==r)return null;const o=s.projectToRenderScreen(i,yt),l=s.projectToRenderScreen(e,wt),u={segment:"bottom",horizontal:"top",vertical:null==o||null==l||o[0]<l[0]?"left":"right"};if((0,b.Om)(a,r)>=mt){const t=Math.sign(a[1])===Math.sign(r[1]);u.segment=t?(0,f.R)(u.vertical):u.vertical}else{const t=Mt;(0,L.Q)(i,e,s,t),(0,b.Om)(t,r)>=mt&&(u.segment=Math.sign(t[0])===Math.sign(r[0])?(0,f.R)(u.horizontal):u.horizontal)}if(2===n){const t=t=>"top"===t?"bottom":"top";u.segment=t(u.segment),u.horizontal=t(u.horizontal),u.vertical=t(u.vertical)}return u}(a,r,u,s,i);c&&(this._segmentLabel.anchor=c.segment,this._segmentLabel.geometry={type:"segment",segment:n,sampleLocation:"center"},this._verticalLabel.geometry={type:"segment",segment:h,sampleLocation:"center"},this._verticalLabel.anchor=c.vertical,this._horizontalLabel.geometry={type:"segment",segment:d,sampleLocation:"center"},this._horizontalLabel.anchor=c.horizontal)}_updateSegmentAndProjection(t){let{view:{renderCoordsHelper:e},orientation:i,startPosition:n,endPosition:s}=t;e.setAltitude(this._startPositionAtSeaLevel,0,n),e.setAltitude(this._endPositionAtSeaLevel,0,s);const a=new dt.J(this._startPositionAtSeaLevel,this._endPositionAtSeaLevel,e.spatialReference);this._projectedGeodesicLine.setGeometryFromSegment(a),this._geodesicStartHint.setGeometryFromSegment(new dt.C(this._startPositionAtSeaLevel,n)),this._geodesicEndHint.setGeometryFromSegment(new dt.C(this._endPositionAtSeaLevel,s)),this._segmentLabel.geometry={type:"segment",segment:a,sampleLocation:"center"},this._segmentLabel.anchor=1===i?"top":"bottom"}_updateLabelText(t){let{text:e,visualizedMeasurement:i}=t;null!=e?(this._segmentLabel.text="euclidean"===i?e.directDistance:e.horizontalDistance,this._horizontalLabel.text=e.horizontalDistance,this._verticalLabel.text=e.verticalDistance):(this._segmentLabel.text=null,this._horizontalLabel.text=null,this._verticalLabel.text=null),this.notifyChange("labels")}_updateLabelVisibility(t){let{visible:e,viewMode:i}=t;const n=this._segmentLabel,s=this._horizontalLabel,a=this._verticalLabel;if(n.visible=!1,s.visible=!1,a.visible=!1,e)switch(i){case 1:case 3:n.visible=!0;break;case 2:n.visible=!0,s.visible=!0,a.visible=!0}}get _labelsText(){if(this.destroyed)return null;const t=this.messages,e=this.analysisView.result;if(null==e||null==t)return null;const{directDistance:i,horizontalDistance:n,verticalDistance:s}=e,a=this.analysisView.unit,r=t=>({directDistance:"",horizontalDistance:"",verticalDistance:"",...t});switch(a){case"metric":return r({directDistance:i&&(0,w.Ee)(t,i),horizontalDistance:n&&(0,w.Ee)(t,n),verticalDistance:s&&(0,w.W4)(t,s)});case"imperial":return r({directDistance:i&&(0,w.tr)(t,i),horizontalDistance:n&&(0,w.tr)(t,n),verticalDistance:s&&(0,w.t_)(t,s)});default:return r({directDistance:i&&(0,w.zJ)(t,i,a),horizontalDistance:n&&(0,w.zJ)(t,n,a),verticalDistance:s&&(0,w.zJ)(t,s,a)})}}_updateSegmentStripeLength(t){const e=this._segmentVisualElement;null!=t?(e.stripeLength=t,e.stripesEnabled=!0):e.stripesEnabled=!1}get _actualVisualElementsOrientation(){if(null!=this._triangleOrientationOverride)return this._triangleOrientationOverride;const t=this.visualElementOrientation;return 0===t?this.view.state.camera.aboveGround?1:2:t}_requiresGeodesicGuideAt(t){const e=this.view;if(!e?.state)return!1;const i=e.state.camera,n=e.renderCoordsHelper;if(!n)return!1;const s=i.computeScreenPixelSizeAt(t);return n.getAltitude(t)/s>=10}get _measurementArrowStripeLength(){const{result:t,unit:e}=this.analysisView;if(null==t)return null;let i=null;const n=t.directDistance;switch(e){case"metric":i=n&&(0,d.kM)(n,"meters");break;case"imperial":i=n&&(0,d.kM)(n,(0,g.OU)(n.value,n.unit));break;default:i=n&&(0,d.kM)(n,e)}return null==i?null:(0,y.Vr)(i.value/30)*(0,g.oU)(1,i.unit,"meters")}_updateMessageBundle(){this.loadingMessages=!0,(0,vt.ud)("esri/core/t9n/Units").then(t=>{this.messages=t}).finally(()=>{this.loadingMessages=!1})}get testData(){}};(0,n.Cg)([(0,a.MZ)()],_t.prototype,"_parameters",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"_triangleOrientationOverride",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"messages",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"analysisView",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"loadingMessages",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"visible",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"viewMode",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"actualVisualizedMeasurement",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"visualElementOrientation",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"triangleCollapseRatioThreshold",void 0),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"allowVisualElementsOrientationChange",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"labels",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"_labelsText",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"_actualVisualElementsOrientation",null),(0,n.Cg)([(0,a.MZ)()],_t.prototype,"_measurementArrowStripeLength",null),_t=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurement.DirectLineMeasurementVisualization")],_t);const mt=Math.cos((0,y.kU)(12)),yt=(0,C.r_)(),wt=(0,C.r_)(),Ct=(0,C.QG)(),bt=(0,C.QG)(),Mt=(0,C.QG)();var Pt=i(56002),Lt=i(19451),ft=i(19247),Vt=i(32535),St=i(77515),Et=i(70836),Ot=i(7947),Dt=i(69539),zt=i(44230),At=i(56121),Zt=i(38317),xt=i(91175),Rt=i(1307);let Ht=class extends h.A{constructor(t){super(t),this.cursorPoint=null,this._visible=!1,this._laserLine=null,this.laserLineEnabled=!0,this._lastDraggedHandle=null}initialize(){this._laserLine=new Rt.o({view:this.view,attached:!0,isDecoration:!0}),this._updateVisibility(this._visible),this._connectToAnalysisView(),this.addHandles((0,c.wB)(()=>this._params,t=>{let{laserLineGlowColor:e,laserLineInnerColor:i,laserLineGlobalAlpha:n}=t;const s=this._laserLine,a=s.style;s.style={...a,innerColor:i,glowColor:e,globalAlpha:n}}))}destroy(){this._laserLine=(0,s.pR)(this._laserLine)}get _params(){const{accentColor:t}=this.view.effectiveTheme;return{laserLineGlowColor:Dt.A.toUnitRGB(t),laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:Dt.A.toUnitRGB((0,m.bJ)(t)),laserLineInnerWidth:.75,laserLineGlobalAlpha:.75*t.a,handleColor:(0,m.f6)(t,.5),handleRadius:5}}get visible(){return this._visible}set visible(t){t?this.show():this.hide()}get testData(){}get _cursorPosition(){const t=(0,P.vt)(),e=this.cursorPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _startPosition(){const t=(0,P.vt)(),e=this.analysis.startPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _endPosition(){const t=(0,P.vt)(),e=this.analysis.endPoint;return e&&this.view.renderCoordsHelper.toRenderCoords(e,t),t}get _laserLineParams(){const t=this._focusPosition,{active:e,lineState:i}=this.toolState,n=this.analysisViewData,s=this.laserLineEnabled&&!!t&&"measured"!==i&&e;if(!s||!this.visible||null==n||n.destroyed)return{heightManifoldTarget:null,pointDistanceLine:null,lineVerticalPlaneSegment:null};const a=n.actualVisualizedMeasurement,r="local"!==this.view.viewingMode&&s&&!!this.analysis.startPoint&&"geodesic"===a,o=s&&2===n.viewMode;return{heightManifoldTarget:"euclidean"===a?t:null,pointDistanceLine:r?this._pointDistanceLine:null,lineVerticalPlaneSegment:o?(0,zt.Cr)(this._startPosition,this._endPosition):null}}get _focusPosition(){const{lineState:t}=this.toolState,e=this.analysisViewData,i=null!=e&&!e.destroyed&&1===e.measurementMode&&1===e.viewMode;switch(t){case"drawing":return i?this._startPosition:this.analysis.endPoint?this._endPosition:this._startPosition;case"editing":return i?"start"===this._lastDraggedHandle?this._endPosition:this._startPosition:"start"===this._lastDraggedHandle?this._startPosition:this._endPosition;default:return null!=this.cursorPoint?this._cursorPosition:null}}get _pointDistanceLine(){return{origin:"drawing"===this.toolState.lineState||"end"===this._lastDraggedHandle?this._startPosition:this._endPosition,target:this._focusPosition}}createManipulators(){const t=this._params,{view:e}=this,i=()=>{const i=(0,Zt.UM)(t.handleColor),n=[new xt.M((0,R.CM)(i,1,32,32))],s=new At.q({view:e,renderObjects:n});return s.available=!1,s.radius=t.handleRadius,[s,i]},[n,s]=i(),[a,r]=i(),o=new At.q({view:this.view,available:!1,interactive:!1});null!=this.analysis.startPoint&&(n.location=this.analysis.startPoint,n.available=!0),null!=this.analysis.endPoint&&(a.location=this.analysis.endPoint,a.available=!0);const l=()=>{let t=this._lastDraggedHandle;n.grabbing&&!a.grabbing&&(t="start"),a.grabbing&&!n.grabbing&&(t="end"),n.grabbing||a.grabbing||(t=null),this._lastDraggedHandle=t},u=n.events.on("grab-changed",l),h=a.events.on("grab-changed",l);return this.addHandles([u,h,(0,c.wB)(()=>(0,m.pf)(this._params.handleColor),t=>{s.setParameters({color:t}),r.setParameters({color:t})},{equals:m.we})],"manipulators"),{start:n,end:a,cursor:o}}show(){this.destroyed||this._visible||this._updateVisibility(!0)}hide(){!this.destroyed&&this._visible&&this._updateVisibility(!1)}_connectToAnalysisView(){this.removeHandles("analysis-view"),this.addHandles([(0,c.wB)(()=>this.analysisViewData?.destroyed,t=>{t&&this.removeHandles("analysis-view")},c.Vh),(0,c.wB)(()=>["measured"===this.toolState.lineState,this.analysisViewData],t=>{let[e,i]=t;null==i||i.destroyed||(i.allowVisualElementsOrientationChange=!e)},c.Vh),(0,c.wB)(()=>this._laserLineParams,t=>{const e=this._laserLine;e.heightManifoldTarget=t.heightManifoldTarget,e.pointDistanceLine=t.pointDistanceLine,e.lineVerticalPlaneSegment=t.lineVerticalPlaneSegment},c.Vh)],"analysis-view")}_updateVisibility(t){this.initialized&&(this._visible=t,t&&(this._laserLine.style={innerColor:this._params.laserLineInnerColor,innerWidth:this._params.laserLineInnerWidth,glowColor:this._params.laserLineGlowColor,glowWidth:this._params.laserLineGlowWidth,glowFalloff:this._params.laserLineGlowFalloff,globalAlpha:this._params.laserLineGlobalAlpha}),this._laserLine.visible=t)}};(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ht.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_params",null),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ht.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ht.prototype,"analysisViewData",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"cursorPoint",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"toolState",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"visible",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"testData",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_visible",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_laserLine",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ht.prototype,"laserLineEnabled",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_cursorPosition",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_startPosition",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_endPosition",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_lastDraggedHandle",void 0),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_laserLineParams",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_focusPosition",null),(0,n.Cg)([(0,a.MZ)()],Ht.prototype,"_pointDistanceLine",null),Ht=(0,n.Cg)([(0,o.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DView")],Ht);var Tt=i(80935),Gt=i(5109),kt=i(89238),Bt=i(17046),jt=i(974),Qt=i(56497),Wt=i(13284),It=i(61237),Ut=i(75218),qt=i(70330),Nt=i(11500);let Ft=class extends Gt.k{constructor(t){super(t),this._updatingHandles=new Lt.U,this._snappingManagerResult=null,this._emulatedDrag=null,this.lineState="initial",this.removeIncompleteOnCancel=!1,this.startPointSurfaceLocation=null,this.endPointSurfaceLocation=null,this.cursorPointSurfaceLocation=null,this.startManipulator=null,this.endManipulator=null,this.cursorManipulator=null,this._getSnappingContext=(0,Pt.B)(t=>new Wt.e({elevationInfo:{mode:"absolute-height",offset:0},pointer:t,editGeometryOperations:new Qt.p(new jt.ZE("point",(0,kt.BV)(!0,!1,this.view.spatialReference)),this.view.state.viewingMode),visualizer:new Et.s}))}initialize(){const{view:t,analysis:e,analysisViewData:i,visible:n}=this;this.measurementView=new Ht({toolState:this,view:t,analysis:e,analysisViewData:i,visible:n});const{start:s,end:a,cursor:r}=this.measurementView.createManipulators(),o=(t,e,i)=>{const n=(0,Bt.Xt)(t,(t,n,s,a)=>{const r=(0,Ot.z7)(t),o=this._ensureSnappingManager(),l=this._getSnappingContext(a),u=this._updatingHandles,{lineState:h}=this;s=s.next(r).next((0,Bt.VG)(this,[i,e])).next(i=>{if("cursorPoint"!==e){const i=this.analysis[e];null!=i&&(t.location=i)}return i});const d=(0,Ot.xk)(this.view);let c=n.next(r).next(t=>{const n=d(t);return n||"drawing"!==this.lineState&&"initial"!==this.lineState||(this[e]=null,this[i]=null),n});if("touch"!==a||"editing"===h){const{snappingStep:t,cancelSnapping:e}=(0,It.L)({snappingManager:o,snappingContext:l,updatingHandles:u});s=s.next(e),c=c.next(...t)}c.next(t=>"start"!==t.action?t:null).next(n=>{const s=(0,Vt.EL)(n.mapEnd,new ft.A);this[e]=s,t.location=s,this[i]=this._surfaceLocation(s,n.surfaceType)})});return"cursorPoint"===e?[n]:[n,t.events.on("grab-changed",()=>{const t=s.grabbing||a.grabbing;this.lineState=t?"editing":"measured"}),(0,c.wB)(()=>this.analysis[e],e=>{e&&(t.location=e)})]};this.startManipulator=s,this.endManipulator=a,this.cursorManipulator=r,this.manipulators.add(s),this.manipulators.add(a),this.manipulators.add(r),this.addHandles([...o(s,"startPoint","startPointSurfaceLocation"),...o(a,"endPoint","endPointSurfaceLocation"),...o(r,"cursorPoint","cursorPointSurfaceLocation"),(0,c.z7)(()=>"measured"===this.state,()=>{this.finishToolCreation(),this.active&&(this.view.activeTool=null)},c.pc),(0,c.wB)(()=>({startPointAvailable:null!=this.startPoint,endPointAvailable:null!=this.endPoint}),t=>{let{startPointAvailable:e,endPointAvailable:i}=t;this.startManipulator.available=e,this.endManipulator.available=i},c.pc)]),(0,qt.BY)(this)}destroy(){this._updatingHandles=(0,s.pR)(this._updatingHandles),this.measurementView=(0,s.pR)(this.measurementView)}get _snappingManager(){return this._snappingManagerResult?.snappingManager}_ensureSnappingManager(){if(null==this._snappingManagerResult){const t=(0,Ut.X)(this.view);this._snappingManagerResult=t,this.addHandles(t)}return this._snappingManagerResult.snappingManager}get state(){const{analysis:t}=this;if(null==t.startPoint&&null==t.endPoint)return"ready";const{lineState:e}=this;return this.validMeasurement&&"editing"!==e&&"drawing"!==e?"measured":"measuring"}get cursor(){return!this.active||"ready"!==this.state&&"measured"===this.lineState?null:"crosshair"}get startPoint(){return this.analysis.startPoint}set startPoint(t){this.analysis.startPoint=t}get endPoint(){return this.analysis.endPoint}set endPoint(t){this.analysis.endPoint=t}get cursorPoint(){return this.measurementView.cursorPoint}set cursorPoint(t){this.measurementView.cursorPoint=t}get snappingOptions(){return this._snappingManager?.options}get validMeasurement(){return null!=this.analysis.startPoint&&null!=this.analysis.endPoint}get updating(){return this._updatingHandles.updating||!!this._snappingManager?.updating}resetCreated(){super.resetCreated(),this.lineState="initial",this.cursorPoint=null,"measured"===this.state&&this.finishToolCreation()}onShow(){this.measurementView.show()}onHide(){this.measurementView.hide()}onDeactivate(){this._emulatedDrag?.cancel(),this._emulatedDrag=null}onInputEvent(t){switch(t.type){case"immediate-click":this._handleImmediateClick(t);break;case"pointer-move":this._handlePointerMove(t)}}_handlePointerMove(t){if(!this.active||this.view.navigating)return;const{pointerType:e}=t;if("mouse"!==e)return;const i=(0,Nt.ZV)(t),{lineState:n,cursorManipulator:s,endManipulator:a}=this;let r=!1;null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=Jt(s,e,i),r=!0),"initial"===n&&(this._emulatedDrag?.update(i),r=!0),"drawing"===n&&(a.events.emit("drag",{action:"update",start:i,screenPoint:i}),r=!0),r&&t.stopPropagation()}_handleImmediateClick(t){if(!this.active||!(0,St.s7)(t))return;const e=(0,Nt.ZV)(t),{pointerType:i}=t,{cursorManipulator:n,startManipulator:s,endManipulator:a,lineState:r}=this;let o=!1;switch(null==this.cursorPoint&&(this._emulatedDrag?.cancel(),this._emulatedDrag=Jt(n,i,e)),r){case"initial":if(this._emulatedDrag?.update(e),null!=this.cursorPoint){this._emulatedDrag?.end(e),this._emulatedDrag=null,this.endPoint=null;const{cursorPoint:t}=this;this.startPoint=t,this.startPointSurfaceLocation=this.cursorPointSurfaceLocation,s.location=t,s.interactive=!1,a.interactive=!1,this.lineState="drawing",this._emulatedDrag=Jt(a,i,e),o=!0}break;case"drawing":this._emulatedDrag?.update(e),null!=this.endPoint&&(this._emulatedDrag?.end(e),this._emulatedDrag=null,s.interactive=!0,a.interactive=!0,this.lineState="measured",o=!0)}o&&t.stopPropagation()}_surfaceLocation(t,e){return 0===e?"on-the-surface":(t.z??0)>=this._getElevation(t)?"above-the-surface":"below-the-surface"}_getElevation(t){return this.view.basemapTerrain.ready?(0,Tt.R1)(this.view.elevationProvider,t)??0:0}get test(){}};function Jt(t,e,i){return t.events.emit("drag",{action:"start",pointerType:e,start:i,screenPoint:i}),{update:e=>t.events.emit("drag",{action:"update",start:e,screenPoint:e}),end:e=>t.events.emit("drag",{action:"end",start:e,screenPoint:e}),cancel:()=>t.events.emit("drag",{action:"cancel"})}}(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"_snappingManagerResult",void 0),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"_snappingManager",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Ft.prototype,"state",null),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"lineState",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Ft.prototype,"cursor",null),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"startPoint",null),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"endPoint",null),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"cursorPoint",null),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ft.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ft.prototype,"analysisViewData",void 0),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"measurementView",void 0),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"removeIncompleteOnCancel",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0})],Ft.prototype,"view",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Ft.prototype,"validMeasurement",null),(0,n.Cg)([(0,a.MZ)({value:null})],Ft.prototype,"startPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)({value:null})],Ft.prototype,"endPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)({value:null})],Ft.prototype,"cursorPointSurfaceLocation",void 0),(0,n.Cg)([(0,a.MZ)()],Ft.prototype,"updating",null),Ft=(0,n.Cg)([(0,o.$)("esri.views.3d.interactive.measurementTools.directLineMeasurement3D.DirectLineMeasurement3DTool")],Ft);var $t=i(10260),Xt=i(23739);let Yt=class extends u.P{constructor(t){super(t),this.type="direct-line-measurement-view-3d",this.analysis=null,this.tool=null,this.result=null,this.measurementMode=0,this.elevationAlignedStartPoint=null,this.elevationAlignedEndPoint=null,this.userOperation=null}initialize(){const{analysis:t,view:e}=this;this._analysisVisualization=new _t({view:e,analysis:t,analysisView:this}),this.addResolvingPromise((0,Xt.V)().then(i=>{this.destroyed||(this._analysisController=new _({view:e,analysis:t,viewData:this,geodesicLengthMeasurementUtils:i}))})),this.addHandles((0,$t.Hd)(this,Ft))}destroy(){(0,$t.aS)(this),this.userOperation=(0,s.DC)(this.userOperation),this._analysisController=(0,s.pR)(this._analysisController),this._analysisVisualization=(0,s.pR)(this._analysisVisualization)}get updating(){return!!this._analysisVisualization?.loadingMessages}get visible(){return super.visible}set visible(t){super.visible=t}get interactive(){return super.interactive}set interactive(t){super.interactive=t}get viewMode(){return this._analysisVisualization.viewMode}get actualVisualizedMeasurement(){return this._analysisVisualization.actualVisualizedMeasurement}get visualElementOrientation(){return this._analysisVisualization.visualElementOrientation}set visualElementOrientation(t){this._analysisVisualization.visualElementOrientation=t}get allowVisualElementsOrientationChange(){return this._analysisVisualization.allowVisualElementsOrientationChange}set allowVisualElementsOrientationChange(t){this._analysisVisualization.allowVisualElementsOrientationChange=t}get triangleCollapseRatioThreshold(){return this._analysisVisualization.triangleCollapseRatioThreshold}set triangleCollapseRatioThreshold(t){this._analysisVisualization.triangleCollapseRatioThreshold=t}get directLabelText(){return this._analysisVisualization.labels.direct?.text??""}get horizontalLabelText(){return this._analysisVisualization.labels.horizontal?.text??""}get verticalLabelText(){return this._analysisVisualization.labels.vertical?.text??""}get unit(){return this.analysis.unit??(0,l.c)(this.view)}get testData(){}place(t){return(0,$t.ZX)(this,{placementOptions:t})}};(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"_analysisVisualization",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"_analysisController",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"updating",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"type",void 0),(0,n.Cg)([(0,a.MZ)({constructOnly:!0,nonNullable:!0})],Yt.prototype,"analysis",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"tool",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"result",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"measurementMode",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"elevationAlignedStartPoint",void 0),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"elevationAlignedEndPoint",void 0),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"viewMode",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"actualVisualizedMeasurement",null),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"visualElementOrientation",null),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"allowVisualElementsOrientationChange",null),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"triangleCollapseRatioThreshold",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"directLabelText",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"horizontalLabelText",null),(0,n.Cg)([(0,a.MZ)({readOnly:!0})],Yt.prototype,"verticalLabelText",null),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"unit",null),(0,n.Cg)([(0,a.MZ)()],Yt.prototype,"userOperation",void 0),Yt=(0,n.Cg)([(0,o.$)("esri.views.3d.analysis.DirectLineMeasurementAnalysisView3D")],Yt);const Kt=Yt},90806:(t,e,i)=>{i.d(e,{M:()=>h,b:()=>u});var n=i(3799),s=i(58350),a=i(21390),r=i(86955),o=i(2687),l=i(75569);function u(t){const e=new o.N5,{vertex:i,fragment:u}=e;(0,n.NB)(i,t),i.uniforms.add(new a.m("width",t=>t.width)),e.attributes.add("position","vec3"),e.attributes.add("normal","vec3"),e.attributes.add("uv0","vec2"),e.attributes.add("length","float"),e.varyings.add("vtc","vec2"),e.varyings.add("vlength","float"),e.varyings.add("vradius","float"),i.main.add(r.H`vec3 bitangent = normal;
vtc = uv0;
vlength = length;
vradius = 0.5 * width;
vec4 pos = view * vec4(position + vradius * bitangent * uv0.y, 1.0);
gl_Position = proj * pos;`),u.uniforms.add(new a.m("outlineSize",t=>t.outlineSize),new s.E("outlineColor",t=>t.outlineColor),new a.m("stripeLength",t=>t.stripeLength),new s.E("stripeEvenColor",t=>t.stripeEvenColor),new s.E("stripeOddColor",t=>t.stripeOddColor));const h=1/Math.sqrt(2);return u.code.add(r.H`
    const float INV_SQRT2 = ${r.H.float(h)};

    vec4 arrowColor(vec2 tc, float len) {
      float d = INV_SQRT2 * (tc.x - abs(tc.y));
      d = min(d, INV_SQRT2 * (len - tc.x - abs(tc.y)));
      d = min(d, 1.0 - abs(tc.y));

      if (d < 0.0) {
        return vec4(0.0);
      }
      if (d < outlineSize) {
        return outlineColor;
      }
      return fract(0.5 / stripeLength * tc.x * vradius) >= 0.5 ? stripeOddColor : stripeEvenColor;
    }`),u.main.add(r.H`
    vec2 ntc = vec2(vtc.x / vradius, vtc.y);
    vec4 color = arrowColor(ntc, vlength / vradius);
    if (color.a < ${r.H.float(l.Q)}) {
      discard;
    }
    fragColor = color;`),e}const h=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=67352.f077ee81.chunk.js.map