{"version":3,"file":"static/js/62635.5cc1ed33.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/analysis/featureReferenceUtils.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisTarget.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysis.js","../node_modules/@arcgis/core/layers/LineOfSightLayer.js","../node_modules/@arcgis/core/analysis/LineOfSightAnalysisObserver.js","../node_modules/@arcgis/core/analysis/Analysis.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{a as e,b as t,c as r}from\"../chunks/vec32.js\";import{create as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as l,fromPoints as o}from\"../geometry/support/ray.js\";import{toGraphic as u,hasLod as i,getIntersectedFeatureBSRadius as a}from\"../views/3d/webgl-engine/lib/intersectorUtilsConversions.js\";function c(e,t){return s(e)===s(t)}function s(e){if(null==e)return null;const t=null!=e.layer?e.layer.id:\"\";let r=null;return r=null!=e.objectId?e.objectId:null!=e.layer&&\"objectIdField\"in e.layer&&null!=e.layer.objectIdField&&null!=e.attributes?e.attributes[e.layer.objectIdField]:e.uid,null==r?null:`o-${t}-${r}`}const d={json:{write:{writer:b,target:{\"feature.layerId\":{type:[Number,String],isRequired:!0},\"feature.objectId\":{type:[Number,String],isRequired:!0}}},origins:{\"web-scene\":{read:f}}},clonable:\"reference\"};function b(e,t){null!=e?.layer?.objectIdField&&null!=e.attributes&&(t.feature={layerId:e.layer.id,objectId:e.attributes[e.layer.objectIdField]})}function f(e){if(null!=e.layerId&&null!=e.objectId)return{uid:null,layer:{id:e.layerId,objectIdField:\"ObjectId\"},attributes:{ObjectId:e.objectId}}}function I(l,i,a,c){const{sceneIntersectionHelper:d}=l,{observer:b,observerFeatureId:f,targetFeatureId:I,target:m}=a;if(null==f&&null==I)return;c||(c=e=>e),e(g,b,m);const p=t(g),S=1;r(g,b,g,S/p);const v=o(g,m,y);i.options.store=2,d.intersectToolIntersectorRay(v,i);let F=null,N=null,R=null,w=null;for(const e of i.results.all){const t=u(e,l);if(null==t||null==e.distanceInRenderSpace)continue;const r=s(t);null!=r&&(null!=f&&r===f&&(F??=c(j(e,l,p)),e.distanceInRenderSpace-S<F&&(R=e)),null!=I&&r===I&&(N??=c(j(e,l,p)),null==w&&e.distanceInRenderSpace-S<p&&p-e.distanceInRenderSpace+S<N&&(w=e)))}const{observerAdjusted:T,targetAdjusted:h}=a;R?.getIntersectionPoint(T)?a.observerSurfaceNormal=R.getTransformedNormal(n()):a.observerSurfaceNormal=null,w?.getIntersectionPoint(h)?a.targetSurfaceNormal=w.getTransformedNormal(n()):a.targetSurfaceNormal=null}function j(e,t,r){if(i(e)){const n=a(e,t);if(null!=n)return Math.min(n*m,r)}return 1e-5*r}const m=.05,y=l(),g=n();export{c as featureReferenceEquals,d as featureReferenceProperty,s as getFeatureId,I as updatePointsFromFeatureReference};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import{Clonable as t}from\"../core/Clonable.js\";import{JSONSupportMixin as s}from\"../core/JSONSupport.js\";import{equalsMaybe as i}from\"../core/maybe.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as a}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import m from\"../geometry/Point.js\";import c from\"../symbols/support/ElevationInfo.js\";let l=class extends(s(t)){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return i(this.position,o.position)&&i(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([p({type:m,json:{write:!0,origins:{\"web-scene\":{write:{isRequired:!0}}}}}),n()],l.prototype,\"position\",void 0),o([p({type:c}),n()],l.prototype,\"elevationInfo\",void 0),o([p(e)],l.prototype,\"feature\",void 0),l=o([a(\"esri.analysis.LineOfSightAnalysisTarget\")],l);export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"./Analysis.js\";import r from\"./LineOfSightAnalysisObserver.js\";import o from\"./LineOfSightAnalysisTarget.js\";import{equals as s}from\"../core/arrayUtils.js\";import i from\"../core/Collection.js\";import{referenceSetter as n,castForReferenceSetter as l}from\"../core/collectionUtils.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{watch as a,syncAndInitial as u}from\"../core/reactiveUtils.js\";import{property as m}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import{subclass as c}from\"../core/accessorSupport/decorators/subclass.js\";import{projectOrLoad as g}from\"../geometry/projectionUtils.js\";import{fromValues as f,expandWithVec3 as y,toExtent as h}from\"../geometry/support/aaBoundingBox.js\";import{getGeometryEffectiveElevationMode as v}from\"../support/elevationInfoUtils.js\";const d=i.ofType(o);let j=class extends e{constructor(t){super(t),this.type=\"line-of-sight\",this.observer=null,this.extent=null}initialize(){this.addHandles(a(()=>this._computeExtent(),t=>{null==t?.pending&&this._set(\"extent\",null!=t?t.extent:null)},u))}get targets(){return this._get(\"targets\")||new d}set targets(t){this._set(\"targets\",n(t,this.targets,d))}get spatialReference(){return null!=this.observer?.position?this.observer.position.spatialReference:null}get valid(){return null!=this.observer?.position}async waitComputeExtent(){const t=this._computeExtent();return null!=t?t.pending:Promise.resolve()}_computeExtent(){const t=this.spatialReference;if(null==this.observer?.position||null==t)return null;const e=t=>\"absolute-height\"===v(t.position,t.elevationInfo),r=this.observer.position,o=f(r.x,r.y,r.z,r.x,r.y,r.z);for(const i of this.targets)if(null!=i.position){const e=g(i.position,t);if(null!=e.pending)return{pending:e.pending,extent:null};if(null!=e.geometry){const{x:t,y:r,z:s}=e.geometry;y(o,[t,r,s])}}const s=h(o,t);return e(this.observer)&&this.targets.every(e)||(s.zmin=void 0,s.zmax=void 0),{pending:null,extent:s}}clear(){this.observer=null,this.targets.removeAll()}equals(t){return this===t||super.equals(t)&&p(this.observer,t.observer)&&s(this.targets.toArray(),t.targets.toArray(),(t,e)=>t.equals(e))}};t([m({type:[\"line-of-sight\"]})],j.prototype,\"type\",void 0),t([m({type:r,json:{read:!0,write:!0}})],j.prototype,\"observer\",void 0),t([m({cast:l,type:d,nonNullable:!0,json:{read:!0,write:!0}})],j.prototype,\"targets\",null),t([m({value:null,readOnly:!0})],j.prototype,\"extent\",void 0),t([m()],j.prototype,\"spatialReference\",null),t([m({readOnly:!0})],j.prototype,\"valid\",null),j=t([c(\"esri.analysis.LineOfSightAnalysis\")],j);export{j as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../analysis/LineOfSightAnalysis.js\";import s from\"../analysis/LineOfSightAnalysisObserver.js\";import r from\"../analysis/LineOfSightAnalysisTarget.js\";import i from\"../core/Collection.js\";import{referenceSetter as o}from\"../core/collectionUtils.js\";import{MultiOriginJSONMixin as a}from\"../core/MultiOriginJSONSupport.js\";import{watch as n,syncAndInitial as l}from\"../core/reactiveUtils.js\";import{property as p}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as y}from\"../core/accessorSupport/decorators/subclass.js\";import c from\"./Layer.js\";import{OperationalLayer as d}from\"./mixins/OperationalLayer.js\";const h=i.ofType(r);let m=class extends(d(a(c))){constructor(e){super(e),this.type=\"line-of-sight\",this.operationalLayerType=\"LineOfSightLayer\",this.analysis=new t,this.opacity=1}initialize(){this.addHandles(n(()=>this.analysis,(e,t)=>{null!=t&&t.parent===this&&(t.parent=null),null!=e&&(e.parent=this)},l))}async load(){return null!=this.analysis&&this.addResolvingPromise(this.analysis.waitComputeExtent()),this}get observer(){return this.analysis?.observer}set observer(e){const{analysis:t}=this;t&&(t.observer=e)}get targets(){return null!=this.analysis?this.analysis.targets:new i}set targets(e){o(e,this.analysis?.targets)}get fullExtent(){return null!=this.analysis?this.analysis.extent:null}get spatialReference(){return null!=this.analysis?this.analysis.spatialReference:null}releaseAnalysis(e){this.analysis===e&&(this.analysis=new t)}};e([p({json:{read:!1},readOnly:!0})],m.prototype,\"type\",void 0),e([p({type:[\"LineOfSightLayer\"]})],m.prototype,\"operationalLayerType\",void 0),e([p({type:s,json:{read:!0,write:{isRequired:!0,ignoreOrigin:!0}}})],m.prototype,\"observer\",null),e([p({type:h,json:{read:!0,write:{ignoreOrigin:!0,isRequired:!0}}})],m.prototype,\"targets\",null),e([p({type:t,nonNullable:!0,json:{read:!1,write:!1}})],m.prototype,\"analysis\",void 0),e([p({readOnly:!0})],m.prototype,\"fullExtent\",null),e([p({readOnly:!0})],m.prototype,\"spatialReference\",null),e([p({readOnly:!0,json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},\"portal-item\":{read:!1,write:!1},\"web-document\":{read:!1,write:!1}}}})],m.prototype,\"opacity\",void 0),e([p({type:[\"show\",\"hide\"]})],m.prototype,\"listMode\",void 0),m=e([y(\"esri.layers.LineOfSightLayer\")],m);const u=m;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{featureReferenceEquals as r,featureReferenceProperty as e}from\"./featureReferenceUtils.js\";import t from\"../core/Accessor.js\";import{ClonableMixin as s}from\"../core/Clonable.js\";import{JSONSupportMixin as i}from\"../core/JSONSupport.js\";import{equalsMaybe as p}from\"../core/maybe.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as m}from\"../core/accessorSupport/decorators/subclass.js\";import{persistable as n}from\"../core/accessorSupport/decorators/persistable.js\";import c from\"../geometry/Point.js\";import f from\"../symbols/support/ElevationInfo.js\";let l=class extends(i(s(t))){constructor(o){super(o),this.position=null,this.elevationInfo=null,this.feature=null}equals(o){return p(this.position,o.position)&&p(this.elevationInfo,o.elevationInfo)&&r(this.feature,o.feature)}};o([a({type:c,json:{write:{isRequired:!0}}})],l.prototype,\"position\",void 0),o([a({type:f}),n()],l.prototype,\"elevationInfo\",void 0),o([a(e)],l.prototype,\"feature\",void 0),l=o([m(\"esri.analysis.LineOfSightAnalysisObserver\")],l);const u=l;export{u as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import s from\"./support/AnalysisOriginWebScene.js\";import r from\"../core/Accessor.js\";import{ClonableMixin as t}from\"../core/Clonable.js\";import{IdentifiableMixin as o}from\"../core/Identifiable.js\";import{JSONSupportMixin as i}from\"../core/JSONSupport.js\";import{property as a}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/Logger.js\";import\"../core/RandomLCG.js\";import{subclass as n}from\"../core/accessorSupport/decorators/subclass.js\";let p=0,c=class extends(i(t(o(r)))){constructor(e){super(e),this.id=`${Date.now().toString(16)}-analysis-${p++}`,this.origin=null}get parent(){return this._get(\"parent\")}set parent(e){const s=this.parent;if(null!=s)switch(s.type){case\"line-of-sight\":case\"dimension\":case\"viewshed\":s.releaseAnalysis(this);break;case\"2d\":case\"3d\":s.analyses.includes(this)&&s.analyses.remove(this)}this._set(\"parent\",e)}equals(e){return!0}};e([a({type:String,constructOnly:!0,clonable:!1})],c.prototype,\"id\",void 0),e([a({clonable:!1,value:null})],c.prototype,\"parent\",null),e([a({types:{key:\"type\",base:null,typeMap:{\"web-scene\":s}}})],c.prototype,\"origin\",void 0),c=e([n(\"esri.analysis.Analysis\")],c);export{c as default};\n"],"names":["c","e","t","s","layer","id","r","objectId","objectIdField","attributes","uid","d","json","write","writer","feature","layerId","target","type","Number","String","isRequired","origins","read","ObjectId","clonable","I","l","i","a","sceneIntersectionHelper","observer","b","observerFeatureId","f","targetFeatureId","m","g","p","v","o","y","options","store","intersectToolIntersectorRay","F","N","R","w","results","all","u","distanceInRenderSpace","j","observerAdjusted","T","targetAdjusted","h","getIntersectionPoint","observerSurfaceNormal","getTransformedNormal","n","targetSurfaceNormal","Math","min","constructor","super","this","position","elevationInfo","equals","prototype","ofType","extent","initialize","addHandles","_computeExtent","pending","_set","targets","_get","spatialReference","valid","waitComputeExtent","Promise","resolve","x","z","geometry","every","zmin","zmax","clear","removeAll","toArray","cast","nonNullable","value","readOnly","operationalLayerType","analysis","opacity","parent","load","addResolvingPromise","fullExtent","releaseAnalysis","ignoreOrigin","service","Date","now","toString","origin","analyses","includes","remove","constructOnly","types","key","base","typeMap"],"sourceRoot":""}