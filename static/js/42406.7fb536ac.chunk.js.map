{"version":3,"file":"static/js/42406.7fb536ac.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/ImageryLayerView.js","../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryView2D.js","../node_modules/@arcgis/core/views/2d/engine/imagery/RasterVFContainer.js","../node_modules/@arcgis/core/views/2d/layers/imagery/ImageryVFStrategy.js","../node_modules/@arcgis/core/views/2d/layers/imagery/VectorFieldView2D.js","../node_modules/@arcgis/core/views/2d/layers/ImageryLayerView2D.js","../node_modules/@arcgis/core/views/2d/layers/graphics/HighlightGraphicContainer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../core/Error.js\";import{throwIfAborted as r}from\"../../core/promiseUtils.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import i from\"../../geometry/Point.js\";import a from\"../../layers/support/FieldsIndex.js\";import{rasterFieldPrefix as p}from\"../../layers/support/rasterFieldUtils.js\";import{combineTimeExtent as n}from\"../../layers/support/timeSupport.js\";import{load as l,getSourceScale as m}from\"../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import u from\"../../rest/support/Query.js\";import{getFetchPopupTemplate as c}from\"./support/popupUtils.js\";const y=y=>{const d=y;let f=class extends d{constructor(...e){super(...e),this.view=null}get timeExtent(){return n(this.layer,this.view?.timeExtent,this._get(\"timeExtent\"))}async fetchPopupFeaturesAtLocation(e,o){const{layer:s}=this;if(!e)throw new t(\"imagerylayerview:fetchPopupFeatures\",\"Nothing to fetch without area\",{layer:s});const{popupEnabled:n}=s,l=c(s,o);if(!n||null==l)return[];const m=await l.getRequiredFields(null,{index:new a(s.rasterFields),partitions:new Map([[\"$pixel\",s.rasterFields.filter(e=>e.name.startsWith(p)).map(e=>e.name)],[\"$imageCollectionItem\",s.fields.map(e=>e.name)]])});r(o);const y=new u;y.timeExtent=this.timeExtent,y.geometry=e,y.outFields=m,y.outSpatialReference=e.spatialReference;const{resolution:d,spatialReference:f}=this.view,h=\"2d\"===this.view.type?new i(d,d,f):new i(.5*d,.5*d,f),{returnTopmostRaster:w,showNoDataRecords:R}=l.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},j={returnDomainValues:!0,returnTopmostRaster:w,pixelSize:h,showNoDataRecords:R,signal:o?.signal};return s.queryVisibleRasters(y,j)}async getSourceScale(){return await l(),await this.layer.load(),m(this.layer.serviceRasterInfo,this.view.spatialReference)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return e([o()],f.prototype,\"layer\",void 0),e([o()],f.prototype,\"suspended\",void 0),e([o({readOnly:!0})],f.prototype,\"timeExtent\",null),e([o()],f.prototype,\"view\",void 0),f=e([s(\"esri.views.layers.ImageryLayerView\")],f),f};export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../../Graphic.js\";import i from\"../../../../core/Accessor.js\";import r from\"../../../../core/Logger.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{property as a}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as o}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{mosaicPixelData as l}from\"../../../../layers/support/rasterFunctions/pixelUtils.js\";import{BitmapContainer as p}from\"../../engine/BitmapContainer.js\";import{Container as n}from\"../../engine/Container.js\";import h from\"../../engine/ImageryBitmapSource.js\";import c from\"../support/ExportStrategy.js\";let g=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new n,this.updateRequested=!1,this.pixelHighlights=[],this.type=\"imagery\",this._bitmapView=new p}destroy(){this.attached&&(this.detach(),this.attached=!1),this.updateRequested=!1}get updating(){return!this.attached||this.isUpdating()}update(t){this.strategy.update(t).catch(t=>{s(t)||r.getLogger(this).error(t)})}hitTest(t){return new e({attributes:{},geometry:t.clone(),layer:this.layer})}attach(){this.container.addChild(this._bitmapView);const t=this.layer.version>=10,e=this.layer.version>=10.1?this.layer.imageMaxHeight:2048,i=this.layer.version>=10.1?this.layer.imageMaxWidth:2048;this.strategy=new c({container:this._bitmapView,imageNormalizationSupported:t,imageMaxHeight:e,imageMaxWidth:i,fetchSource:this._fetchImage.bind(this),requestUpdate:()=>this.requestUpdate()})}detach(){this.strategy.destroy(),this._bitmapView.removeAllChildren(),this.container.removeAllChildren(),this.updateRequested=!1}redraw(){this.strategy.updateExports(async t=>{const{source:e}=t;if(!e||e instanceof ImageBitmap)return;const i=e.originalPixelBlock??e.pixelBlock,{pixelHighlights:r}=this,s=r.length>0,a=await this.layer.applyRenderer({extent:e.extent,pixelBlock:i,isRawData:s}),o=a.pixelBlock;s&&i&&o&&await this.layer.highlightPixels({pixelBlock:i,renderedPixelBlock:o,highlightOptions:r}),e.filter=t=>this.layer.pixelFilter?this.layer.applyFilter(t):{...a,extent:e.extent}}).catch(t=>{s(t)||r.getLogger(this).error(t)})}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.view.requestUpdate())}isUpdating(){return this.strategy.updating||this.updateRequested}getPixelData(){if(this.updating)return null;const t=this.strategy.bitmaps;if(1===t.length&&t[0].source)return{extent:t[0].source.extent,pixelBlock:t[0].source.originalPixelBlock};if(t.length>1){const e=this.view.extent,i=t.map(t=>t.source).filter(t=>t.extent&&t.extent.intersects(e)).map(t=>({extent:t.extent,pixelBlock:t.originalPixelBlock})),r=l(i,e);return null!=r?{extent:r.extent,pixelBlock:r.pixelBlock}:null}return null}async _fetchImage(t,e,i,r){(r=r||{}).timeExtent=this.timeExtent;const s=this.pixelHighlights.length>0;r.requestAsImageElement=!s,r.returnImageBitmap=!s,r.requestRawData=s;const a=await this.layer.internalFetchImage(t,e,i,r);if(a.imageBitmap)return a.imageBitmap;const o=await this.layer.applyRenderer({...a.pixelData,isRawData:s},{signal:r.signal}),l=a.pixelData.pixelBlock,p=o.pixelBlock;s&&l&&p&&await this.layer.highlightPixels({pixelBlock:l,renderedPixelBlock:p,highlightOptions:this.pixelHighlights});const n=new h(p,o.extent?.clone(),l);return n.filter=t=>this.layer.applyFilter(t),n}};t([a()],g.prototype,\"attached\",void 0),t([a()],g.prototype,\"container\",void 0),t([a()],g.prototype,\"layer\",void 0),t([a()],g.prototype,\"strategy\",void 0),t([a()],g.prototype,\"timeExtent\",void 0),t([a()],g.prototype,\"view\",void 0),t([a()],g.prototype,\"updateRequested\",void 0),t([a()],g.prototype,\"updating\",null),t([a()],g.prototype,\"pixelHighlights\",void 0),t([a()],g.prototype,\"type\",void 0),g=t([o(\"esri.views.2d.layers.imagery.ImageryView2D\")],g);export{g as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport e from\"./BrushVectorField.js\";import r from\"../webgl/WGLContainer.js\";class s extends r{constructor(){super(...arguments),this.symbolTypes=[\"triangle\"]}prepareRenderPasses(r){const s=r.registerRenderPass({name:\"imagery (vf)\",brushes:[e],target:()=>this.children,drawPhase:1});return[...super.prepareRenderPasses(r),s]}doRender(e){this.visible&&1===e.drawPhase&&this.symbolTypes.forEach(r=>{e.renderPass=r,super.doRender(e)})}}export{s as RasterVFContainer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../../core/Accessor.js\";import i from\"../../../../core/Logger.js\";import{debounce as r,isAbortError as o}from\"../../../../core/promiseUtils.js\";import{property as s}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as a}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import{RasterVFDisplayObject as l}from\"../../engine/imagery/RasterVFDisplayObject.js\";let c=class extends t{constructor(e){super(e),this._loading=null,this.update=r((e,t)=>this._update(e,t).catch(e=>{o(e)||i.getLogger(this).error(e)}))}get updating(){return!!this._loading}redraw(e){if(!this.container.children.length)return;const t=this.container.children[0];t.symbolizerParameters=e,t.invalidateVAO(),this.container.symbolTypes=\"wind_speed\"===e.style?[\"scalar\",\"triangle\"]:\"simple_scalar\"===e.style?[\"scalar\"]:[\"triangle\"],this.container.requestRender()}async _update(e,t,i){if(!e.stationary)return;const{extent:r,spatialReference:o}=e.state,s=new n({xmin:r.xmin,ymin:r.ymin,xmax:r.xmax,ymax:r.ymax,spatialReference:o}),[a,l]=e.state.size;this._loading=this.fetchPixels(s,a,l,i);const c=await this._loading;this._addToDisplay(c,t,e.state),this._loading=null}_addToDisplay(e,t,i){if(null==e.pixelBlock)return this.container.children.forEach(e=>e.destroy()),void this.container.removeAllChildren();const{extent:r,pixelBlock:o}=e,s=new l(o);s.offset=[0,0],s.symbolizerParameters=t,s.rawPixelData=e,s.invalidateVAO(),s.x=r.xmin,s.y=r.ymax,s.pixelRatio=i.pixelRatio,s.rotation=i.rotation,s.resolution=i.resolution,s.width=o.width*t.symbolTileSize,s.height=o.height*t.symbolTileSize,this.container.children.forEach(e=>e.destroy()),this.container.removeAllChildren(),this.container.symbolTypes=\"wind_speed\"===t.style?[\"scalar\",\"triangle\"]:\"simple_scalar\"===t.style?[\"scalar\"]:[\"triangle\"],this.container.addChild(s)}};e([s()],c.prototype,\"fetchPixels\",void 0),e([s()],c.prototype,\"container\",void 0),e([s()],c.prototype,\"_loading\",void 0),e([s()],c.prototype,\"updating\",null),c=e([a(\"esri.views.2d.layers.imagery.ImageryVFStrategy\")],c);export{c as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import e from\"../../../../Graphic.js\";import r from\"../../../../request.js\";import i from\"../../../../core/Accessor.js\";import o from\"../../../../core/Logger.js\";import{isAbortError as s}from\"../../../../core/promiseUtils.js\";import{watch as a,syncAndInitial as n}from\"../../../../core/reactiveUtils.js\";import{property as l}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import m from\"../../../../geometry/Extent.js\";import{srToRESTValue as p}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{projectExtent as h}from\"../../../../layers/support/rasterFunctions/rasterProjectionHelper.js\";import{snapImageToSymbolTile as y}from\"../../../../layers/support/rasterFunctions/vectorFieldUtils.js\";import{RasterVFContainer as u}from\"../../engine/imagery/RasterVFContainer.js\";import d from\"./ImageryVFStrategy.js\";let x=class extends i{constructor(){super(...arguments),this.attached=!1,this.container=new u,this.type=\"imageryVF\",this._dataParameters={exportParametersVersion:0,bbox:\"\",symbolTileSize:0,time:\"\"},this._fetchpixels=async(t,e,r,i)=>{const o=await this._projectFullExtentPromise,{layer:s}=this,{symbolTileSize:a}=s.renderer,{extent:n,width:l,height:c}=y(t,e,r,a,o);if(null!=o&&!o.intersects(t))return{extent:n,pixelBlock:null};const m={bbox:`${n.xmin}, ${n.ymin}, ${n.xmax}, ${n.ymax}`,exportParametersVersion:s.exportImageServiceParameters.version,symbolTileSize:a,time:JSON.stringify(this.timeExtent||\"\")};if(this._canReuseVectorFieldData(m)){const t=this.getPixelData();if(null!=t){if(`${t.extent.xmin}, ${t.extent.ymin}, ${t.extent.xmax}, ${t.extent.ymax}`===m.bbox)return t}}const{pixelBlock:p}=await s.fetchPixels(n,l,c,{timeExtent:this.timeExtent,interpolation:s.interpolation,signal:i});if(this._dataParameters=m,null==p)return{extent:n,pixelBlock:null};const{dataType:h}=s.rasterInfo;return{extent:n,pixelBlock:\"vector-uv\"===h&&p?await s.convertVectorFieldData(p,\"vector-uv\",{signal:i}):p}}}get updating(){return!this.attached||this._strategy.updating}attach(){this._projectFullExtentPromise=this._getProjectedFullExtent(this.view.spatialReference),this._strategy=new d({container:this.container,fetchPixels:this._fetchpixels}),this.addHandles(a(()=>this.layer.renderer,t=>this._updateSymbolizerParams(t),n),\"attach\")}detach(){this._strategy.destroy(),this.container.children.forEach(t=>t.destroy()),this.container.removeAllChildren(),this.removeHandles(\"attach\"),this._strategy=this.container=this._projectFullExtentPromise=null}getPixelData(){const t=this.container.children[0]?.rawPixelData;if(this.updating||!t)return null;const{extent:e,pixelBlock:r}=t;return{extent:e,pixelBlock:r}}hitTest(t){return new e({attributes:{},geometry:t.clone(),layer:this.layer})}update(t){this._strategy.update(t,this._symbolizerParams).catch(t=>{s(t)||o.getLogger(this).error(t)})}redraw(){const{renderer:t}=this.layer;t&&(this._updateSymbolizerParams(t),this._strategy.redraw(this._symbolizerParams))}_canReuseVectorFieldData(t){const e=this._dataParameters.exportParametersVersion===t.exportParametersVersion,r=this._dataParameters.time===t.time,i=this._dataParameters.symbolTileSize===t.symbolTileSize,o=this._dataParameters.bbox===t.bbox;return e&&r&&i&&o}async _getProjectedFullExtent(t){try{return h(this.layer.fullExtent,t)}catch(e){try{const e=(await r(this.layer.url,{query:{option:\"footprints\",outSR:p(t),f:\"json\"}})).data.featureCollection.layers[0].layerDefinition.extent;return e?m.fromJSON(e):null}catch{return null}}}_updateSymbolizerParams(t){\"vector-field\"===t?.type&&(this._symbolizerParams=this.layer.symbolizer.generateWebGLParameters({pixelBlock:null}))}};t([l()],x.prototype,\"attached\",void 0),t([l()],x.prototype,\"container\",void 0),t([l()],x.prototype,\"layer\",void 0),t([l()],x.prototype,\"timeExtent\",void 0),t([l()],x.prototype,\"type\",void 0),t([l()],x.prototype,\"view\",void 0),t([l()],x.prototype,\"updating\",null),x=t([c(\"esri.views.2d.layers.imagery.VectorFieldView2D\")],x);export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as i}from\"tslib\";import t from\"../../../Graphic.js\";import{isSome as e}from\"../../../core/arrayUtils.js\";import s from\"../../../core/Collection.js\";import{makeHandle as r}from\"../../../core/handleUtils.js\";import has from\"../../../core/has.js\";import{watch as h,sync as a}from\"../../../core/reactiveUtils.js\";import{property as o}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import{subclass as l}from\"../../../core/accessorSupport/decorators/subclass.js\";import{GraphicsCollection as n}from\"../../../support/GraphicsCollection.js\";import g from\"../engine/flow/FlowView2D.js\";import{LayerView2DMixin as p}from\"./LayerView2D.js\";import c from\"./graphics/GraphicsView2D.js\";import d from\"./graphics/HighlightGraphicContainer.js\";import u from\"./imagery/ImageryView2D.js\";import w from\"./imagery/VectorFieldView2D.js\";import m from\"../../layers/ImageryLayerView.js\";import v from\"../../layers/LayerView.js\";import{RefreshableLayerView as y}from\"../../layers/RefreshableLayerView.js\";import{defaultColor as f}from\"../../support/HighlightDefaults.js\";import{getHighlightName as b}from\"../../support/highlightOptionsUtils.js\";let _=class extends(m(y(p(v)))){constructor(){super(...arguments),this._exportImageVersion=-1,this._highlightGraphics=new n,this._highlightView=void 0,this._pixelHighlights=[],this.layer=null,this.subview=null}get pixelData(){const{subview:i}=this;return this.updating||!i?null:\"getPixelData\"in i?i.getPixelData():null}update(i){this.subview?.update(i)}attach(){this.layer.increaseRasterJobHandlerUsage(),this._setSubView(),this.view&&(this._highlightView=new c({view:this.view,graphics:this._highlightGraphics,requestUpdateCallback:()=>this.requestUpdate(),container:new d(this.view.featuresTilingScheme)}),this.container.addChild(this._highlightView.container)),this.addAttachHandles([h(()=>this.layer.exportImageServiceParameters.version,i=>{i&&this._exportImageVersion!==i&&(this._exportImageVersion=i,this.requestUpdate())},a),h(()=>this.timeExtent,i=>{const{subview:t}=this;t&&(t.timeExtent=i,\"redraw\"in t?this.requestUpdate():t.redrawOrRefetch())},a),this.layer.on(\"redraw\",()=>{const{subview:i}=this;i&&(\"redraw\"in i?i.redraw():i.redrawOrRefetch())}),h(()=>this.layer.renderer,()=>this._setSubView()),h(()=>this.view.highlights.items.map(({name:i,color:t})=>({name:i,color:t})),()=>this._updateHighlightOptions(this.subview))])}detach(){this.layer.decreaseRasterJobHandlerUsage(),this.container.removeAllChildren(),this._detachSubview(this.subview),this.subview?.destroy(),this.subview=null,this._highlightView?.destroy(),this._exportImageVersion=-1}viewChange(){}moveEnd(){this.requestUpdate()}highlight(i,h){if(i&&\"pixelRanges\"in i&&i.pixelRanges.length)return this._highlightPixels(i,h);if(!((Array.isArray(i)?i[0]:s.isCollection(i)?i.at(0):i)instanceof t))return r();let a=[];Array.isArray(i)||s.isCollection(i)?a=i.map(i=>i.clone()):i instanceof t&&(a=[i.clone()]);const o=a?.filter(e);if(!o?.length)return r();const l=b(h);return this._addHighlightGraphics(a,l),r(()=>!this.destroyed&&this._removeHighlightGraphics(a,l))}_highlightPixels(i,t){const e={target:i,options:t};return this._pixelHighlights.push(e),this._updateHighlightOptions(this.subview),r(()=>{const i=this._pixelHighlights.indexOf(e);i>-1&&(this._pixelHighlights.splice(i,1),this._updateHighlightOptions(this.subview))})}_addHighlightGraphics(i,t){this._highlightGraphics.addMany(i),this._addHighlights(i.map(i=>i.uid),t)}_removeHighlightGraphics(i,t){this._highlightGraphics.removeMany(i),this._removeHighlights(i.map(i=>i.uid),t)}async doRefresh(){this.requestUpdate()}isUpdating(){const i=!this.subview||this.subview.updating||!!this._highlightView?.updating;return has(\"esri-2d-log-updating\")&&console.log(`Updating ImageryLayerView2D (${this.layer.id}): ${i}\\n-> subview ${!this.subview||this.subview.updating}\\n-> higlightView ${this._highlightView?.updating}\\n`),i}_processHighlight(){const i=this._getHighlights();this._highlightView?.setHighlight(i)}_setSubView(){if(!this.view)return;const i=this.layer.renderer?.type;let t=\"imagery\";if(\"vector-field\"===i?t=\"imageryVF\":\"flow\"===i&&(t=\"flow\"),this.subview){const{type:i}=this.subview;if(i===t)return this._attachSubview(this.subview),void(\"flow\"===i?this.subview.redrawOrRefetch():\"imagery\"===i&&\"lerc\"===this.layer.format?this.subview.redraw():this.requestUpdate());this._detachSubview(this.subview),this.subview?.destroy()}\"imagery\"===t?(this.subview=new u({layer:this.layer,view:this.view,timeExtent:this.timeExtent}),this._updateHighlightOptions(this.subview)):this.subview=\"imageryVF\"===t?new w({layer:this.layer,view:this.view,timeExtent:this.timeExtent}):new g({layer:this.layer,layerView:this}),this._attachSubview(this.subview),this.requestUpdate()}_attachSubview(i){i&&!i.attached&&(i.attach(),i.attached=!0,this.container.addChildAt(i.container,0))}_detachSubview(i){i?.attached&&(this.container.removeChild(i.container),i.detach(),i.attached=!1)}_updateHighlightOptions(i){const t=this.view.highlights;this._pixelHighlights.sort((i,e)=>t.findIndex(({name:i})=>i===b(e.options))-t.findIndex(({name:t})=>t===b(i.options)));const e=this._pixelHighlights.map(({target:i,options:e})=>{const s=b(e),r=t.find(i=>i.name===s)?.color??f,{pixelRanges:h,bandId:a}=i;return{ranges:h,bandId:a??0,color:r.toArray()}});\"imagery\"===i?.type&&(i.pixelHighlights=e,i.attached&&(\"lerc\"===this.layer.format?i.redraw():this.requestUpdate()))}};i([o()],_.prototype,\"pixelData\",null),i([o()],_.prototype,\"subview\",void 0),_=i([l(\"esri.views.2d.layers.ImageryLayerView2D\")],_);const x=_;export{x as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as r}from\"tslib\";import\"../../../../core/Logger.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import\"../../../../core/Error.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{AGraphicContainer as s}from\"./AGraphicContainer.js\";import{renderHighlight as t}from\"../support/util.js\";let o=class extends s{get hasHighlight(){return this.children.some(r=>r.hasData)}renderChildren(r){this.attributeView.update(),16===r.drawPhase&&this.children.some(r=>r.hasData)&&(super.renderChildren(r),r.context.setColorMask(!0,!0,!0,!0),t(r,!1,r=>{this._renderChildren(r,1)}))}};o=r([e(\"esri.views.2d.layers.graphics.HighlightGraphicContainer\")],o);export{o as default};\n"],"names":["y","d","f","constructor","super","arguments","this","view","timeExtent","n","layer","_get","fetchPopupFeaturesAtLocation","e","o","s","t","popupEnabled","l","c","m","getRequiredFields","index","a","rasterFields","partitions","Map","filter","name","startsWith","p","map","fields","r","u","geometry","outFields","outSpatialReference","spatialReference","resolution","h","type","i","returnTopmostRaster","w","showNoDataRecords","R","layerOptions","j","returnDomainValues","pixelSize","signal","queryVisibleRasters","getSourceScale","load","serviceRasterInfo","canResume","isEmpty","prototype","readOnly","g","attached","container","updateRequested","pixelHighlights","_bitmapView","destroy","detach","updating","isUpdating","update","strategy","catch","getLogger","error","hitTest","attributes","clone","attach","addChild","version","imageMaxHeight","imageMaxWidth","imageNormalizationSupported","fetchSource","_fetchImage","bind","requestUpdate","removeAllChildren","redraw","updateExports","async","source","ImageBitmap","originalPixelBlock","pixelBlock","length","applyRenderer","extent","isRawData","highlightPixels","renderedPixelBlock","highlightOptions","pixelFilter","applyFilter","getPixelData","bitmaps","intersects","requestAsImageElement","returnImageBitmap","requestRawData","internalFetchImage","imageBitmap","pixelData","symbolTypes","prepareRenderPasses","registerRenderPass","brushes","target","children","drawPhase","doRender","visible","forEach","renderPass","_loading","_update","symbolizerParameters","invalidateVAO","style","requestRender","stationary","state","xmin","ymin","xmax","ymax","size","fetchPixels","_addToDisplay","offset","rawPixelData","x","pixelRatio","rotation","width","symbolTileSize","height","_dataParameters","exportParametersVersion","bbox","time","_fetchpixels","_projectFullExtentPromise","renderer","exportImageServiceParameters","JSON","stringify","_canReuseVectorFieldData","interpolation","dataType","rasterInfo","convertVectorFieldData","_strategy","_getProjectedFullExtent","addHandles","_updateSymbolizerParams","removeHandles","_symbolizerParams","fullExtent","url","query","option","outSR","data","featureCollection","layers","layerDefinition","fromJSON","symbolizer","generateWebGLParameters","_","v","_exportImageVersion","_highlightGraphics","_highlightView","_pixelHighlights","subview","increaseRasterJobHandlerUsage","_setSubView","graphics","requestUpdateCallback","featuresTilingScheme","addAttachHandles","redrawOrRefetch","on","highlights","items","_ref","color","_updateHighlightOptions","decreaseRasterJobHandlerUsage","_detachSubview","viewChange","moveEnd","highlight","pixelRanges","_highlightPixels","Array","isArray","isCollection","at","b","_addHighlightGraphics","destroyed","_removeHighlightGraphics","options","push","indexOf","splice","addMany","_addHighlights","uid","removeMany","_removeHighlights","doRefresh","has","console","log","id","_processHighlight","_getHighlights","setHighlight","_attachSubview","format","layerView","addChildAt","removeChild","sort","findIndex","_ref2","_ref3","_ref4","find","bandId","ranges","toArray","hasHighlight","some","hasData","renderChildren","attributeView","context","setColorMask","_renderChildren"],"sourceRoot":""}