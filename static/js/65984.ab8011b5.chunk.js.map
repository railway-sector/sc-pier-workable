{"version":3,"file":"static/js/65984.ab8011b5.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/GaussianSplat.glsl.js","../node_modules/@arcgis/core/layers/support/tiles3DUtils.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/QuaternionToRotationMatrix.glsl.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/GaussianSplatUnpacking.glsl.js","../node_modules/@arcgis/core/views/3d/layers/GaussianSplatLayerViewPerformanceInfo.js","../node_modules/@arcgis/core/views/3d/support/gaussianSplatting/GaussianSplatAtlasPages.js","../node_modules/@arcgis/core/views/3d/support/gaussianSplatting/GaussianTile.js","../node_modules/@arcgis/core/views/3d/support/GaussianSplatWorkerHandle.js","../node_modules/@arcgis/core/views/3d/support/gaussianSplatting/GaussianSplatOrderTexture.js","../node_modules/@arcgis/core/views/3d/support/gaussianSplatting/GaussianSplatTextureAtlas.js","../node_modules/@arcgis/core/views/3d/support/gaussianSplatting/GaussianSplatDataStore.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/GaussianSplatCompositionTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/GaussianSplatDepthCompositionTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/GaussianSplatDepthTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/GaussianSplatTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/GaussianSplatRenderNode.js","../node_modules/@arcgis/core/views/3d/webgl-engine/shaders/GaussianSplatTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/layers/GaussianSplatLayerView3D.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/util/ComputeCovariance.glsl.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/chunks/GaussianSplatComposition.glsl.js","../node_modules/@arcgis/core/views/layers/LayerView.js","../node_modules/@arcgis/core/chunks/GaussianSplatDepthComposition.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ZEROS as e}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{ZEROS as n}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{terrainDepthTest as a}from\"../views/3d/webgl-engine/core/shaderLibrary/shading/TerrainDepthTest.glsl.js\";import{ComputeCovariance as i}from\"../views/3d/webgl-engine/core/shaderLibrary/util/ComputeCovariance.glsl.js\";import{GaussianSplatUnpacking as t}from\"../views/3d/webgl-engine/core/shaderLibrary/util/GaussianSplatUnpacking.glsl.js\";import{QuaternionToRotationMatrix as o}from\"../views/3d/webgl-engine/core/shaderLibrary/util/QuaternionToRotationMatrix.glsl.js\";import{Float2PassUniform as r}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3BindUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Float3BindUniform.js\";import{Float3PassUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{FloatPassUniform as l}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as d,If as u}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{IntegerBindUniform as p}from\"../views/3d/webgl-engine/core/shaderModules/IntegerBindUniform.js\";import{IntegerPassUniform as v}from\"../views/3d/webgl-engine/core/shaderModules/IntegerPassUniform.js\";import{Matrix4BindUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Texture2DUintPassUniform as f}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DUintPassUniform.js\";import{NoParameters as g}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as h}from\"../views/webgl/ShaderBuilder.js\";class x extends g{constructor(){super(...arguments),this.totalGaussians=-1,this.focalLength=-1,this.minSplatRadius=-1,this.minSplatOpacity=-1,this.tanFov=e,this.cameraDelta=n,this.cameraPos8k=n}}function w(e){const n=new h;n.varyings.add(\"vColor\",\"vec4\"),n.varyings.add(\"conicOpacity\",\"vec4\"),n.varyings.add(\"depth\",\"float\"),n.varyings.add(\"gaussianCenterScreenPos\",\"vec2\"),n.varyings.add(\"fragScreenPos\",\"vec2\"),n.outputs.add(\"fragColor\",\"vec4\",0),n.vertex.uniforms.add(new f(\"splatOrderTexture\",e=>e.splatOrder),new f(\"splatAtlasTexture\",e=>e.splatAtlas),new v(\"numSplats\",e=>e.totalGaussians),new l(\"focalLength\",e=>e.focalLength),new l(\"minSplatRadius\",e=>e.minSplatRadius),new l(\"minSplatOpacity\",e=>e.minSplatOpacity),new r(\"tanFov\",e=>e.tanFov),new c(\"cameraDelta\",e=>e.cameraDelta),new c(\"cameraPos8k\",e=>e.cameraPos8k),new p(\"fullWidth\",({camera:e})=>e.viewport[2]),new p(\"fullHeight\",({camera:e})=>e.viewport[3]),new m(\"proj\",e=>e.camera.projectionMatrix),new m(\"view\",e=>e.camera.viewMatrix),new s(\"cameraPosition\",e=>e.camera.eye)),n.vertex.include(t),n.vertex.include(o),n.vertex.include(i),n.include(a,e),n.vertex.code.add(d`float ndcToPixel(float ndcCoord, float screenSize) {\nreturn ((ndcCoord + 1.0) * screenSize - 1.0) * 0.5;\n}`),n.vertex.main.add(\"\\n    uint instanceID = uint(gl_InstanceID);\\n\\n    // Transform the instanceID into 2D coordinates\\n    uint orderTextureWidth = uint(textureSize(splatOrderTexture, 0).x);\\n    uint x = instanceID % orderTextureWidth;\\n    uint y = instanceID / orderTextureWidth;\\n\\n    // Fetch the index of the remaining frontmost Gaussian\\n    uint gaussianIndex = texelFetch(splatOrderTexture, ivec2(x, y), 0).r;\\n\\n    uint splatAtlasSize = uint(textureSize(splatAtlasTexture, 0).x);\\n\\n    // Fetch the packed Gaussian according to the index\\n    uint gaussianIndexX = gaussianIndex % uint(splatAtlasSize);\\n    uint gaussianIndexY = gaussianIndex / uint(splatAtlasSize);\\n    uvec4 packedGaussian = texelFetch(splatAtlasTexture, ivec2(gaussianIndexX, gaussianIndexY), 0);\\n\\n    // Fetch the header associated with the packed Gaussian (contains tile origin and number of fractional bits)\\n    uint pageNum = gaussianIndex / 1024u;\\n    uint headerIndex = (pageNum + 1u) * 1024u - 1u;\\n    uint headerIndexX = headerIndex % uint(splatAtlasSize);\\n    uint headerIndexY = headerIndex / uint(splatAtlasSize);\\n    uvec4 packedHeader = texelFetch(splatAtlasTexture, ivec2(headerIndexX, headerIndexY), 0);\\n\\n    // Unpack the Gaussian\\n    vColor = unpackColor(packedGaussian);\\n    // Ignore gaussians with very small contribution, with tolerance based on the quality profile\\n    if(vColor.a < minSplatOpacity) {\\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\\n      return;\\n    }\\n\\n    vec3 scale = unpackScale(packedGaussian); \\n    vec4 quaternion = unpackQuaternion(packedGaussian);\\n    mat3 rotation = quaternionToRotationMatrix(quaternion);\\n    vec3 tileOriginRelativePosition = unpackTileOriginRelativePosition(packedGaussian);\\n\\n    vec3 cameraRelativePosition = unpackCameraRelativeGaussianPosition(packedHeader, tileOriginRelativePosition, cameraPosition, cameraPos8k, cameraDelta);\\n\\n    vec4 viewPos = vec4(mat3(view) * cameraRelativePosition, 1);\\n\\n    if (viewPos.z > 1.0) {\\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\\n      return;\\n    }\\n\\n    forwardViewPosDepth(viewPos.xyz);\\n\\n    vec3 covarianceA;\\n    vec3 covarianceB;\\n    computeCovariance3D(rotation, scale.xyz, covarianceA, covarianceB);\\n\\n    float covariance3D[6] = float[6](covarianceA.x, covarianceA.y, covarianceA.z, covarianceB.x, covarianceB.y, covarianceB.z);\\n\\n    vec3 covariance2D = computeCovariance2D(viewPos.xyz, focalLength, tanFov, covariance3D, view);\\n    \\n    // Invert covariance (EWA algorithm)\\n    float determinant = (covariance2D.x * covariance2D.z - covariance2D.y * covariance2D.y);\\n    if (determinant == 0.) {\\n      gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\\n      return;\\n    }\\n    float invDeterminant = 1. / determinant;\\n    \\n\\n    vec4 projPos = proj * viewPos;\\n    float invW = 1. / (projPos.w + 1e-7);\\n    vec3 ndcPos = projPos.xyz * invW;\\n\\n    // Compute extent in screen space (by finding the eigenvalues of the 2D covariance matrix). \\n    // Use the extent to compute the bounding rectangle of the Gaussian in screen space.\\n    float mid = 0.5 * (covariance2D.x + covariance2D.z);\\n    float lambda1 = mid + sqrt(max(0.1, mid * mid - determinant));\\n    float lambda2 = mid - sqrt(max(0.1, mid * mid - determinant));\\n    float radius = ceil(3. * sqrt(max(lambda1, lambda2)));\\n    gaussianCenterScreenPos = vec2(ndcToPixel(ndcPos.x, float(fullWidth)), ndcToPixel(ndcPos.y, float(fullHeight)));\\n\\n    // Ignore gaussians with very small contribution, with tolerance based on the quality profile\\n    if(minSplatRadius > 0.0) {\\n      float effectiveSize = radius * vColor.a;\\n      if(effectiveSize < minSplatRadius) {\\n        gl_Position = vec4(1e038, 1e038, 1e038, 1.0);\\n        return;\\n      }\\n    }\\n\\n    // This maps vertex IDs 0, 1, 2, 3 to (-1,-1), (1,-1), (-1,1), (1,1)\\n    vec2 corner = vec2((gl_VertexID << 1) & 2, gl_VertexID & 2) - 1.0;\\n\\n    // Vertex (corner) position in screen space\\n    fragScreenPos = gaussianCenterScreenPos + radius * corner;\\n\\n    // We use a conic function to derive the opacity\\n    vec3 conic = vec3(covariance2D.z, -covariance2D.y, covariance2D.x) * invDeterminant;\\n    conicOpacity = vec4(conic, vColor.a);\\n\\n    depth = ndcPos.z;\\n    \\n    // Convert from screen-space to clip-space\\n    vec2 clipPos = fragScreenPos / vec2(fullWidth, fullHeight) * 2. - 1.;\\n\\n    gl_Position = vec4(clipPos, depth, 1.0);\\n\\n  \");const g=e.depthPass;return n.fragment.main.add(`\\n    discardByTerrainDepth();\\n    vec2 offsetFromCenter = gaussianCenterScreenPos - fragScreenPos;\\n\\n    // Evaluate the 2D elliptical Gaussian exponent using the general conic form: Ax^2+2Bxy+Cy^2\\n    float x = offsetFromCenter.x;\\n    float y = offsetFromCenter.y;\\n    float A = conicOpacity.x;\\n    float B = conicOpacity.y;\\n    float C = conicOpacity.z;\\n    float opacityScale = conicOpacity.w;\\n    float gaussianExponent = -0.5 * (A * x * x + 2.0 * B * x * y + C * y * y);\\n\\n    // A positive exponent indicates alpha > 1, this should not happen\\n    if (gaussianExponent > 0.0) {\\n      discard;\\n    }\\n\\n    float gaussianFalloff = exp(gaussianExponent);\\n    \\n      // cap at 0.99 to avoid blending issues, such as seams between overlapping Gaussians\\n    float alpha = min(.99f, opacityScale * gaussianFalloff);\\n\\n    // discard low alpha fragments since their contribution would not be visible\\n    if (alpha < 1./255.) {\\n        discard;\\n    }\\n\\n    // We cannot write color and depth in the same pass, as they require different blend modes.\\n    // Regular depth writing based on first hit is not precise enough due to the inherently \\n    // transparent nature of Gaussian Splats (especially at the borders of the Splat).\\n    // We thus use a blended depth that computes a non-linear average using \\n    // the splat order and opacity with geometric decay.\\n    // This means the depth is averaged based on the order and opacity of the Gaussians,\\n    // with the frontmost Gaussians contributing the most.\\n    ${u(g,\"fragColor = vec4(depth, 0, 0, alpha);\",\"fragColor = vec4(vColor.rgb * alpha, alpha);\")}\\n  `),n}const y=Object.freeze(Object.defineProperty({__proto__:null,GaussianSplatPassParameters:x,build:w},Symbol.toStringTag,{value:\"Module\"}));export{x as G,y as a,w as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{rad2deg as e}from\"../../core/mathUtils.js\";import{e as t,g as r,t as n,d as o,A as i,z as s,a as m}from\"../../chunks/vec32.js\";import{fromValues as a,create as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{WGS84ECEFSpatialReferenceLike as l}from\"../../geometry/ellipsoidUtils.js\";import c from\"../../geometry/Extent.js\";import f from\"../../geometry/HeightModelInfo.js\";import x from\"../../geometry/SpatialReference.js\";import{projectBuffer as g}from\"../../geometry/projection/projectBuffer.js\";function u(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const r of e)if(\"number\"!=typeof r)return!1;return!0}const d=7645211,p={xmin:-180,ymin:-90,zmin:-450,xmax:180,ymax:90,zmax:8850},S=new Map([[5773,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM96_Geoid\"})],[3855,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"EGM2008_Geoid\"})],[115700,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"WGS_1984\"})],[115701,new f({heightModel:\"ellipsoidal\",heightUnit:\"meters\",vertCRS:\"ETRS_1989\"})],[6360,new f({heightModel:\"gravity-related-height\",heightUnit:\"us-feet\",vertCRS:\"NAVD88_height_(ftUS)\"})],[7837,new f({heightModel:\"gravity-related-height\",heightUnit:\"meters\",vertCRS:\"DHHN2016_(height) \"})]]);function _(e){if(!e)return null;const t=e.vcsWkid||e.latestVcsWkid;return t?S.get(t):null}function R(e){return!(!(e.extensions?.ESRI_crs?.wkid||e.extensions?.ESRI_crs?.latestWkid||e.extensions?.ESRI_crs?.wkt)||!e.root?.extensions?.ESRI_crs?.boundingVolume?.box&&!e.root?.extensions?.ESRI_crs?.boundingVolume?.sphere)}function E(f,S=!1){let _=new x({wkid:4326,vcsWkid:115700}),R=f.root?.boundingVolume,E=!1,b=f?.root?.transform;if(S&&(f.extensions?.ESRI_crs?.wkid||f.extensions?.ESRI_crs?.latestWkid||f.extensions?.ESRI_crs?.wkt)&&(f.root?.extensions?.ESRI_crs?.boundingVolume?.box||f.root?.extensions?.ESRI_crs?.boundingVolume?.sphere))_=new x(f.extensions?.ESRI_crs),R=f.root?.extensions?.ESRI_crs?.boundingVolume,b=f.root?.transform,E=!0;else if(!R)return new c(-180,-90,180,90,_);if(R.box){const e=R?.box;if(e[3]>d&&e[7]>d&&e[11]>d)return new c({...p,spatialReference:_})}const w=h();if(!E&&R.region&&u(R.region,6)){const t=R.region,r=e(t[0]),n=e(t[1]),o=t[4],i=e(t[2]),s=e(t[3]),m=t[5];return new c({xmin:r,ymin:n,zmin:o,xmax:i,ymax:s,zmax:m,spatialReference:_})}if(R.sphere&&u(R.sphere,4)){const e=R.sphere,m=a(e[0],e[1],e[2]),f=e[3]/Math.sqrt(3),d=h();t(d,m,a(f,f,f));const p=h();if(r(p,m,a(f,f,f)),b&&u(b,16)){const e=b;n(w,d,e),o(d,w),n(w,p,e),o(p,w)}E||(g(d,l,0,d,x.WGS84,0),g(p,l,0,p,x.WGS84,0));const S=h(),y=h();return i(S,d,p),s(y,d,p),new c({xmin:S[0],ymin:S[1],zmin:S[2],xmax:y[0],ymax:y[1],zmax:y[2],spatialReference:_})}if(R.box&&u(R.box,12)){const e=R.box,t=a(e[0],e[1],e[2]),o=a(e[3],e[4],e[5]),f=a(e[6],e[7],e[8]),d=a(e[9],e[10],e[11]),p=[];for(let r=0;r<8;++r)p.push(h());if(r(p[0],t,o),r(p[0],p[0],f),r(p[0],p[0],d),m(p[1],t,o),r(p[1],p[1],f),r(p[1],p[1],d),r(p[2],t,o),m(p[2],p[2],f),r(p[2],p[2],d),m(p[3],t,o),m(p[3],p[3],f),r(p[3],p[3],d),r(p[4],t,o),r(p[4],p[4],f),m(p[4],p[4],d),m(p[5],t,o),r(p[5],p[5],f),m(p[5],p[5],d),r(p[6],t,o),m(p[6],p[6],f),m(p[6],p[6],d),m(p[7],t,o),m(p[7],p[7],f),m(p[7],p[7],d),b&&u(b,16)){const e=b;for(let t=0;t<8;++t)n(p[t],p[t],e)}const S=a(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),w=a(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let r=0;r<8;++r)E||g(p[r],l,0,p[r],x.WGS84,0),i(w,w,p[r]),s(S,S,p[r]);return new c({xmin:w[0],ymin:w[1],zmin:w[2],xmax:S[0],ymax:S[1],zmax:S[2],spatialReference:_})}return new c(-180,-90,180,90,_)}export{_ as getHeightModelInfoFromVCS,R as hasEsriCrs,E as initFullExtent,u as verifyArray};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{glsl as x}from\"../../shaderModules/glsl.js\";function y(y){y.code.add(x`mat3 quaternionToRotationMatrix(vec4 q) {\nfloat x2 = q.x + q.x;\nfloat y2 = q.y + q.y;\nfloat z2 = q.z + q.z;\nfloat xx = x2 * q.x;\nfloat yy = y2 * q.y;\nfloat zz = z2 * q.z;\nfloat xy = x2 * q.y;\nfloat xz = x2 * q.z;\nfloat yz = y2 * q.z;\nfloat wx = x2 * q.w;\nfloat wy = y2 * q.w;\nfloat wz = z2 * q.w;\nreturn mat3(\n1.0 - (yy + zz), xy - wz, xz + wy,\nxy + wz, 1.0 - (xx + zz), yz - wx,\nxz - wy, yz + wx, 1.0 - (xx + yy)\n);\n}`)}export{y as QuaternionToRotationMatrix};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/glsl.js\";function e(e){e.code.add(a`vec4 unpackColor(uvec4 packedGaussian) {\nvec4 color;\ncolor.r = float((packedGaussian.w >> 1u) & 0xfeu);\ncolor.g = float((packedGaussian.w >> 9u) & 0xffu);\ncolor.b = float((packedGaussian.w >> 16u) & 0xfeu);\ncolor.a = float((packedGaussian.w >> 24u) & 0xffu);\nreturn color / 255.0;\n}`),e.code.add(a`vec3 unpackScale(uvec4 packedGaussian) {\nuint sx = (packedGaussian.z >> 10u) & 0xffu;\nuint sy = (packedGaussian.z >> 18u) & 0xffu;\nuint szLow = (packedGaussian.z >> 26u) & 0x3fu;\nuint szHigh = packedGaussian.a & 0x3u;\nuint sz = szLow | (szHigh << 6u);\nreturn exp(vec3(sx, sy, sz) / 16.0 - 10.0);\n}`),e.code.add(a`const uint MASK_9_BITS = 0x1FFu;\nconst float SQRT_HALF = 0.7071067811865476;\nconst ivec3 COMPONENT_ORDER[4] = ivec3[4](\nivec3(3, 2, 1),\nivec3(3, 2, 0),\nivec3(3, 1, 0),\nivec3(2, 1, 0)\n);\nvec4 unpackQuaternion(uvec4 packedGaussian) {\nuint packedRotation = packedGaussian.x;\nuint largestComponent = packedRotation >> 30u;\nvec4 quaternion = vec4(0.0);\nfloat sumSquares = 0.0;\nuint bitfield = packedRotation;\nfor (int j = 0; j < 3; ++j) {\nint index = COMPONENT_ORDER[int(largestComponent)][j];\nuint magnitude = bitfield & MASK_9_BITS;\nuint signBit = (bitfield >> 9u) & 1u;\nbitfield = bitfield >> 10u;\nfloat value = SQRT_HALF * float(magnitude) / float(MASK_9_BITS);\nquaternion[index] = signBit == 1u ? -value : value;\nsumSquares += value * value;\n}\nquaternion[int(largestComponent)] = sqrt(1.0 - sumSquares);\nreturn quaternion;\n}`),e.code.add(a`vec3 unpackTileOriginRelativePosition(uvec4 packedGaussian) {\nuint packedPositionLow = packedGaussian.y;\nuint packedPositionHigh = packedGaussian.z;\nuint x = packedPositionLow & 0x3FFFu;\nuint y = (packedPositionLow >> 14u) & 0x3FFFu;\nuint zLow = (packedPositionLow >> 28u) & 0xFu;\nuint zHigh = packedPositionHigh & 0x3FFu;\nuint z = zLow | (zHigh << 4u);\nreturn vec3(float(x), float(y), float(z));\n}`),e.code.add(a`vec3 unpackCameraRelativeGaussianPosition(uvec4 packedHeader, highp vec3 position, vec3 cameraPosition, vec3 cameraPos8k, vec3 cameraDelta) {\nvec3 tileOrigin = uintBitsToFloat(packedHeader.xyz);\nfloat invPosScale = 1.0 / exp2(float(packedHeader.w & 0xffu));\nvec3 delta = tileOrigin.xyz - cameraPos8k;\nvec3 cameraRelativePosition = position.xyz * invPosScale + delta * 2.048 - cameraDelta;\nreturn cameraRelativePosition;\n}`)}export{e as GaussianSplatUnpacking};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{LayerViewPerformanceInfo as e}from\"./support/LayerViewPerformanceInfo.js\";class r extends e{constructor(e,r,o,s){super(e,0,0,0,r),this.cachedNodes=o,this.memoryMBCached=s}}export{r as GaussianSplatLayerViewPerformanceInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nconst t=4096,s=16,e=1023,i=e+1,n=t*s/i,r=4,o=i*r,h=e*r;class a{constructor(t=n){this._pageCount=t;const s=Math.ceil(t/32);this._bitset=new Uint32Array(s)}get pageCount(){return this._pageCount}isAllocated(t){const s=t/32|0,e=t%32;return!!(this._bitset[s]&1<<e)}allocate(t){const s=t/32|0,e=t%32;this._bitset[s]|=1<<e}free(t){const s=t/32|0,e=t%32;this._bitset[s]&=~(1<<e)}findFirstFreePage(){for(let t=0;t<this._bitset.length;t++)if(4294967295!==this._bitset[t])for(let s=0;s<32;s++){const e=32*t+s;if(e>=this._pageCount)break;if(!(this._bitset[t]&1<<s))return e}return null}resize(t){this._pageCount=t;const s=Math.ceil(t/32),e=this._bitset.length;if(s!==e){const t=new Uint32Array(s),i=Math.min(e,s);t.set(this._bitset.subarray(0,i)),this._bitset=t}this._clearExcessBits(this._bitset,t)}_clearExcessBits(t,s){const e=Math.floor((s-1)/32),i=(s-1)%32;if(s>0&&i<31){const s=(1<<i+1)-1;t[e]&=s}e+1<t.length&&t.fill(0,e+1)}}export{a as GaussianSplatAtlasPages,i as elementsPerSplatPage,e as gaussiansPerSplatPage,s as initialSplatAtlasTextureHeight,n as initialSplatAtlasTexturePages,r as packedGaussianSizeInU32,t as splatAtlasTextureWidth,o as splatPageSizeInU32,h as splatPageSizeInU32WithoutHeader};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{estimateNumberArrayMemory as s}from\"../../../../core/memoryEstimations.js\";import{splatPageSizeInU32 as i}from\"./GaussianSplatAtlasPages.js\";class t{constructor(t,a,e,o,h,r,l){this.handle=t,this.obb=a,this.gaussianAtlasIndices=e,this.pageIds=o,this.positions=h,this.squaredScales=r,this.maxScale=l,this.isVisible=!1,this.usedMemory=s(this.gaussianAtlasIndices,this.positions,this.squaredScales)+this.pageIds.length*i*4}}export{t as GaussianTile};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as r}from\"../../../core/workers/WorkerHandle.js\";class s extends r{constructor(r){super(\"GaussianSplatSortWorker\",\"sort\",{sort:r=>[r.distances.buffer,r.sortOrderIndices.buffer]},r,{strategy:\"dedicated\"})}sort(r,s){return this.invokeMethod(\"sort\",r,s)}async destroyWorkerAndSelf(){await this.broadcast({},\"destroy\"),this.destroy()}}export{s as GaussianSplatSortWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{reallocGrowthFactor as e}from\"../../../../core/arrayUtils.js\";import{fromValues as t}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import\"../../../webgl/BufferObject.js\";import\"../../../webgl/FramebufferObject.js\";import\"../../../webgl/Program.js\";import\"../../../../core/has.js\";import\"../../../webgl/Renderbuffer.js\";import{Texture as r}from\"../../../webgl/Texture.js\";import\"../../../../core/Logger.js\";import{PixelType as s,SizedPixelFormat as i}from\"../../../webgl/enums.js\";import\"../../../webgl/checkWebGLError.js\";import{TextureDescriptor as o}from\"../../../webgl/TextureDescriptor.js\";class a{constructor(e){this.texture=null,this._orderTextureCapacity=0,this._rctx=e}ensureCapacity(t){if(this._orderTextureCapacity<t){this.texture?.dispose();const a=Math.ceil(t*e),c=this._evalTextureSize(a),u=c[0]*c[1];this._orderBuffer=new Uint32Array(u);const h=new o;h.height=c[0],h.width=c[1],h.pixelFormat=36244,h.dataType=s.UNSIGNED_INT,h.internalFormat=i.R32UI,h.wrapMode=33071,h.samplingMode=9728,this.texture=new r(this._rctx,h),this._orderTextureCapacity=u}}setData(e,t){this.ensureCapacity(t),this._orderBuffer?.set(e),this.texture?.setData(this._orderBuffer)}clear(){this._orderTextureCapacity=0,this.texture?.dispose(),this.texture=null}destroy(){this.texture?.dispose()}_evalTextureSize(e){const r=Math.ceil(Math.sqrt(e)),s=Math.ceil(e/r);return t(r,s)}}export{a as GaussianSplatOrderTexture};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{reallocGrowthFactor as t}from\"../../../../core/arrayUtils.js\";import\"../../../webgl/BufferObject.js\";import{FramebufferObject as e}from\"../../../webgl/FramebufferObject.js\";import\"../../../webgl/Program.js\";import\"../../../../core/has.js\";import\"../../../webgl/Renderbuffer.js\";import{Texture as r}from\"../../../webgl/Texture.js\";import\"../../../../core/Logger.js\";import{PixelType as s,SizedPixelFormat as a}from\"../../../webgl/enums.js\";import\"../../../webgl/checkWebGLError.js\";import{initialSplatAtlasTextureHeight as i,GaussianSplatAtlasPages as o,splatAtlasTextureWidth as l,elementsPerSplatPage as h}from\"./GaussianSplatAtlasPages.js\";import{TextureDescriptor as u}from\"../../../webgl/TextureDescriptor.js\";class p{constructor(t,e,r){this._splatAtlasTextureHeight=i,this.texture=null,this._rctx=t,this._fboCache=r,this.pageAllocator=new o,this._cache=e.newCache(\"gaussian texture cache\",t=>t.dispose())}ensureTextureAtlas(){if(this.texture)return;const t=this._cache.pop(\"splatTextureAtlas\");if(t)return void(this.texture=t);const e=new u;e.height=this._splatAtlasTextureHeight,e.width=l,e.pixelFormat=36249,e.dataType=s.UNSIGNED_INT,e.internalFormat=a.RGBA32UI,e.samplingMode=9728,e.wrapMode=33071,this.texture=new r(this._rctx,e),this._updatePageAllocator()}grow(){if(!this.texture)return this.ensureTextureAtlas(),!1;const r=Math.floor(this._splatAtlasTextureHeight*t);if(r*l>this._rctx.parameters.maxPreferredTexturePixels)return!1;const s=new e(this._rctx,this.texture),a=this._fboCache.acquire(l,r,\"gaussian splat atlas resize\",11);return this._rctx.blitFramebuffer(s,a.fbo,16384,9728,0,0,l,this._splatAtlasTextureHeight,0,0,l,this._splatAtlasTextureHeight),this.texture?.dispose(),this.texture=a.fbo?.detachColorTexture(),s.dispose(),a.dispose(),this._splatAtlasTextureHeight=r,this._updatePageAllocator(),!0}requestPage(){let t=this.pageAllocator.findFirstFreePage();return null===t&&this.grow()&&(t=this.pageAllocator.findFirstFreePage()),null!==t&&this.pageAllocator.allocate(t),t}freePage(t){this.pageAllocator.free(t)}update(t,e,r){this.ensureTextureAtlas(),this.texture.updateData(0,t,e,h,1,r)}_updatePageAllocator(){const t=l*this._splatAtlasTextureHeight/h;this.pageAllocator.pageCount!==t&&this.pageAllocator.resize(t)}clear(){this.texture&&(this._cache.put(\"splatTextureAtlas\",this.texture),this.texture=null)}destroy(){this._cache.destroy(),this.texture?.dispose()}}export{p as GaussianSplatTextureAtlas};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{reallocGrowthFactor as e}from\"../../../../core/arrayUtils.js\";import\"../../../../core/has.js\";import{signal as s}from\"../../../../core/signal.js\";import{makeScheduleFunction as t}from\"../../layers/support/makeScheduleFunction.js\";import{GaussianSplatSortWorkerHandle as r}from\"../GaussianSplatWorkerHandle.js\";import{GaussianSplatOrderTexture as i}from\"./GaussianSplatOrderTexture.js\";import{GaussianSplatTextureAtlas as a}from\"./GaussianSplatTextureAtlas.js\";class n{constructor(e){this._updating=s(!1),this.visibleGaussians=0,this._visibleGaussianTiles=new Array,this._workerHandle=null,this._isSorting=!1,this._pendingSortTask=!1,this._bufferCapacity=0,this._renderer=e,this._orderTexture=new i(this._renderer.renderingContext),this._textureAtlas=new a(this._renderer.renderingContext,this._renderer.view.resourceController.memoryController,this._renderer.fboCache);const{resourceController:n}=this._renderer.view;this._workerHandle=new r(t(n))}get textureAtlas(){return this._textureAtlas}get orderTexture(){return this._orderTexture}get visibleGaussianTiles(){return this._visibleGaussianTiles}updateGaussianVisibility(e){this._visibleGaussianTiles=e,this.requestSort()}isUpdating(){return this._updating.value}destroy(){this._pendingSortTask=!1,this._workerHandle?.destroyWorkerAndSelf(),this._textureAtlas.destroy(),this._orderTexture.destroy()}requestSort(){this._updating.value=!0,this._isSorting?this._pendingSortTask=!0:(this._isSorting=!0,this._pendingSortTask=!1,this._sortOnWorker().then(()=>this._handleSortComplete()).catch(()=>this._handleSortComplete()))}_handleSortComplete(){this._isSorting=!1,this._pendingSortTask?this.requestSort():this._updating.value=!1}_clearBuffersAndTextures(){this._bufferCapacity=0,this._orderTexture.clear(),this._textureAtlas.clear()}_ensureBufferCapacity(s){if(this._bufferCapacity<s){const t=Math.ceil(s*e);this._atlasIndicesBuffer=new Uint32Array(t),this._sortedAtlasIndicesBuffer=new Uint32Array(t),this._distancesBuffer=new Float64Array(t),this._sortOrderBuffer=new Uint32Array(t),this._bufferCapacity=t}}async _sortOnWorker(){let e=0;if(this._visibleGaussianTiles.forEach(s=>e+=s.gaussianAtlasIndices.length),0===e)return this.visibleGaussians=0,this._clearBuffersAndTextures(),void this._renderer.requestRender(1);this._ensureBufferCapacity(e),this._textureAtlas.ensureTextureAtlas();const s=this._renderer.camera.eye,t=s[0],r=s[1],i=s[2],a=this._atlasIndicesBuffer.subarray(0,e);let n=0;this._visibleGaussianTiles.forEach(e=>{const s=e.gaussianAtlasIndices,o=e.positions;for(let u=0;u<s.length;u++){a[n]=s[u];const e=3*u,h=o[e],l=o[e+1],d=o[e+2],_=h-t,f=l-r,c=d-i;this._distancesBuffer[n]=_*_+f*f+c*c,n++}});for(let u=0;u<e;u++)this._sortOrderBuffer[u]=u;const o={distances:this._distancesBuffer,sortOrderIndices:this._sortOrderBuffer,numGaussians:e,preciseSort:!1};await(this._workerHandle?.sort(o).then(s=>{this._distancesBuffer=s.distances,this._sortOrderBuffer=s.sortedOrderIndices;const t=this._sortedAtlasIndicesBuffer.subarray(0,e);for(let i=0;i<e;i++)t[i]=a[s.sortedOrderIndices[i]];this._orderTexture.setData(t,e);const r=this._renderer.view.qualitySettings.gaussianSplat.maxAllowedVisibleGaussians;this.visibleGaussians=Math.min(e,r),this._renderer.requestRender(1)}))}}export{n as GaussianSplatDataStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as o}from\"../lib/DefaultVertexBufferLayouts.js\";import{S as t}from\"../../../../chunks/GaussianSplatComposition.glsl.js\";import{makePipelineState as s,defaultDepthWrite as i,defaultColorWrite as a}from\"../../../webgl/renderState.js\";class l extends r{constructor(r,s){super(r,s,new e(t,()=>import(\"./GaussianSplatComposition.glsl.js\")),o)}initializePipeline(){return s({colorWrite:a,depthTest:null,depthWrite:i})}}export{l as GaussianSplatCompositionTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as o}from\"../lib/DefaultVertexBufferLayouts.js\";import{S as s}from\"../../../../chunks/GaussianSplatDepthComposition.glsl.js\";import{DrawBufferNone as t}from\"../../../webgl/enums.js\";import{makePipelineState as i,defaultDepthWrite as a}from\"../../../webgl/renderState.js\";class l extends r{constructor(r,t){super(r,t,new e(s,()=>import(\"./GaussianSplatDepthComposition.glsl.js\")),o)}initializePipeline(){return i({colorWrite:null,depthTest:{func:515},depthWrite:a,drawBuffers:{buffers:[t]}})}}export{l as GaussianSplatDepthCompositionTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as t}from\"../lib/DefaultVertexBufferLayouts.js\";import{a as i}from\"../../../../chunks/GaussianSplat.glsl.js\";import{makePipelineState as s,defaultColorWrite as a,separateBlendingParams as o}from\"../../../webgl/renderState.js\";class l extends r{constructor(r,s){super(r,s,new e(i,()=>import(\"./GaussianSplat.glsl.js\")),t)}_createPipeline(){return s({blending:o(773,773,772,1,32774,32774),depthTest:{func:513},colorWrite:a})}initializePipeline(){return this._createPipeline()}}export{l as GaussianSplatDepthTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ReloadableShaderModule as e}from\"../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as r}from\"../core/shaderTechnique/ShaderTechnique.js\";import{Pos2Locations as t}from\"../lib/DefaultVertexBufferLayouts.js\";import{a as i}from\"../../../../chunks/GaussianSplat.glsl.js\";import{makePipelineState as s,defaultColorWrite as a,separateBlendingParams as o}from\"../../../webgl/renderState.js\";class l extends r{constructor(r,s){super(r,s,new e(i,()=>import(\"./GaussianSplat.glsl.js\")),t)}_createPipeline(){return s({blending:o(773,773,1,1,32774,32774),depthTest:{func:515},colorWrite:a})}initializePipeline(){return this._createPipeline()}}export{l as GaussianSplatTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as t}from\"tslib\";import{watch as s}from\"../../../../core/reactiveUtils.js\";import\"../../../../core/Logger.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import\"../../../../core/Error.js\";import{subclass as e}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{set as i}from\"../../../../core/libs/gl-matrix-2/math/vec2.js\";import{create as a}from\"../../../../core/libs/gl-matrix-2/factories/vec2f64.js\";import{e as r,b as n,h as o,u as h,f as l,m as c,J as p,d as m}from\"../../../../chunks/vec32.js\";import{create as u,clone as d}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{s as _}from\"../../../../chunks/vec42.js\";import{create as g}from\"../../../../geometry/support/plane.js\";import{fromPoints as f}from\"../../../../geometry/support/ray.js\";import{j as b,i as P}from\"../../../../chunks/sphere.js\";import{RenderCategory as C}from\"../../webgl.js\";import{GaussianSplatTarget as S}from\"../../layers/i3s/Intersector.js\";import{GaussianSplatDataStore as q}from\"../../support/gaussianSplatting/GaussianSplatDataStore.js\";import v from\"../../webgl/RenderNode.js\";import{IntersectorResult as w}from\"./IntersectorResult.js\";import{G as D}from\"../../../../chunks/GaussianSplat.glsl.js\";import{G as T}from\"../../../../chunks/GaussianSplatComposition.glsl.js\";import{GaussianSplatCompositionTechnique as j}from\"../shaders/GaussianSplatCompositionTechnique.js\";import{G as y}from\"../../../../chunks/GaussianSplatDepthComposition.glsl.js\";import{GaussianSplatDepthCompositionTechnique as x}from\"../shaders/GaussianSplatDepthCompositionTechnique.js\";import{GaussianSplatDepthTechnique as G}from\"../shaders/GaussianSplatDepthTechnique.js\";import{GaussianSplatTechnique as R}from\"../shaders/GaussianSplatTechnique.js\";import{GaussianSplatTechniqueConfiguration as A}from\"../shaders/GaussianSplatTechniqueConfiguration.js\";import{DepthStencilAttachment as V,PrimitiveType as E}from\"../../../webgl/enums.js\";var I;let M=class extends v{constructor(){super(...arguments),this.gaussianPosition=u(),this.intersectionRayDir=u(),this.intersectionPlane=g(),this._slicePlaneEnabled=!1,this._data=null,this.produces=C.OPAQUE,this.type=0,this.isGround=!1,this.layerViewUid=\"\",this._gaussianSplatParameters=new D,this._gaussianSplatCompositionParameters=new T,this._gaussianSplatDepthCompositionParameters=new y,this._splatTechniqueConfiguration=new A,this._splatDepthTechniqueConfiguration=new A(!0),this._previousCameraPosition=u(),this._previousCameraDirection=u(),this._tanFov=a(),this._tempVec=u(),this._cameraDelta=u(),this._coarseCameraPosition=u()}static{I=this}async initialize(){this._data=new q(this),this.view.sceneIntersectionHelper.addIntersectionHandler(this),this.addHandles([s(()=>this.view.state.camera,()=>this._onCameraChange())])}precompile(){this._splatTechniqueConfiguration.terrainDepthTest=this.bindParameters.terrainDepthTest,this.techniques.precompile(R,this._splatTechniqueConfiguration),this._splatDepthTechniqueConfiguration.terrainDepthTest=this.bindParameters.terrainDepthTest,this.techniques.precompile(G,this._splatDepthTechniqueConfiguration),this.techniques.precompile(j),this.techniques.precompile(x)}render(t){const s=t.find(({name:t})=>t===C.OPAQUE);if(!this._data.visibleGaussians||!this._data.orderTexture.texture||!this._data.textureAtlas.texture)return s;const e=this.techniques.get(R,this._splatTechniqueConfiguration),a=this.techniques.get(G,this._splatDepthTechniqueConfiguration),r=this.techniques.get(j),n=this.techniques.get(x);if(!(e.compiled&&a.compiled&&n.compiled&&r.compiled))return this.requestRender(1),s;const{fullWidth:o,fullHeight:h}=this.bindParameters.camera,l=this.fboCache,c=l.acquire(o,h,\"gaussian color output\");c.attachDepth(s.getAttachment(V));const p=this.renderingContext;p.bindFramebuffer(c.fbo),p.setClearColor(0,0,0,0),p.clear(16384),this._gaussianSplatParameters.totalGaussians=this._data.visibleGaussians,this._gaussianSplatParameters.splatOrder=this._data.orderTexture.texture,this._gaussianSplatParameters.splatAtlas=this._data.textureAtlas.texture;const m=Math.tan(.5*this.camera.fovY),u=m/h*o;i(this._tanFov,u,m);const d=h/(2*m);this._gaussianSplatParameters.focalLength=d,this._gaussianSplatParameters.tanFov=this._tanFov;const _=this.view.qualitySettings.gaussianSplat,g=_.minimumSplatPixelRadius*Math.sqrt(o*h)/Math.sqrt(2073600);this._gaussianSplatParameters.minSplatRadius=g,this._gaussianSplatParameters.minSplatOpacity=_.minimumOpacity,this._prepareHighPrecisionCameraPosition(),this.renderingContext.bindTechnique(e,this.bindParameters,this._gaussianSplatParameters),this.renderingContext.drawArraysInstanced(E.TRIANGLE_STRIP,0,4,this._data.visibleGaussians);const f=l.acquire(o,h,\"splat depth\",8);f.attachDepth(s.getAttachment(V)),p.bindFramebuffer(f.fbo),p.setClearColor(0,0,0,0),p.clear(16384),this.renderingContext.bindTechnique(a,this.bindParameters,this._gaussianSplatParameters),this.renderingContext.drawArraysInstanced(E.TRIANGLE_STRIP,0,4,this._data.visibleGaussians);const b=l.acquire(o,h,this.produces);return this._gaussianSplatDepthCompositionParameters.splatDepth=f.getTexture(),b.attachDepth(s.getAttachment(V)),p.bindFramebuffer(b.fbo),p.bindTechnique(n,this.bindParameters,this._gaussianSplatDepthCompositionParameters),p.screen.draw(),this._gaussianSplatCompositionParameters.color=s.getTexture(),this._gaussianSplatCompositionParameters.splatColor=c.getTexture(),p.bindFramebuffer(b.fbo),p.bindTechnique(r,this.bindParameters,this._gaussianSplatCompositionParameters),p.screen.draw(),c.release(),f.release(),b}intersect(t,s,e,i){const{gaussianPosition:a,intersectionRayDir:p,intersectionPlane:m,layerViewUid:g}=this,C=f(e,i);r(p,i,e);const q=1/n(p);o(p,p,q);const v=u();h(v,p),_(m,p[0],p[1],p[2],-l(p,e));const D=new U,T=new U,j=new Array;this._data.visibleGaussianTiles.forEach(r=>{const{maxScale:n}=r,o=r.obb.minimumDistancePlane(m),h=r.obb.maximumDistancePlane(m),u=h<0,_=null!=D.dist&&null!=T.dist&&D.dist<o*q&&T.dist>h*q;if(u||_)return;const f=b(r.obb.center,r.obb.radius+n);if(!P(f,C,null))return;if(!r.obb.intersectRay(e,p,n))return;const{positions:S,squaredScales:w,gaussianAtlasIndices:y}=r,x=y.length;for(let m=0;m<x;m++){const r=3*m;a[0]=S[r]-e[0],a[1]=S[r+1]-e[1],a[2]=S[r+2]-e[2];const n=w[m],o=l(a,p),h=o*o;if(c(a)-h>n)continue;const u=o*q,_=t=>(t.point=t.point?t.point.fill(a[0],a[1],a[2]):d(a),t.dist=u,t.normal=v,t.layerViewUid=g,t);if((null==D.dist||u<D.dist)&&(null==s||s(e,i,u))&&_(D),0!==t.options.store&&(null==T.dist||u>T.dist)&&(null==s||s(e,i,u))&&_(T),2===t.options.store&&(null==s||s(e,i,u))){const t=new U;j.push(_(t))}}});const y=(t,s)=>{const{layerViewUid:e}=s,i=new S(s.point,e);t.set(0,i,s.dist,s.normal)};if(F(D)){const s=t.results.min;(null==s.distance||D.dist<s.distance)&&y(s,D)}if(F(T)&&0!==t.options.store){const s=t.results.max;(null==s.distance||T.dist>s.distance)&&y(s,T)}if(2===t.options.store)for(const r of j){const s=new w(C);y(s,r),t.results.all.push(s)}}get slicePlaneEnabled(){return this._slicePlaneEnabled}set slicePlaneEnabled(t){this._slicePlaneEnabled!==t&&(this._slicePlaneEnabled=t,this.requestRender(1))}get data(){return this._data}destroy(){this._data.destroy(),super.destroy()}_onCameraChange(){const t=this.view.state.camera.eye,s=this.view.state.camera.ray.direction,e=.001;(Math.abs(t[0]-this._previousCameraPosition[0])>e||Math.abs(t[1]-this._previousCameraPosition[1])>e||Math.abs(t[2]-this._previousCameraPosition[2])>e||Math.abs(s[0]-this._previousCameraDirection[0])>e||Math.abs(s[1]-this._previousCameraDirection[1])>e||Math.abs(s[2]-this._previousCameraDirection[2])>e)&&this._data.requestSort()}_prepareHighPrecisionCameraPosition(){o(this._tempVec,this.camera.eye,1/I.tileSize),p(this._tempVec,this._tempVec),m(this._coarseCameraPosition,this._tempVec),this._gaussianSplatParameters.cameraPos8k=this._coarseCameraPosition,o(this._tempVec,this._tempVec,I.tileSize),r(this._cameraDelta,this.camera.eye,this._tempVec),this._gaussianSplatParameters.cameraDelta=this._cameraDelta}static{this.tileSize=2.048}};function F(t){return null!=t.dist&&null!=t.point}M=I=t([e(\"esri.views.3d.webgl-engine.lib.GaussianSplatRenderNode\")],M);class U{constructor(){this.point=null,this.dist=null,this.normal=null,this.layerViewUid=\"\"}}export{M as GaussianSplatRenderNode};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{ShaderTechniqueConfiguration as t,parameter as r}from\"../core/shaderTechnique/ShaderTechniqueConfiguration.js\";class o extends t{constructor(e=!1){super(),this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.occlusionPass=!1,this.depthPass=e}}e([r()],o.prototype,\"terrainDepthTest\",void 0),e([r()],o.prototype,\"cullAboveTerrain\",void 0);export{o as GaussianSplatTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import t from\"../../../core/Logger.js\";import{removeMaybe as s}from\"../../../core/maybe.js\";import{watch as i,syncAndInitial as r}from\"../../../core/reactiveUtils.js\";import{convertUnit as a}from\"../../../core/unitUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/RandomLCG.js\";import{subclass as o}from\"../../../core/accessorSupport/decorators/subclass.js\";import{fromValues as l}from\"../../../core/libs/gl-matrix-2/factories/quatf64.js\";import{isCompatible as h}from\"../../../geometry/support/heightModelInfoUtils.js\";import{isPlateCarree as u,isWebMercator as d,equals as c}from\"../../../geometry/support/spatialReferenceUtils.js\";import{getHeightModelInfoFromVCS as m}from\"../../../layers/support/tiles3DUtils.js\";import{getElevationOffsetInMeters as f}from\"../../../support/elevationInfoUtils.js\";import{getMetersPerUnit as p}from\"../../../symbols/support/unitConversionUtils.js\";import{GaussianSplatLayerViewPerformanceInfo as y}from\"./GaussianSplatLayerViewPerformanceInfo.js\";import{LayerView3D as _}from\"./LayerView3D.js\";import{addLayerViewToWasm as g,getLyr3DWasm as w,removeLayerViewFromWasm as b}from\"./Lyr3DWasm.js\";import{Obb as v}from\"../support/orientedBoundingBox.js\";import{splatPageSizeInU32 as M,elementsPerSplatPage as C,packedGaussianSizeInU32 as S,splatPageSizeInU32WithoutHeader as U,gaussiansPerSplatPage as x,splatAtlasTextureWidth as V}from\"../support/gaussianSplatting/GaussianSplatAtlasPages.js\";import{GaussianTile as j}from\"../support/gaussianSplatting/GaussianTile.js\";import{GaussianSplatRenderNode as L}from\"../webgl-engine/lib/GaussianSplatRenderNode.js\";import R from\"../../layers/LayerView.js\";import{spatialReferenceIncompatibleError as A,isInEffectiveScaleRange as I}from\"../../support/layerViewUtils.js\";const E=()=>t.getLogger(\"esri.views.3d.layers.GaussianSPlatLayerView3D\");let H=class extends(_(R)){constructor(e){super(e),this.type=\"gaussian-splat-3d\",this._gaussianTileHandles=new Map,this._pageBuffer=new Uint32Array(M),this._wasmLayerId=-1,this._metersPerVCSUnit=1,this.ignoresMemoryFactor=!1,this._usedMemory=0,this._cacheMemory=0,this._useEsriCrs=!1,this.fullExtentInLocalViewSpatialReference=null,this._suspendedHandle=null,this._conversionBuffer=new ArrayBuffer(4),this._u32View=new Uint32Array(this._conversionBuffer),this._f32View=new Float32Array(this._conversionBuffer);const{view:t}=e;this._memCache=t.resourceController.memoryController.newCache(`GaussianSplat-${this.uid}`,e=>this._deleteTile(e)),this._renderNode=new L({view:t})}initialize(){if(!this._canProjectWithoutEngine())throw A(\"layer\",this.layer.spatialReference.wkid,this.view.renderSpatialReference?.wkid);const e=g(this).then(e=>{this._wasmLayerId=e,this.addHandles([i(()=>this.layer.elevationInfo,e=>this._elevationInfoChanged(e))]),this._suspendedHandle=i(()=>this.suspended,e=>this._wasm?.setEnabled(this,!e),r)});this.addResolvingPromise(e)}get wasmLayerId(){return this._wasmLayerId}get metersPerVCSUnit(){return this._metersPerVCSUnit}isUpdating(){const e=this._wasm;return!(this._wasmLayerId<0||null==e)&&(e.isUpdating(this._wasmLayerId)||this._renderNode.data.isUpdating())}updatingFlagChanged(){this.notifyChange(\"updating\")}get _wasm(){return w(this.view)}get usedMemory(){return this._usedMemory}get unloadedMemory(){return 0}get cachedMemory(){return this._cacheMemory}get useEsriCrs(){return this._useEsriCrs}async createRenderable(e){const t=e.meshData;if(null==t.data)throw new Error(\"meshData.data undefined\");if(t.desc=JSON.parse(t.desc),null==t.desc)throw new Error(\"meshData.desc undefined\");const s=t.desc.prims[0],i=s.vertexCount,r=s.atrbs[0].view,a=s.atrbs[0].view.byteCount,n=s.atrbs[0].view.byteOffset;let o=null;if(\"U32\"!==r.type)return E().warnOnce(\"unexpected meshData.data format\"),{memUsageBytes:0};o=new Uint32Array(t.data.buffer,n,a/4);const h=this.extractHeader(o),u=Math.ceil(i/x),d=new Uint32Array(i),c=[];for(let l=0;l<u;l++){let e=this._data.textureAtlas.requestPage();if(null===e&&(this._freeInvisibleTiles(),e=this._data.textureAtlas.requestPage()),null===e)return E().warnOnce(\"ran out of gaussian splat memory\"),{memUsageBytes:0};{c.push(e);const t=i-l*x,s=Math.min(t,x),r=l*x;for(let i=0;i<s;i++)d[i+r]=i+C*e;const a=l*U;this._pageBuffer.set(o.subarray(a,a+s*S)),this._pageBuffer.set(h.packedHeader,U);const n=e*C,u=n%V,m=Math.floor(n/V);this._data.textureAtlas.update(u,m,this._pageBuffer)}}const m=new Float64Array(3*i),f=new Float64Array(i),p=2.048,y=h.tileOrigin.x*p,_=h.tileOrigin.y*p,g=h.tileOrigin.z*p,w=h.invPosScale;let b=0,M=0;for(let l=0;l<i;l++){const e=l*S,{rawX:t,rawY:s,rawZ:i}=this._extractGaussianPosition(o,e),r=this._extractGaussianSphericalScale(o,e);m[b]=t*w+y,m[b+1]=s*w+_,m[b+2]=i*w+g,f[l]=r*r,M=Math.max(M,r),b+=3}let L=null;if(t.desc.obb){const e=t.desc.obb.quaternion;L=new v(t.desc.obb.center,t.desc.obb.halfSize,l(...e))}L||(E().warnOnce(\"encountered tile without a bounding box\"),L=new v);const R=new j(e.handle,L,d,c,m,f,M);return this._memCache.put(`${R.handle}`,R),this._gaussianTileHandles.set(e.handle,R),this._cacheMemory+=R.usedMemory,{memUsageBytes:R.usedMemory}}_extractGaussianPosition(e,t){const s=e[t+1];return{rawX:16383&s,rawY:s>>>14&16383,rawZ:s>>>28&15|(1023&e[t+2])<<4}}_extractGaussianSphericalScale(e,t){const s=e[t+2],i=s>>>10&255,r=s>>>18&255,a=s>>>26&63|(3&e[t+3])<<6,n=Math.exp(i/16-10),o=Math.exp(r/16-10),l=Math.exp(a/16-10);return Math.max(n,o,l)}freeRenderable(e){const t=this._gaussianTileHandles.get(e);t&&(t.isVisible?this._usedMemory-=t.usedMemory:this._cacheMemory-=t.usedMemory,t.pageIds.forEach(e=>this._data.textureAtlas.freePage(e)),this.freeObject(t),this._gaussianTileHandles.delete(e)),this._updateGaussians()}freeObject(e){this._memCache.pop(`${e.handle}`)}get visibleAtCurrentScale(){return I(this.layer.effectiveScaleRange,this.view.scale)}setRenderableVisibility(e,t,s){for(let i=0;i<s;i++){if(!t[i])continue;const s=e[i],r=this._gaussianTileHandles.get(s);if(r){if(r.isVisible)continue;r.isVisible=!0,this._usedMemory+=r.usedMemory,this._cacheMemory-=r.usedMemory,this._memCache.pop(`${s}`)}}for(let i=0;i<s;i++){if(t[i])continue;const s=e[i],r=this._gaussianTileHandles.get(s);if(r){if(!r.isVisible)continue;r.isVisible=!1,this._usedMemory-=r.usedMemory,this._cacheMemory+=r.usedMemory,this._memCache.put(`${s}`,r)}}this._updateGaussians()}destroy(){b(this),this._suspendedHandle&&(this._suspendedHandle=s(this._suspendedHandle)),this._renderNode.destroy(),this._memCache.destroy()}_canProjectWithoutEngine(){if(1===this.view.state.viewingMode)return!0;if(u(this.view.renderSpatialReference)||d(this.view.renderSpatialReference))return!0;if(this.layer.esriCrsSpatialReference&&c(this.layer.esriCrsSpatialReference,this.view.renderSpatialReference)){const e=m(this.layer.esriCrsSpatialReference),t=this.view.heightModelInfo;return this._useEsriCrs=0===h(e,t,!1),this._useEsriCrs&&e&&(this._metersPerVCSUnit=a(1,\"meters\",e.heightUnit),this.fullExtentInLocalViewSpatialReference=this.layer.esriCrsFullExtent),this._useEsriCrs}return!1}_elevationInfoChanged(e){if(e?.offset)if(this._useEsriCrs){const t=p(e?.unit)/this._metersPerVCSUnit,s=e?.offset??0;this._wasm?.setLayerOffset(this,s*t)}else this._wasm?.setLayerOffset(this,f(e));else this._wasm?.setLayerOffset(this,0)}_updateGaussians(){const e=new Array;for(const t of this._gaussianTileHandles.values())t.isVisible&&e.push(t);this._data.updateGaussianVisibility(e),this.notifyChange(\"updating\")}_freeInvisibleTiles(){for(const e of this._gaussianTileHandles.values())e.isVisible||this._deleteTile(e)}get _data(){return this._renderNode.data}extractHeader(e){const t=e.length-4,s=this.reinterpretU32AsFloat(e[t]),i=this.reinterpretU32AsFloat(e[t+1]),r=this.reinterpretU32AsFloat(e[t+2]),a=1/(1<<(255&e[t+3]));return{packedHeader:e.subarray(t,t+4),tileOrigin:{x:s,y:i,z:r},invPosScale:a}}_deleteTile(e){this._wasm?.onRenderableEvicted(this,e.handle,e.usedMemory),this.freeRenderable(e.handle)}reinterpretU32AsFloat(e){return this._u32View[0]=e,this._f32View[0]}get performanceInfo(){let e=0,t=0;return this._gaussianTileHandles.forEach(s=>{s.isVisible?e++:t++}),new y(this.usedMemory,e,t,this.cachedMemory)}};e([n()],H.prototype,\"layer\",void 0),e([n()],H.prototype,\"fullExtentInLocalViewSpatialReference\",void 0),e([n({readOnly:!0})],H.prototype,\"visibleAtCurrentScale\",null),H=e([o(\"esri.views.3d.layers.GaussianSplatLayerView3D\")],H);const P=H;export{P as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{glsl as a}from\"../../shaderModules/glsl.js\";function c(c){c.code.add(a`void computeCovariance3D(in mat3 rotation, in vec3 scale, out vec3 covarianceA, out vec3 covarianceB) {\nmat3 scaleMatrix = mat3(\nvec3(scale.x, 0.0, 0.0),\nvec3(0.0, scale.y, 0.0),\nvec3(0.0, 0.0, scale.z)\n);\nmat3 M = scaleMatrix * rotation;\nmat3 covariance3D = transpose(M) * M;\ncovarianceA = vec3(covariance3D[0][0], covariance3D[0][1], covariance3D[0][2]);\ncovarianceB = vec3(covariance3D[1][1], covariance3D[1][2], covariance3D[2][2]);\n}\nvec3 computeCovariance2D(vec3 center, float focalLength, vec2 tanFov, float[6] cov3D, mat4 view) {\nvec4 viewSpacePoint = vec4(center, 1);\nvec2 max = 1.3 * tanFov;\nvec2 normalized = viewSpacePoint.xy / viewSpacePoint.z;\nviewSpacePoint.xy = clamp(normalized, -max, max) * viewSpacePoint.z;\nfloat invZ = 1.0 / viewSpacePoint.z;\nfloat invZSquared = invZ * invZ;\nmat3 projectionJacobian = mat3(\nfocalLength * invZ,  0.0,                   -(focalLength * viewSpacePoint.x) * invZSquared,\n0.0,                 focalLength * invZ,    -(focalLength * viewSpacePoint.y) * invZSquared,\n0.0,                 0.0,                   0.0\n);\nmat3 worldToView = transpose(mat3(view));\nmat3 T = worldToView * projectionJacobian;\nmat3 covariance3D = mat3(\ncov3D[0], cov3D[1], cov3D[2],\ncov3D[1], cov3D[3], cov3D[4],\ncov3D[2], cov3D[4], cov3D[5]\n);\nmat3 covariance2D = transpose(T) * transpose(covariance3D) * T;\nconst float regularization = 0.3;\ncovariance2D[0][0] += regularization;\ncovariance2D[1][1] += regularization;\nreturn vec3(covariance2D[0][0], covariance2D[0][1], covariance2D[1][1]);\n}`)}export{c as ComputeCovariance};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as o}from\"tslib\";import{makeHandle as t}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as r}from\"../../../core/reactiveUtils.js\";import{property as s}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{const n=l;let c=class extends n{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,s=o.signal;this.addHandles(t(()=>o.abort())),await r(()=>this.view.defaultsFromMap?.heightModelInfoReady,s),e(s);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([s()],c.prototype,\"view\",void 0),o([s()],c.prototype,\"slicePlaneEnabled\",void 0),c=o([i(\"esri.views.3d.layers.LayerView3D\")],c),c};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{glsl as o}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as r}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as s}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as t}from\"../views/webgl/ShaderBuilder.js\";class l extends s{}function a(){const s=new t;s.include(e);return s.fragment.uniforms.add(new r(\"colorTexture\",e=>e.color),new r(\"splatOutputColor\",e=>e.splatColor)),s.fragment.main.add(o`vec4 color = texture(colorTexture, uv);\nvec4 splatColor = texture(splatOutputColor, uv);\nfragColor = splatColor + color * (1.0 - splatColor.a);`),s}const n=Object.freeze(Object.defineProperty({__proto__:null,GaussianSplatCompositionPassParameters:l,build:a},Symbol.toStringTag,{value:\"Module\"}));export{l as G,n as S,a as b};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{__decorate as e}from\"tslib\";import{EventedAccessor as t}from\"../../core/Evented.js\";import{IdentifiableMixin as r}from\"../../core/Identifiable.js\";import i from\"../../core/Logger.js\";import{destroyMaybe as s}from\"../../core/maybe.js\";import{EsriPromiseMixin as n}from\"../../core/Promise.js\";import{property as l}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as o}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as a}from\"../../core/support/UpdatingHandles.js\";import{validateScaleRange as p}from\"../support/layerViewUtils.js\";let d=class extends(r(n(t))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new a,this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";i.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}})}destroy(){this._updatingHandles=s(this._updatingHandles),this._set(\"parent\",null)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&p(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return p(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([l({readOnly:!0})],d.prototype,\"spatialReferenceSupported\",null),e([l()],d.prototype,\"view\",void 0),e([l()],d.prototype,\"fullOpacity\",null),e([l()],d.prototype,\"layer\",void 0),e([l()],d.prototype,\"parent\",void 0),e([l({readOnly:!0})],d.prototype,\"suspended\",null),e([l({readOnly:!0})],d.prototype,\"suspendInfo\",null),e([l({readOnly:!0})],d.prototype,\"legendEnabled\",null),e([l({type:Boolean,readOnly:!0})],d.prototype,\"updating\",null),e([l({readOnly:!0})],d.prototype,\"updatingProgress\",null),e([l()],d.prototype,\"updateSuspended\",null),e([l()],d.prototype,\"visible\",null),e([l({readOnly:!0})],d.prototype,\"visibleAtCurrentScale\",null),e([l({readOnly:!0})],d.prototype,\"visibleAtCurrentTimeExtent\",null),d=e([o(\"esri.views.layers.LayerView\")],d);export{d as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{ScreenSpacePass as e}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{glsl as t}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Texture2DPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/Texture2DPassUniform.js\";import{NoParameters as r}from\"../views/webgl/NoParameters.js\";import{ShaderBuilder as a}from\"../views/webgl/ShaderBuilder.js\";class o extends r{}function p(){const r=new a;r.include(e);return r.fragment.uniforms.add(new s(\"splatOutputDepth\",e=>e.splatDepth)),r.fragment.main.add(t`vec4 splatDepth = texture(splatOutputDepth, uv);\nfloat ndcDepth = splatDepth.x;\nfloat depthCutOff = 0.75;\nif(splatDepth.a < depthCutOff) {\ndiscard;\n}\ngl_FragDepth = (ndcDepth + 1.0) * 0.5;`),r}const l=Object.freeze(Object.defineProperty({__proto__:null,GaussianSplatDepthCompositionPassParameters:o,build:p},Symbol.toStringTag,{value:\"Module\"}));export{o as G,l as S,p as b};\n"],"names":["x","g","constructor","super","arguments","this","totalGaussians","focalLength","minSplatRadius","minSplatOpacity","tanFov","e","cameraDelta","n","cameraPos8k","w","h","varyings","add","outputs","vertex","uniforms","f","splatOrder","splatAtlas","v","l","r","c","p","_ref","camera","viewport","_ref2","m","projectionMatrix","viewMatrix","s","eye","include","t","o","i","a","code","d","main","depthPass","fragment","u","y","Object","freeze","defineProperty","__proto__","GaussianSplatPassParameters","build","Symbol","toStringTag","value","Array","isArray","length","xmin","ymin","zmin","xmax","ymax","zmax","S","Map","heightModel","heightUnit","vertCRS","_","vcsWkid","latestVcsWkid","get","R","extensions","ESRI_crs","wkid","latestWkid","wkt","root","boundingVolume","box","sphere","E","undefined","b","transform","spatialReference","region","Math","sqrt","WGS84","push","Number","MAX_VALUE","cachedNodes","memoryMBCached","_pageCount","ceil","_bitset","Uint32Array","pageCount","isAllocated","allocate","free","findFirstFreePage","resize","min","set","subarray","_clearExcessBits","floor","fill","handle","obb","gaussianAtlasIndices","pageIds","positions","squaredScales","maxScale","isVisible","usedMemory","sort","distances","buffer","sortOrderIndices","strategy","invokeMethod","destroyWorkerAndSelf","broadcast","destroy","texture","_orderTextureCapacity","_rctx","ensureCapacity","dispose","_evalTextureSize","_orderBuffer","height","width","pixelFormat","dataType","UNSIGNED_INT","internalFormat","R32UI","wrapMode","samplingMode","setData","clear","_splatAtlasTextureHeight","_fboCache","pageAllocator","_cache","newCache","ensureTextureAtlas","pop","RGBA32UI","_updatePageAllocator","grow","parameters","maxPreferredTexturePixels","acquire","blitFramebuffer","fbo","detachColorTexture","requestPage","freePage","update","updateData","put","_updating","visibleGaussians","_visibleGaussianTiles","_workerHandle","_isSorting","_pendingSortTask","_bufferCapacity","_renderer","_orderTexture","renderingContext","_textureAtlas","view","resourceController","memoryController","fboCache","textureAtlas","orderTexture","visibleGaussianTiles","updateGaussianVisibility","requestSort","isUpdating","_sortOnWorker","then","_handleSortComplete","catch","_clearBuffersAndTextures","_ensureBufferCapacity","_atlasIndicesBuffer","_sortedAtlasIndicesBuffer","_distancesBuffer","Float64Array","_sortOrderBuffer","forEach","requestRender","numGaussians","preciseSort","sortedOrderIndices","qualitySettings","gaussianSplat","maxAllowedVisibleGaussians","initializePipeline","colorWrite","depthTest","depthWrite","func","drawBuffers","buffers","_createPipeline","blending","I","terrainDepthTest","cullAboveTerrain","occlusionPass","prototype","M","gaussianPosition","intersectionRayDir","intersectionPlane","_slicePlaneEnabled","_data","produces","C","OPAQUE","type","isGround","layerViewUid","_gaussianSplatParameters","D","_gaussianSplatCompositionParameters","T","_gaussianSplatDepthCompositionParameters","_splatTechniqueConfiguration","A","_splatDepthTechniqueConfiguration","_previousCameraPosition","_previousCameraDirection","_tanFov","_tempVec","_cameraDelta","_coarseCameraPosition","static","initialize","q","sceneIntersectionHelper","addIntersectionHandler","addHandles","state","_onCameraChange","precompile","bindParameters","techniques","G","j","render","find","name","compiled","fullWidth","fullHeight","attachDepth","getAttachment","V","bindFramebuffer","setClearColor","tan","fovY","minimumSplatPixelRadius","minimumOpacity","_prepareHighPrecisionCameraPosition","bindTechnique","drawArraysInstanced","TRIANGLE_STRIP","splatDepth","getTexture","screen","draw","color","splatColor","release","intersect","U","minimumDistancePlane","maximumDistancePlane","dist","center","radius","P","intersectRay","point","normal","options","store","F","results","distance","max","all","slicePlaneEnabled","data","ray","direction","abs","tileSize","getLogger","H","_gaussianTileHandles","_pageBuffer","_wasmLayerId","_metersPerVCSUnit","ignoresMemoryFactor","_usedMemory","_cacheMemory","_useEsriCrs","fullExtentInLocalViewSpatialReference","_suspendedHandle","_conversionBuffer","ArrayBuffer","_u32View","_f32View","Float32Array","_memCache","uid","_deleteTile","_renderNode","L","_canProjectWithoutEngine","layer","renderSpatialReference","elevationInfo","_elevationInfoChanged","suspended","_wasm","setEnabled","addResolvingPromise","wasmLayerId","metersPerVCSUnit","updatingFlagChanged","notifyChange","unloadedMemory","cachedMemory","useEsriCrs","createRenderable","meshData","Error","desc","JSON","parse","prims","vertexCount","atrbs","byteCount","byteOffset","warnOnce","memUsageBytes","extractHeader","_freeInvisibleTiles","packedHeader","tileOrigin","z","invPosScale","rawX","rawY","rawZ","_extractGaussianPosition","_extractGaussianSphericalScale","quaternion","halfSize","exp","freeRenderable","freeObject","delete","_updateGaussians","visibleAtCurrentScale","effectiveScaleRange","scale","setRenderableVisibility","viewingMode","esriCrsSpatialReference","heightModelInfo","esriCrsFullExtent","offset","unit","setLayerOffset","values","reinterpretU32AsFloat","onRenderableEvicted","performanceInfo","readOnly","supportsHeightUnitConversion","postscript","_validateHeightModelInfo","AbortController","signal","abort","defaultsFromMap","heightModelInfoReady","GaussianSplatCompositionPassParameters","spatialReferenceSupported","_updatingHandles","parent","when","id","title","error","_set","fullOpacity","opacity","destroyed","canResume","suspendInfo","getSuspendInfo","legendEnabled","updating","updatingProgress","updateSuspended","visible","_overrideIfSome","visibleAtCurrentTimeExtent","timeExtent","visibilityTimeExtent","intersection","isEmpty","loaded","ready","viewNotReady","layerNotLoaded","outsideScaleRange","outsideVisibilityTimeExtent","layerInvisible","Boolean","GaussianSplatDepthCompositionPassParameters"],"sourceRoot":""}