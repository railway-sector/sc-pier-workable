"use strict";(self.webpackChunksc_pier_workable=self.webpackChunksc_pier_workable||[]).push([[30416],{29201:(e,t,i)=>{i.d(t,{I:()=>_,a:()=>f,b:()=>g});var r=i(26917),s=i(59395),o=i(90080),n=i(94192),a=i(80883),c=i(3799),l=i(21390),p=i(86955),u=i(70367),d=i(91911),h=i(31432),v=i(2687);class f extends h.Y{}function g(e){const t=new v.N5,{vertex:i,fragment:h,varyings:f}=t,{output:g,perspectiveInterpolation:_}=e;return(0,c.NB)(i,e),t.include(s.d),t.include(n.Z,e),t.fragment.include(r.HQ,e),t.include(o.g,e),t.include(d.z,e),t.attributes.add("position","vec3"),t.attributes.add("uv0","vec2"),_&&t.attributes.add("perspectiveDivide","float"),i.main.add(p.H`
    vpos = position;
    forwardViewPosDepth((view * vec4(vpos, 1.0)).xyz);
    vTexCoord = uv0;
    gl_Position = transformPosition(proj, view, vpos);
    ${(0,p.If)(_,"gl_Position *= perspectiveDivide;")}`),f.add("vpos","vec3",{invariant:!0}),f.add("vTexCoord","vec2"),h.include(a.a),h.uniforms.add(new l.m("opacity",e=>e.opacity),new u.N("tex",e=>e.glTexture)).main.add(p.H`
    discardBySlice(vpos);
    discardByTerrainDepth();
    ${(0,p.If)(10===g,"fragColor = vec4(0, 0, 0, 1); return;")}
    vec4 finalColor = texture(tex, vTexCoord) * opacity;
    outputColorHighlightOID(finalColor, vpos, finalColor.rgb);`),t}const _=Object.freeze(Object.defineProperty({__proto__:null,ImageMaterialPassParameters:f,build:g},Symbol.toStringTag,{value:"Module"}))},30416:(e,t,i)=>{i.d(t,{r:()=>T});var r=i(88105),s=i(34981),o=i(59696),n=i(34812),a=i(45463),c=i(60322),l=i(86994),p=i(82809),u=i(63928),d=i(52757),h=i(16506),v=i(59246),f=i(96643),g=i(86401),_=i(29201),m=i(57162);class w extends v.w{constructor(e,t){super(e,t,new h.$(_.I,()=>i.e(48391).then(i.bind(i,48391))),x(t).locations)}_getPipelineState(e,t){const{oitPass:i,output:r,hasOccludees:o,cullFace:n}=e;return(0,m.Ey)({blending:(0,s.RN)(r)?(0,c.Yf)(i,!0):null,culling:(0,m.Xt)(n),depthTest:{func:(0,c.K_)(i)},depthWrite:(0,c.z5)(e),drawBuffers:(0,c.m6)(i,r),colorWrite:m.kn,stencilWrite:o?f.v0:null,stencilTest:o?t?f.a9:f.qh:null,polygonOffset:(0,c.mE)(e)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}function x(e){let t=g.l5;return e.perspectiveInterpolation&&(t=t.clone().f32("perspectiveDivide")),t}var P=i(6326),C=i(6485),b=i(92656);class y extends b.E{constructor(e){super(),this.draped=e,this.cullFace=0,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.terrainDepthTest=!1,this.cullAboveTerrain=!1,this.perspectiveInterpolation=!0,this.textureCoordinateType=0,this.emissionSource=0,this.discardInvisibleFragments=!0,this.occlusionPass=!1,this.olidColorInstanced=!1,this.snowCover=!1}}(0,P.Cg)([(0,C.W)({count:3})],y.prototype,"cullFace",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"enableOffset",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"writeDepth",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"hasOccludees",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"terrainDepthTest",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"cullAboveTerrain",void 0),(0,P.Cg)([(0,C.W)()],y.prototype,"perspectiveInterpolation",void 0);class T extends u.W{constructor(e){super(e,O),this.supportsEdges=!0,this.produces=new Map([[2,e=>(0,s.CL)(e)],[4,e=>(0,s._o)(e)&&this.parameters.writeDepth],[8,e=>(0,s._o)(e)&&!this.parameters.writeDepth],[18,e=>(0,s._o)(e)||(0,s.CL)(e)]]),this._configuration=new y(e.draped)}dispose(){this.setParameters({texture:void 0})}getConfiguration(e,t){return super.getConfiguration(e,t,this._configuration),this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=t.hasOccludees,this._configuration.oitPass=t.oitPass,this._configuration.enableOffset=t.camera.relativeElevation<c.xt,this._configuration.terrainDepthTest=t.terrainDepthTest,this._configuration.cullAboveTerrain=t.cullAboveTerrain,this._configuration.perspectiveInterpolation=this.parameters.perspectiveInterpolation,this._configuration}get visible(){return!0}createGLMaterial(e){return new D(e)}createBufferWriter(){return new I(x(this.parameters))}}class D extends o.A{constructor(e){super({...e,...e.material.parameters}),this.parameters=e;const t=this._material.parameters.texture;(0,n.y)(t)&&e.textures.updater.add(t)}dispose(){this.parameters.textures.updater.remove(this._material.parameters.texture)}beginSlot(e){return this.getTechnique(w,e)}}class I extends p.Z{write(e,t,i,s,o,n){for(const a of this.layout.fields.keys()){const s=i.get(a);if(s)if("perspectiveDivide"===a){(0,l.vA)(1===s.size);const e=o.getField(a,r.Y$);e&&(0,d.uO)(s,e,n)}else(0,d.Ap)(a,s,e,t,o,n)}return null}}class O extends a.q{constructor(e,t){super(),this.texture=e,this.draped=t,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=0,this.opacity=1,this.perspectiveInterpolation=!1}get glTexture(){return this.texture.glTexture}}},63928:(e,t,i)=>{i.d(t,{W:()=>o});var r=i(45463),s=i(48168);class o extends r.i{intersect(e,t,i,r,o,n){return(0,s.Uy)(e,i,r,o,void 0,n)}intersectDraped(e,t,i,r){return(0,s.gz)(i[0],i[1],e,r)}}},86401:(e,t,i)=>{i.d(t,{Ci:()=>s,KL:()=>a,dB:()=>n,l5:()=>o,wB:()=>c});var r=i(48549);const s=(0,r.BP)().vec3f("position").freeze(),o=(0,r.BP)().vec3f("position").vec2f16("uv0").freeze(),n=(0,r.BP)().vec3f("position").vec4u8("color").freeze(),a=(0,r.BP)().vec3f("position").vec2f("uv0").freeze(),c=(0,r.BP)().vec3f("position").vec2f("uv0").vec4u8("olidColor").freeze()}}]);
//# sourceMappingURL=30416.f65df4fe.chunk.js.map