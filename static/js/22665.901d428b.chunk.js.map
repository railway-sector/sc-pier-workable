{"version":3,"file":"static/js/22665.901d428b.chunk.js","mappings":"kVAIkhC,MAAMA,EAAE,uBAAuB,MAAMC,EAAEC,WAAAA,GAAcC,KAAKC,kBAAkB,KAAKD,KAAKE,aAAa,KAAKF,KAAKG,qBAAoB,CAAE,CAACC,OAAAA,GAAUJ,KAAKE,cAAcE,UAAUJ,KAAKE,aAAa,IAAI,CAAC,UAAMG,CAAKC,GAAO,IAALC,EAACC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,MAAMG,cAAcC,EAAEC,uBAAuBC,EAAEC,OAAOC,EAAEC,aAAaC,EAAEC,YAAYC,EAAEC,eAAeC,EAAEC,oBAAoBC,EAAEC,aAAaC,EAAEC,cAAcC,EAAEC,iBAAiBC,GAAGxB,GAAGyB,iBAAiBC,EAAEC,2BAA2BC,IAAGC,EAAAA,EAAAA,IAAEvB,EAAEQ,EAAEd,EAAEyB,kBAAkB,UAAUK,EAAAA,EAAAA,IAAEF,EAAEF,EAAE,CAAC,MAAM,MAAM,IAAIK,EAAAA,EAAE,yBAAyB,2BAA2B,CAACC,mBAAmBJ,EAAEK,oBAAoBP,GAAG,EAACQ,EAAAA,EAAAA,IAAEjC,GAAGP,KAAKC,kBAAkB6B,EAAE9B,KAAKyC,aAAarB,EAAEpB,KAAK0C,aAAaC,EAAAA,EAAEC,cAAc,CAAC7B,OAAOC,EAAE6B,wBAAwB7B,EAAE8B,KAAKxC,GAAG,sBAAsBA,EAAEyC,MAAM,CAACC,aAAaC,EAAAA,IAAG,OAAOjD,KAAKkD,cAAchC,EAAElB,KAAKmD,eAAevC,EAAEZ,KAAKoD,wBAAwBtC,EAAEd,KAAKqD,4BAA4BnB,EAAElC,KAAKsD,gBAAgBhC,EAAEtB,KAAKuD,qBAAqB/B,EAAExB,KAAKwD,cAAc9B,EAAE1B,KAAKyD,eAAe7B,EAAE5B,KAAK0D,kBAAkB1B,EAAE,IAAI2B,QAAQ3D,KAAK4D,kBAAkBrD,GAAG,GAAGoD,EAAEE,OAAOpD,OAAO,IAAIT,KAAKG,qBAAoB,EAAGwD,QAAQ3D,KAAK4D,kBAAkBrD,GAAGoD,EAAEE,OAAOpD,OAAO,GAAG,MAAMkD,EAAEE,OAAO,GAAG,MAAMhE,EAAE,CAACkD,KAAK,YAAYe,UAAUlC,GAAG,OAAO5B,KAAKE,aAAa,IAAI6D,EAAAA,GAAE,CAACC,YAAYhE,KAAK0C,aAAazB,aAAaC,EAAE+C,MAAK,EAAGC,MAAK,EAAGC,cAActE,EAAEkC,iBAAiBC,EAAEoC,SAAS,KAAKC,aAAa,IAAIC,EAAAA,EAAE,CAACrD,aAAaC,EAAE+C,MAAK,EAAGC,MAAK,MAAOlE,KAAKE,aAAamE,aAAaE,QAAQZ,EAAEa,UAAU,CAACC,SAASC,EAAEf,GAAGgB,cAAc3E,KAAKE,aAAa0E,0BAA0BC,WAAW,CAAC,gBAAMC,GAAa,MAAM,IAAIzC,EAAAA,EAAE,mCAAmC,4CAA4C,CAAC,mBAAM0C,GAAwB,IAAVzE,EAACE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAE6B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,aAAaR,KAAKgF,wBAAwBhF,KAAKE,aAAa+E,aAAa3E,EAAE+B,EAAE6C,OAAO,CAAC,uBAAMC,GAA4B,IAAV7E,EAACE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAE6B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,aAAaR,KAAKgF,wBAAwBhF,KAAKE,aAAakF,qBAAqB9E,EAAE+B,EAAE6C,OAAO,CAAC,oBAAMG,GAAyB,IAAV/E,EAACE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAE6B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAsC,aAA7BR,KAAKgF,+BAAqChF,KAAKE,aAAaoF,mBAAmBhF,EAAE+B,EAAE6C,SAASK,OAAO5B,EAAAA,GAAE,CAAC,iBAAM6B,GAAsB,IAAVlF,EAACE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAE6B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,aAAaR,KAAKgF,wBAAwBhF,KAAKE,aAAauF,sBAAsBnF,EAAE+B,EAAE6C,OAAO,CAAC,mBAAMQ,CAAcpF,GAAO,IAAL+B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,aAAaR,KAAKgF,8BAA8BhF,KAAKE,aAAayF,wBAAwBrF,EAAE+B,EAAE6C,OAAO,CAAC,wBAAMU,CAAmBtF,GAAO,IAAL+B,EAAC7B,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,CAAC,EAAG,aAAaR,KAAKgF,wBAAwBhF,KAAKE,aAAa2F,0BAA0BvF,EAAE+B,EAAE6C,OAAO,CAAC,aAAMY,CAAQzD,GAAG,OAAOrC,KAAKC,kBAAkBoC,EAAER,iBAAiB7B,KAAKsD,gBAAgBjB,EAAEhB,eAAerB,KAAKuD,qBAAqBlB,EAAEd,oBAAoBvB,KAAKwD,cAAcnB,EAAEZ,aAAazB,KAAK+F,eAAeC,QAAQhG,KAAK+F,eAAczF,EAAAA,EAAAA,IAAEA,GAAGN,KAAK4D,kBAAkB,CAACsB,OAAO5E,KAAKN,KAAK+F,cAAcE,QAAQC,KAAK5F,IAAIN,KAAKE,aAAamE,aAAa8B,QAAQnG,KAAKE,aAAamE,aAAaE,QAAQjE,EAAEkE,UAAU,IAAI,MAAMnC,KAAKqC,EAAEpE,GAAGC,EAAAA,EAAE6F,UAAUvG,GAAGwG,KAAK,IAAIrF,EAAAA,EAAE,4BAA4BqB,EAAEiE,QAAQjE,EAAEkE,UAAUjG,EAAEuD,QAAQpD,QAAQF,EAAAA,EAAE6F,UAAUvG,GAAGwG,KAAK,IAAIrF,EAAAA,EAAE,0BAA0B,gCAAgC,CAAC6C,OAAOvD,EAAEuD,WAAW,KAAK7D,KAAKE,aAAamE,aAAa8B,gBAAgBnG,KAAKgF,wBAAwB,CAACL,cAAc3E,KAAKE,aAAa0E,0BAA0BC,WAAW,CAAC,2BAAMG,GAAwB,GAAGhF,KAAK+F,gBAAgB/F,KAAK+F,cAAcS,SAAS,CAAC,UAAUxG,KAAK+F,cAAcE,OAAO,CAAC,MAAM,CAAC,OAAOjG,KAAKgF,uBAAuB,CAAC,CAAC,uBAAMpB,CAAkBtD,GAAG,MAAM+B,EAAE/B,GAAG4E,OAAO3E,EAAEP,KAAKuD,qBAAqBvC,EAAEhB,KAAKwD,cAActC,EAAElB,KAAKG,qBAAqBa,EAAE,QAAQgB,EAAAA,EAAAA,GAAEhC,KAAKmD,eAAenD,KAAKyC,aAAagE,SAAS,CAAC5E,iBAAiB7B,KAAKC,kBAAkBiF,OAAO7C,SAAI,EAAO,IAAIjB,EAAE,GAAG,MAAME,EAAE,GAAG,GAAG,MAAMJ,EAAE,IAAIE,QAAQpB,KAAK0G,aAAarE,EAAE,CAAC,MAAMiC,IAAGxD,EAAAA,EAAAA,IAAEwD,IAAIhD,EAAEqF,KAAKrC,EAAE,KAAK,CAAC,MAAMhE,EAAEsG,KAAKC,IAAI3F,EAAEX,GAAGiC,EAAs6C,UAAWlC,EAAE+B,EAAE9B,GAAG,IAAI,IAAIK,EAAE,EAAEA,EAAEyB,EAAEzB,UAAUN,EAAEwG,WAAWlG,EAAEL,EAAE,CAAj+CwG,CAAE/G,MAAKY,EAAAA,EAAAA,IAAEgG,KAAKI,KAAK1G,EAAEN,KAAKsD,iBAAiB,EAAEtC,GAAGqB,SAAS4E,QAAQC,WAAWC,MAAMC,KAAK,CAAC3G,OAAO,KAAK4G,IAAI,IAA03CC,eAAiBhH,EAAE+B,EAAE9B,GAAG,IAAIK,EAAEN,EAAEiH,OAAO,MAAM3G,EAAE4G,MAAM,CAAC,IAAI,MAAMlH,QAAQM,EAAE6G,MAAMpF,EAAEsE,QAAQrG,EAAE,CAAC,MAAMkC,IAAG1B,EAAAA,EAAAA,IAAE0B,IAAIjC,EAAEoG,KAAKnE,EAAE,CAAC5B,EAAEN,EAAEiH,MAAM,CAAC,CAAv/CG,CAAElF,EAAEpB,EAAEE,IAAI,CAAC,OAAOkB,EAAAA,EAAAA,IAAEH,GAAG,CAACmC,SAASpD,EAAEuG,iBAAiBzG,EAAEK,oBAAoBhB,EAAEkB,aAAaT,EAAE6C,OAAOvC,EAAE,CAAC,kBAAMoF,CAAapG,GAAG,MAAM+B,EAAEuF,OAAOC,SAAS7H,KAAKsD,kBAAkBtD,KAAKsD,gBAAgB,EAAEtD,KAAKsD,qBAAgB,EAAO/C,QAAQ2B,EAAAA,EAAAA,IAAElC,KAAKmD,eAAenD,KAAKyC,aAAagE,SAASzG,KAAKqD,4BAA4BrD,KAAKoD,wBAAwB,CAACvB,iBAAiB7B,KAAKC,kBAAkB6H,MAAMzF,EAAE6C,OAAO5E,IAAI,OAAON,KAAK+H,gBAAgBxH,EAAE,CAAC2E,OAAO5E,GAAG,CAAC,gBAAMwG,CAAWxG,EAAE+B,GAAG,MAAM9B,EAAED,EAAEN,KAAKsD,gBAAgB1C,QAAQsB,EAAAA,EAAAA,IAAElC,KAAKmD,eAAenD,KAAKyC,aAAagE,SAASzG,KAAKqD,4BAA4BrD,KAAKoD,wBAAwB,CAACvB,iBAAiB7B,KAAKC,kBAAkB+H,WAAWzH,EAAEuH,MAAM9H,KAAKsD,gBAAgB4B,OAAO7C,IAAI,OAAOrC,KAAK+H,gBAAgBnH,EAAE,CAACoH,WAAWzH,EAAE2E,OAAO7C,GAAG,CAAC0F,eAAAA,CAAgBzH,EAAE+B,IAAGX,EAAAA,EAAAA,IAAEpB,EAAEN,KAAKqD,4BAA4B4E,MAAM,MAAMD,WAAWzH,EAAE2E,OAAOtE,GAAGyB,GAAEG,EAAAA,EAAAA,IAAE5B,GAAG,MAAME,GAAEc,EAAAA,EAAAA,IAAEtB,EAAE,CAACW,aAAajB,KAAKkD,cAAcgB,MAAK,EAAGvC,cAAc3B,KAAKyD,iBAAiB,KAAIvC,EAAAA,EAAAA,IAAElB,KAAK0D,kBAAkB1D,KAAKqD,6BAA6B,IAAI,MAAMb,KAAK1B,EAAE,MAAM0B,EAAE0F,WAAW1F,EAAE0F,UAAS9G,EAAAA,EAAAA,KAAEI,EAAAA,EAAAA,KAAEF,EAAAA,EAAAA,IAAEkB,EAAE0F,SAASlI,KAAKkD,eAAc,GAAG,GAAIlD,KAAKqD,4BAA4BrD,KAAK0D,qBAAqB,IAAI1C,EAAET,GAAG,EAAE,IAAI,MAAMiC,KAAK1B,EAAE,CAAC,MAAMR,EAAE,CAAC,GAAEwB,EAAAA,EAAAA,IAAE9B,KAAK0C,aAAapC,EAAEkC,EAAE2F,YAAW,GAAI3F,EAAE2F,WAAW7H,EAAE,MAAMA,EAAEN,KAAKyD,kBAAkBjB,EAAE4F,SAAS9H,EAAEN,KAAKyD,gBAAgBzC,IAAI,CAAC,OAAOF,CAAC,EAAkM,SAAS4D,EAAEpE,GAAG,MAAM+B,EAAE,GAAG,OAAO,MAAM/B,EAAEqH,mBAAmBrH,EAAEkE,SAAS/D,OAAOH,EAAEqH,kBAAkBtF,EAAEsE,KAAK,CAAC0B,KAAK,mCAAmC/B,QAAQ,oBAAoBhG,EAAEkE,SAAS/D,aAAaH,EAAEqH,uBAAuBrH,EAAEmB,6EAA6E8E,QAAQ,CAAC+B,YAAYhI,EAAEkE,SAAS/D,OAAOkH,iBAAiBrH,EAAEqH,oBAAoBrH,EAAEqH,iBAAiBrH,EAAEiB,qBAAqBc,EAAEsE,KAAK,CAAC0B,KAAK,0BAA0B/B,QAAQ,iBAAiBhG,EAAEqH,4DAA4DrH,EAAEiB,uBAAuBgF,QAAQ,CAAC+B,YAAYhI,EAAEkE,SAAS/D,OAAOkH,iBAAiBrH,EAAEqH,iBAAiBpG,oBAAoBjB,EAAEiB,wBAAwBc,CAAC,C,uECA7vN,MAAYrB,EAAE,CAACuH,KAAK,EAAEC,KAAK,EAAEC,KAAK,EAAEC,KAAK,GAAiE,SAASpI,EAAEY,EAAEsB,EAAEd,IAA7E,SAAWR,GAAGF,EAAEuH,KAAKrH,EAAE,GAAGF,EAAEwH,KAAKtH,EAAE,GAAGF,EAAEyH,KAAKvH,EAAE,GAAGF,EAAE0H,KAAKxH,EAAE,EAAE,EAAmBmB,CAAEG,GAAGtB,EAAEyH,OAAO3H,EAAEU,EAAE,CAAC,MAAMZ,EAAEf,WAAAA,GAAcC,KAAK4I,eAAc,EAAG5I,KAAK6I,cAAc,GAAG7I,KAAK8I,YAAY,IAAIC,IAAI/I,KAAKgJ,YAAY,IAAID,IAAI/I,KAAKiJ,OAAO,IAAI/H,EAAAA,GAAE,GAAEgI,EAAAA,EAAAA,GAAI,yBAAyBhI,IAAC,CAAIqH,KAAKrH,EAAE,GAAGsH,KAAKtH,EAAE,GAAGuH,KAAKvH,EAAE,GAAGwH,KAAKxH,EAAE,KAAK,CAAC,MAAM,MAAM,MAAM,QAAQlB,KAAKmJ,WAAW,KAAK,GAAGnJ,KAAK4I,cAAc,CAAC,MAAM1H,EAAE,IAAIiG,MAAMnH,KAAKgJ,YAAYI,MAAM,IAAI5G,EAAE,EAAExC,KAAKgJ,YAAYK,QAAQ,CAAC3H,EAAEV,KAAKE,EAAEsB,KAAKxB,IAAIhB,KAAK4I,eAAc,EAAG5I,KAAKiJ,OAAO9C,QAAQnG,KAAKiJ,OAAO5I,KAAKa,EAAE,MAAMlB,KAAK6I,cAAcpI,SAAST,KAAKiJ,OAAO5I,KAAK8G,MAAMC,KAAK,IAAIkC,IAAItJ,KAAK6I,cAActD,OAAOrE,GAAGlB,KAAKgJ,YAAYE,IAAIhI,OAAOlB,KAAK6I,cAAcpI,OAAO,GAAG,CAAC,cAAI8I,GAAa,IAAIvJ,KAAK8I,YAAYM,KAAK,OAAO,KAAK,MAAMlI,GAAEsB,EAAAA,EAAAA,MAAI,IAAI,MAAMA,KAAKxC,KAAK8I,YAAYU,SAAShH,IAAItB,EAAE,GAAG0F,KAAKC,IAAIrE,EAAE,GAAGtB,EAAE,IAAIA,EAAE,GAAG0F,KAAKC,IAAIrE,EAAE,GAAGtB,EAAE,IAAIA,EAAE,GAAG0F,KAAK6C,IAAIjH,EAAE,GAAGtB,EAAE,IAAIA,EAAE,GAAG0F,KAAK6C,IAAIjH,EAAE,GAAGtB,EAAE,KAAK,OAAOA,CAAC,CAAC,SAAIwI,GAAQ,OAAO1J,KAAK4I,aAAa,CAACzC,KAAAA,GAAQnG,KAAK4I,eAAc,EAAG5I,KAAK6I,cAAcpI,OAAO,EAAET,KAAK8I,YAAY3C,QAAQnG,KAAKgJ,YAAY7C,QAAQnG,KAAKiJ,OAAO9C,OAAO,CAACwD,OAAOzI,GAAG,MAAMsB,EAAExC,KAAK8I,YAAYc,IAAI1I,GAAGlB,KAAK8I,YAAYa,OAAOzI,GAAGsB,IAAIxC,KAAKgJ,YAAYW,OAAOnH,GAAGxC,KAAK4I,eAAe5I,KAAKiJ,OAAOY,OAAOrH,GAAG,CAACsH,eAAAA,CAAgB5I,EAAEsB,GAAGxC,KAAKmJ,aAAa7I,EAAEN,KAAKiJ,OAAO/H,EAAEA,GAAGsB,EAAExC,KAAKgJ,YAAYY,IAAI1I,IAAI,CAAC0I,GAAAA,CAAI1I,GAAG,OAAOlB,KAAK8I,YAAYc,IAAI1I,EAAE,CAACgI,GAAAA,CAAIhI,GAAG,OAAOlB,KAAK8I,YAAYI,IAAIhI,EAAE,CAAC6I,eAAAA,GAAkB/J,KAAK4I,gBAAgB5I,KAAK4I,eAAc,EAAG5I,KAAK6I,cAAcpI,OAAO,EAAE,CAACuJ,GAAAA,CAAI9I,EAAEsB,GAAG,IAAIxC,KAAK4I,cAAc,CAAC,MAAMpG,EAAExC,KAAK8I,YAAYc,IAAI1I,GAAGsB,IAAIxC,KAAKiJ,OAAOY,OAAOrH,GAAGxC,KAAKgJ,YAAYW,OAAOnH,GAAG,CAACxC,KAAK8I,YAAYkB,IAAI9I,EAAEsB,GAAGA,IAAIxC,KAAKgJ,YAAYgB,IAAIxH,EAAEtB,GAAGlB,KAAK4I,gBAAgB5I,KAAK6I,cAAclC,KAAKnE,GAAGxC,KAAK6I,cAAcpI,OAA1tD,KAAouDT,KAAKmJ,cAAc,E,kDCAr3D,MAAM7I,EAAE,CAAC2J,YAAY5H,GAAGA,EAAE+F,SAAS8B,cAAc7H,GAAGA,EAAE8F,WAAWgC,aAAaA,CAAC9H,EAAE/B,IAAI+B,EAAE8F,WAAW7H,GAAG8J,kBAAkBA,CAAC9J,EAAEC,IAAI,IAAI8B,EAAAA,GAAE9B,EAAED,EAAE6H,WAAW,KAAK7H,EAAE8H,UAAUiC,YAAYhI,GAAGA,EAAE6F,SAASoC,YAAYA,CAACjI,EAAE/B,IAAI+B,EAAEkI,eAAejK,G,sHCA8B,MAAMgB,EAAEvB,WAAAA,CAAYsC,GAAGrC,KAAKwK,YAAYnI,EAAErC,KAAKyK,KAAK,IAAI,EAAE,MAAM7J,EAAEb,WAAAA,CAAYsC,GAAGrC,KAAK0K,SAAS,KAAK1K,KAAKoI,SAAS,KAAKpI,KAAK2K,SAAQ,EAAG3K,KAAK4K,SAAS,KAAK5K,KAAK6K,MAAM,IAAIvJ,EAAEe,EAAE,EAAE,SAAS0B,EAAE1B,GAAG,OAAO,IAAIzB,EAAEyB,EAAE,CAAC,MAAMiC,EAAEvE,WAAAA,CAAYsC,GAAGrC,KAAK0K,SAAS,KAAK1K,KAAK2K,SAAQ,EAAG3K,KAAKoI,SAASpI,KAAK4K,SAASvI,CAAC,EAAE,SAASP,EAAEO,GAAG,OAAO,IAAIiC,EAAEjC,EAAE,CAAC,MAAMT,EAAE,IAAI0H,IAAI,SAAS5H,EAAEW,EAAE/B,EAAEQ,GAAO,IAAL0B,EAAChC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAKoB,EAAEuE,QAAQ,IAAI,MAAMjF,KAAKJ,EAAE,CAAC,MAAMM,EAAEiB,EAAEuH,IAAI1I,GAAG,IAAIE,EAAE,SAAS,MAAME,EAAEE,EAAEJ,EAAEN,EAAEI,IAAI,GAAGU,EAAEkJ,IAAI1J,EAAEiH,MAAMjH,IAAIoB,GAAGpB,EAAE2J,UAAU,CAAC,MAAM1I,GAAErB,EAAAA,EAAAA,IAAEI,EAAEE,GAAG,GAAGe,EAAE,OAAO0B,GAAExD,EAAAA,EAAAA,IAAE8B,EAAEjB,EAAEE,IAAIhB,EAAEc,EAAEiH,MAAM/G,CAAC,CAAC,CAAC,IAAI,MAAMN,KAAKqB,EAAE2I,gBAAgB,GAAG,IAAIpJ,EAAEsH,IAAIlI,EAAEqH,MAAM,OAAOtE,EAAE,2BAA2B/C,EAAEqH,SAAS,OAAO,IAAI,CAAC,SAAS7G,EAAElB,EAAEU,GAAG,IAAIT,EAAES,EAAE,OAAOF,EAAAA,EAAAA,IAAER,IAAI,iBAAiBU,EAAET,EAAE0K,WAAWjK,IAAGwB,EAAAA,EAAAA,IAAElC,IAAI,MAAMU,GAAG,iBAAiBA,EAAET,EAAE2K,OAAOlK,IAAGE,EAAAA,EAAAA,IAAEZ,IAAI,iBAAiBU,IAAIT,GAAE8B,EAAAA,EAAAA,IAAErB,KAAII,EAAAA,EAAAA,IAAEb,EAAE,CAAC,IAAI4B,EAAE,SAASC,EAAEC,EAAErB,GAAG,IAAIqB,KAAI/B,EAAAA,EAAAA,IAAEU,GAAG,OAAOqB,EAAE,GAAG,UAAUA,GAAG,UAAUA,EAAE,CAAC,GAAG,MAAMF,EAAE,MAAM,IAAIgJ,UAAU,8BAA8B,OAAOhJ,EAAEiJ,SAASpK,EAAEqB,EAAE,CAAC,OAAOA,CAAC,CAAqGiF,eAAe5C,EAAErC,EAAErB,KAAIV,EAAAA,EAAAA,IAAE+B,IAAI,wBAAwBrB,GAAG,yBAAyBA,SAArLsG,iBAAmB,OAAO,MAAMnF,IAAIA,QAAQ,0DAAsDA,CAAC,CAA2FkJ,EAAG,CAAC,MAAMvL,EAAE,CAACwL,yBAAwB,EAAGC,0BAAyB,EAAGC,4BAA2B,EAAGC,iBAAgB,EAAGC,iBAAgB,EAAGC,iBAAgB,EAAGC,uBAAsB,EAAGC,wBAAwB,CAAC,QAAQ,MAAM,MAAM,MAAM,SAAS,MAAM,MAAM,kBAAkB,kBAAkB,oBAAoB,oBAAoB,uBAAuBC,4BAA4B,CAAC,QAAQ,MAAM,aAAa,iBAAiB,c,oJCAnwC,MAAMtK,GAAEN,EAAAA,EAAAA,MAAI,MAAMY,EAAE/B,WAAAA,CAAYO,GAAGN,KAAK+L,aAAazL,EAAEN,KAAKgM,aAAa,IAAIpL,EAAAA,EAAEZ,KAAKiM,cAAc,IAAIlD,IAAI/I,KAAKkM,YAAY,EAAElM,KAAKmM,OAAO,IAAI5L,EAAAA,GAAEP,KAAKoM,eAAehK,EAAAA,CAAC,CAAC,cAAIiK,GAAa,OAAOrM,KAAKkM,WAAW,CAAC,gBAAIjL,GAAe,OAAOjB,KAAK+L,aAAa9K,YAAY,CAAC,QAAIgD,GAAO,OAAOjE,KAAK+L,aAAa9H,IAAI,CAAC,QAAIC,GAAO,OAAOlE,KAAK+L,aAAa7H,IAAI,CAAC,eAAIoI,GAAc,OAAOtM,KAAKiM,cAAc7C,IAAI,CAAC,cAAIG,GAAa,OAAOvJ,KAAKgM,aAAazC,UAAU,CAAC,mBAAIgD,GAAkB,IAAIjM,EAAE,EAAE,OAAON,KAAKiM,cAAc5C,QAAQhH,IAAI,MAAMA,EAAE6F,UAAU7F,EAAE6F,SAASsE,SAASlM,GAAG+B,EAAE6F,SAASsE,OAAO/L,UAAU,CAACgM,aAAazM,KAAKiM,cAAc7C,KAAKsD,YAAYpM,GAAGN,KAAKkE,KAAKlE,KAAKiE,KAAK,EAAE,EAAEjE,KAAKiE,KAAK,EAAE,GAAG,CAAC0I,aAAAA,CAAcrM,GAAG,GAAG,MAAMN,KAAKuJ,WAAW,OAAO,KAAK,MAAMlH,EAAE9B,EAAEiC,EAAE1B,GAAGd,KAAKuJ,WAAW,MAAM,CAACqD,KAAKvK,EAAEwK,KAAKtM,EAAEuM,KAAKtK,EAAEuK,KAAKjM,EAAEiB,kBAAiBL,EAAAA,EAAAA,IAAEpB,GAAG,CAACwK,GAAAA,CAAIxK,GAAGN,KAAKgN,KAAK1M,GAAGN,KAAKiN,cAAc,CAAC1I,OAAAA,CAAQjE,GAAG,IAAI,MAAM+B,KAAK/B,EAAEN,KAAKgN,KAAK3K,GAAGrC,KAAKiN,cAAc,CAACC,UAAAA,CAAW7K,GAAG,MAAM9B,EAAE8B,EAAEgF,IAAI/G,GAAGN,KAAKmN,QAAQ7M,IAAI,OAAON,KAAKiN,eAAe1M,EAAEgF,OAAOjF,EAAAA,GAAE,CAAC6F,KAAAA,GAAQnG,KAAKiM,cAAc9F,QAAQnG,KAAKgM,aAAa7F,QAAQnG,KAAKiN,eAAejN,KAAKkM,YAAY,CAAC,CAACkB,UAAAA,CAAW9M,GAAG,MAAM+B,EAAErC,KAAKiM,cAAcrC,IAAItJ,GAAG,OAAO+B,GAAGrC,KAAKqN,QAAQhL,GAAGrC,KAAKiN,eAAe5K,GAAG,IAAI,CAACiL,cAAAA,CAAehN,GAAGN,KAAKgM,aAAajC,kBAAkB,IAAI,MAAM1H,KAAK/B,EAAE,CAAC,MAAMA,EAAEN,KAAKiM,cAAcrC,IAAIvH,GAAG/B,GAAGN,KAAKqN,QAAQ/M,EAAE,CAACN,KAAKiN,cAAc,CAACM,aAAAA,CAAcjN,EAAE+B,GAAG,IAAI,MAAM9B,KAAKD,EAAE,CAAC,MAAMA,EAAEN,KAAKgM,aAAapC,IAAIrJ,EAAE6H,UAAU9H,GAAG+B,GAAEvB,EAAAA,EAAAA,IAAEU,EAAElB,GAAG,CAAC,CAACkN,UAAAA,CAAWlN,GAAG,OAAON,KAAKiM,cAAcrC,IAAItJ,EAAE,CAAC4I,GAAAA,CAAI5I,GAAG,OAAON,KAAKiM,cAAc/C,IAAI5I,EAAE,CAAC+I,OAAAA,CAAQ/I,GAAGN,KAAKiM,cAAc5C,QAAQhH,GAAG/B,EAAE+B,GAAG,CAACyH,eAAAA,CAAgBxJ,EAAE+B,GAAGrC,KAAKgM,aAAalC,gBAAgBxJ,EAAEA,IAAI+B,EAAErC,KAAKiM,cAAcrC,IAAItJ,KAAK,CAAC2M,YAAAA,GAAejN,KAAKmM,OAAOsB,KAAK,eAAU,EAAO,CAACT,IAAAA,CAAK1M,GAAG,IAAIA,EAAE,OAAO,MAAMC,EAAED,EAAE8H,SAAS,GAAG,MAAM7H,EAAE,YAAYiC,EAAAA,EAAE4D,UAAU,0CAA0CyE,MAAM,IAAIxI,EAAAA,EAAE,+BAA+B,wBAAwB,CAACqL,QAAQpN,KAAK,MAAMQ,EAAEd,KAAKiM,cAAcrC,IAAIrJ,GAAG,IAAIW,EAAE,GAAGJ,GAAGR,EAAEqN,UAAU7M,EAAE6M,UAAUzM,EAAElB,KAAKgM,aAAapC,IAAIrJ,GAAGP,KAAKgM,aAAarC,OAAOpJ,GAAGP,KAAKkM,aAAalM,KAAK4N,4BAA4B9M,IAAI,GAAG,MAAMd,KAAK6N,cAAc7N,KAAK6N,aAAavN,IAAIA,EAAE4H,UAAUsE,QAAQ/L,OAAO,OAAOT,KAAKgM,aAAahC,IAAIzJ,EAAE,WAAWP,KAAKiM,cAAcjC,IAAIzJ,EAAED,GAAGY,GAAEE,EAAAA,EAAAA,IAAE,MAAMF,EAAEA,GAAEF,EAAAA,EAAAA,MAAIV,EAAE4H,SAASlI,KAAK+L,aAAa7H,KAAKlE,KAAK+L,aAAa9H,MAAM,MAAM/C,GAAGlB,KAAKgM,aAAahC,IAAIzJ,EAAEW,GAAGlB,KAAKiM,cAAcjC,IAAIzJ,EAAED,GAAGN,KAAKkM,aAAalM,KAAK4N,4BAA4BtN,IAAI,CAAC,CAAC6M,OAAAA,CAAQ7M,GAAG,MAAMC,EAAED,GAAG8H,SAAS,GAAG,MAAM7H,EAAE,OAAOiC,EAAAA,EAAE4D,UAAU,0CAA0CyE,MAAM,IAAIxI,EAAAA,EAAE,+BAA+B,wBAAwB,CAACqL,QAAQpN,KAAK,KAAK,MAAMQ,EAAEd,KAAKiM,cAAcrC,IAAIrJ,GAAG,IAAIO,EAAE,OAAOd,KAAKgN,KAAK1M,GAAGA,EAAEN,KAAKkM,aAAalM,KAAK4N,4BAA4B9M,IAAI,EAAE,MAAMoH,SAAShH,EAAEiH,WAAWvH,GAAGN,EAAE,IAAI,MAAM+B,KAAKzB,EAAEE,EAAEqH,WAAW9F,GAAGzB,EAAEyB,GAAG,OAAOnB,IAAIJ,EAAEoH,SAAShH,EAAElB,KAAKgM,aAAahC,IAAIzJ,GAAEa,EAAAA,EAAAA,KAAEJ,EAAAA,EAAAA,MAAIE,EAAElB,KAAK+L,aAAa7H,KAAKlE,KAAK+L,aAAa9H,OAAO,OAAOjE,KAAKkM,aAAalM,KAAK4N,4BAA4B9M,IAAI,EAAEA,CAAC,CAACuM,OAAAA,CAAQ/M,GAAG,MAAMN,KAAK8N,iBAAiB9N,KAAK8N,gBAAgBxN,GAAG,MAAM+B,EAAE/B,EAAE8H,SAAS,OAAOpI,KAAKgM,aAAarC,OAAOtH,GAAGrC,KAAKiM,cAActC,OAAOtH,GAAGrC,KAAKkM,aAAalM,KAAK4N,4BAA4BtN,IAAI,EAAEA,CAAC,E","sources":["../node_modules/@arcgis/core/layers/graphics/sources/WFSSourceWorker.js","../node_modules/@arcgis/core/layers/graphics/data/BoundsStore.js","../node_modules/@arcgis/core/layers/graphics/data/optimizedFeatureQueryEngineAdapter.js","../node_modules/@arcgis/core/layers/graphics/sources/support/sourceUtils.js","../node_modules/@arcgis/core/layers/graphics/data/FeatureStore.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{createTask as e}from\"../../../core/asyncUtils.js\";import t from\"../../../core/Error.js\";import r from\"../../../core/Logger.js\";import{clamp as a}from\"../../../core/mathUtils.js\";import{throwIfAborted as s,isAbortError as o}from\"../../../core/promiseUtils.js\";import n from\"../../../core/Warning.js\";import{equals as i}from\"../../../geometry/support/spatialReferenceUtils.js\";import{convertFromGeometry as u,convertToGeometry as l}from\"../featureConversionUtils.js\";import c from\"../data/FeatureStore.js\";import{checkProjectionSupport as h,project as m}from\"../data/projectionSupport.js\";import{QueryEngine as p}from\"../data/QueryEngine.js\";import{validateGeoJSON as d,createOptimizedFeatures as g}from\"./geojson/geojson.js\";import{mixAttributes as f}from\"./support/sourceUtils.js\";import{getGetFeatureSpatialReference as y,getFeatureCount as _,getFeature as x}from\"../../ogc/wfsUtils.js\";import C from\"../../support/FieldsIndex.js\";import{isNumber as w}from\"../../../support/guards.js\";import{utc as R}from\"../../../time/constants.js\";const F=\"esri.layers.WFSLayer\";class S{constructor(){this._customParameters=null,this._queryEngine=null,this._supportsPagination=!0}destroy(){this._queryEngine?.destroy(),this._queryEngine=null}async load(e,r={}){const{getFeatureUrl:a,getFeatureOutputFormat:o,fields:n,geometryType:i,featureType:u,maxRecordCount:l,maxTotalRecordCount:m,maxPageCount:d,objectIdField:g,customParameters:f}=e,{spatialReference:_,getFeatureSpatialReference:x}=y(a,u,e.spatialReference);try{await h(x,_)}catch{throw new t(\"unsupported-projection\",\"Projection not supported\",{inSpatialReference:x,outSpatialReference:_})}s(r),this._customParameters=f,this._featureType=u,this._fieldsIndex=C.fromLayerJSON({fields:n,dateFieldsTimeReference:n.some(e=>\"esriFieldTypeDate\"===e.type)?{timeZoneIANA:R}:null}),this._geometryType=i,this._getFeatureUrl=a,this._getFeatureOutputFormat=o,this._getFeatureSpatialReference=x,this._maxRecordCount=l,this._maxTotalRecordCount=m,this._maxPageCount=d,this._objectIdField=g,this._spatialReference=_;let w=await this._snapshotFeatures(r);if(w.errors.length>0&&(this._supportsPagination=!1,w=await this._snapshotFeatures(r),w.errors.length>0))throw w.errors[0];const F={type:\"object-id\",fieldName:g};return this._queryEngine=new p({fieldsIndex:this._fieldsIndex,geometryType:i,hasM:!1,hasZ:!1,featureIdInfo:F,spatialReference:_,timeInfo:null,featureStore:new c({geometryType:i,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(w.features),{warnings:E(w),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new t(\"wfs-source:editing-not-supported\",\"applyEdits() is not supported on WFSLayer\")}async queryFeatures(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(e,t.signal)}async queryFeatureCount(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(e,t.signal)}async queryObjectIds(e={},t={}){await this._waitSnapshotComplete();return(await this._queryEngine.executeQueryForIds(e,t.signal)).filter(w)}async queryExtent(e={},t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(e,t.signal)}async querySnapping(e,t={}){return await this._waitSnapshotComplete(),await this._queryEngine.executeQueryForSnapping(e,t.signal)}async queryAttributeBins(e,t={}){return await this._waitSnapshotComplete(),this._queryEngine.executeAttributeBinsQuery(e,t.signal)}async refresh(t){return this._customParameters=t.customParameters,this._maxRecordCount=t.maxRecordCount,this._maxTotalRecordCount=t.maxTotalRecordCount,this._maxPageCount=t.maxPageCount,this._snapshotTask?.abort(),this._snapshotTask=e(e=>this._snapshotFeatures({signal:e})),this._snapshotTask.promise.then(e=>{this._queryEngine.featureStore.clear(),this._queryEngine.featureStore.addMany(e.features);for(const t of E(e))r.getLogger(F).warn(new n(\"wfs-layer:refresh-warning\",t.message,t.details));e.errors?.length&&r.getLogger(F).warn(new n(\"wfs-layer:refresh-error\",\"Refresh completed with errors\",{errors:e.errors}))},()=>{this._queryEngine.featureStore.clear()}),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures(e){const t=e?.signal,r=this._maxTotalRecordCount,n=this._maxPageCount,i=this._supportsPagination&&n>1?await _(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:t}):void 0;let u=[];const l=[];if(null==i)try{u=await this._singleQuery(t)}catch(c){o(c)||l.push(c)}else{const e=Math.min(i,r),s=T(this,a(Math.ceil(e/this._maxRecordCount),1,n),t);await Promise.allSettled(Array.from({length:10}).map(()=>j(s,u,l)))}return s(t),{features:u,totalRecordCount:i,maxTotalRecordCount:r,maxPageCount:n,errors:l}}async _singleQuery(e){const t=Number.isFinite(this._maxRecordCount)&&this._maxRecordCount>0?this._maxRecordCount:void 0,r=await x(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,count:t,signal:e});return this._processGeoJSON(r,{signal:e})}async _pageQuery(e,t){const r=e*this._maxRecordCount,a=await x(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,startIndex:r,count:this._maxRecordCount,signal:t});return this._processGeoJSON(a,{startIndex:r,signal:t})}_processGeoJSON(e,t){d(e,this._getFeatureSpatialReference.wkid);const{startIndex:r,signal:a}=t;s(a);const o=g(e,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!i(this._spatialReference,this._getFeatureSpatialReference))for(const s of o)null!=s.geometry&&(s.geometry=u(m(l(s.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));let n=r??1;for(const s of o){const e={};f(this._fieldsIndex,e,s.attributes,!0),s.attributes=e,null==e[this._objectIdField]&&(s.objectId=e[this._objectIdField]=n++)}return o}}function*T(e,t,r){for(let a=0;a<t;a++)yield e._pageQuery(a,r)}async function j(e,t,r){let a=e.next();for(;!a.done;){try{const e=await a.value;t.push(...e)}catch(s){o(s)||r.push(s)}a=e.next()}}function E(e){const t=[];return null!=e.totalRecordCount&&(e.features.length<e.totalRecordCount&&t.push({name:\"wfs-layer:maxRecordCount-too-low\",message:`Could only fetch ${e.features.length} of ${e.totalRecordCount} in ${e.maxPageCount} queries. Try increasing the value of WFSLayer.maxRecordCount.`,details:{recordCount:e.features.length,totalRecordCount:e.totalRecordCount}}),e.totalRecordCount>e.maxTotalRecordCount&&t.push({name:\"wfs-layer:large-dataset\",message:`The number of ${e.totalRecordCount} features exceeds the maximum allowed of ${e.maxTotalRecordCount}.`,details:{recordCount:e.features.length,totalRecordCount:e.totalRecordCount,maxTotalRecordCount:e.maxTotalRecordCount}})),t}export{S as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport has from\"../../../core/has.js\";import{PooledRBush as i}from\"../../../core/libs/rbush/PooledRBush.js\";import{empty as s}from\"../../../geometry/support/aaBoundingRect.js\";const d=5e4,n={minX:0,minY:0,maxX:0,maxY:0};function t(i){n.minX=i[0],n.minY=i[1],n.maxX=i[2],n.maxY=i[3]}function e(i,s,d){t(s),i.search(n,d)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new i(9,has(\"esri-csp-restrictions\")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):[\"[0]\",\"[1]\",\"[2]\",\"[3]\"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let s=0;this._idByBounds.forEach((d,n)=>{i[s++]=n}),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(i=>this._idByBounds.has(i))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=s();for(const s of this._boundsById.values())s&&(i[0]=Math.min(s[0],i[0]),i[1]=Math.min(s[1],i[1]),i[2]=Math.max(s[2],i[2]),i[3]=Math.max(s[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const s=this._boundsById.get(i);this._boundsById.delete(i),s&&(this._idByBounds.delete(s),this._indexInvalid||this._index.remove(s))}forEachInBounds(i,s){this._loadIndex(),e(this._index,i,i=>s(this._idByBounds.get(i)))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,s){if(!this._indexInvalid){const s=this._boundsById.get(i);s&&(this._index.remove(s),this._idByBounds.delete(s))}this._boundsById.set(i,s),s&&(this._idByBounds.set(s,i),this._indexInvalid||(this._boundsToLoad.push(s),this._boundsToLoad.length>d&&this._loadIndex()))}}export{o as BoundsStore};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{OptimizedFeature as t}from\"../OptimizedFeature.js\";const e={getObjectId:t=>t.objectId,getAttributes:t=>t.attributes,getAttribute:(t,e)=>t.attributes[e],cloneWithGeometry:(e,r)=>new t(r,e.attributes,null,e.objectId),getGeometry:t=>t.geometry,getCentroid:(t,e)=>t.ensureCentroid(e)};export{e as optimizedFeatureQueryEngineAdapter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{parseDate as t}from\"../../../../core/date.js\";import{isValid as e}from\"../../../../geometry/support/spatialReferenceUtils.js\";import{validateFieldValue as n,validationErrorToString as r,isNumericField as o,isStringField as s,isDateField as i,sanitizeNullFieldValue as u}from\"../../../support/fieldUtils.js\";class l{constructor(t){this.description=t,this.code=null}}class a{constructor(t){this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error=new l(t)}}function p(t){return new a(t)}class c{constructor(t){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=t}}function f(t){return new c(t)}const g=new Set;function d(t,e,o,s=!1){g.clear();for(const i in o){const u=t.get(i);if(!u)continue;const l=m(u,o[i]);if(g.add(u.name),u&&(s||u.editable)){const t=n(u,l);if(t)return p(r(t,u,l));e[u.name]=l}}for(const n of t.requiredFields??[])if(!g.has(n.name))return p(`missing required field \"${n.name}\"`);return null}function m(e,n){let r=n;return o(e)&&\"string\"==typeof n?r=parseFloat(n):s(e)&&null!=n&&\"string\"!=typeof n?r=String(n):i(e)&&\"string\"==typeof n&&(r=t(n)),u(r)}let y;function h(t,n){if(!t||!e(n))return t;if(\"rings\"in t||\"paths\"in t){if(null==y)throw new TypeError(\"geometry engine not loaded\");return y.simplify(n,t)}return t}async function I(){return null==y&&(y=await import(\"../../../../geometry/geometryEngineJSON.js\")),y}async function E(t,n){!e(t)||\"esriGeometryPolygon\"!==n&&\"esriGeometryPolyline\"!==n||await I()}const S={supportsAutoIntervalBin:!0,supportsFixedIntervalBin:!0,supportsFixedBoundariesBin:!0,supportsDateBin:!0,supportsStackBy:!0,supportsSplitBy:!0,supportsNormalization:!0,supportedStatisticTypes:[\"COUNT\",\"SUM\",\"AVG\",\"VAR\",\"STDDEV\",\"MIN\",\"MAX\",\"PERCENTILE_CONT\",\"PERCENTILE_DISC\",\"CentroidAggregate\",\"EnvelopeAggregate\",\"ConvexHullAggregate\"],supportedNormalizationTypes:[\"field\",\"log\",\"naturalLog\",\"percentOfTotal\",\"squareRoot\"]};export{p as createFeatureEditErrorResult,f as createFeatureEditSuccessResult,E as loadGeometryEngineForSimplify,d as mixAttributes,S as queryBinsCapabilities,h as simplify};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.34/esri/copyright.txt for details.\n*/\nimport{isSome as e}from\"../../../core/arrayUtils.js\";import t from\"../../../core/Error.js\";import{EventEmitter as r}from\"../../../core/Evented.js\";import s from\"../../../core/Logger.js\";import{fromRect as o,create as i}from\"../../../geometry/support/aaBoundingBox.js\";import{create as n}from\"../../../geometry/support/aaBoundingRect.js\";import{getBoundsOptimizedGeometry as u}from\"../featureConversionUtils.js\";import{BoundsStore as a}from\"./BoundsStore.js\";import{cleanFromGeometryEngine as d}from\"./geometryUtils.js\";import{optimizedFeatureQueryEngineAdapter as h}from\"./optimizedFeatureQueryEngineAdapter.js\";const m=i();class f{constructor(e){this.geometryInfo=e,this._boundsStore=new a,this._featuresById=new Map,this._usedMemory=0,this.events=new r,this.featureAdapter=h}get usedMemory(){return this._usedMemory}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let e=0;return this._featuresById.forEach(t=>{null!=t.geometry&&t.geometry.coords&&(e+=t.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:e/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(e){if(null==this.fullBounds)return null;const[t,r,s,o]=this.fullBounds;return{xmin:t,ymin:r,xmax:s,ymax:o,spatialReference:d(e)}}add(e){this._add(e),this._emitChanged()}addMany(e){for(const t of e)this._add(t);this._emitChanged()}upsertMany(t){const r=t.map(e=>this._upsert(e));return this._emitChanged(),r.filter(e)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged(),this._usedMemory=0}removeById(e){const t=this._featuresById.get(e);return t?(this._remove(t),this._emitChanged(),t):null}removeManyById(e){this._boundsStore.invalidateIndex();for(const t of e){const e=this._featuresById.get(t);e&&this._remove(e)}this._emitChanged()}forEachBounds(e,t){for(const r of e){const e=this._boundsStore.get(r.objectId);e&&t(o(m,e))}}getFeature(e){return this._featuresById.get(e)}has(e){return this._featuresById.has(e)}forEach(e){this._featuresById.forEach(t=>e(t))}forEachInBounds(e,t){this._boundsStore.forEachInBounds(e,e=>{t(this._featuresById.get(e))})}_emitChanged(){this.events.emit(\"changed\",void 0)}_add(e){if(!e)return;const r=e.objectId;if(null==r)return void s.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new t(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:e}));const o=this._featuresById.get(r);let i;if(o?(e.displayId=o.displayId,i=this._boundsStore.get(r),this._boundsStore.delete(r),this._usedMemory-=this.estimateFeatureUsedMemory?.(o)??0):null!=this.onFeatureAdd&&this.onFeatureAdd(e),!e.geometry?.coords?.length)return this._boundsStore.set(r,null),void this._featuresById.set(r,e);i=u(null!=i?i:n(),e.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=i&&this._boundsStore.set(r,i),this._featuresById.set(r,e),this._usedMemory+=this.estimateFeatureUsedMemory?.(e)??0}_upsert(e){const r=e?.objectId;if(null==r)return s.getLogger(\"esri.layers.graphics.data.FeatureStore\").error(new t(\"featurestore:invalid-feature\",\"feature id is missing\",{feature:e})),null;const o=this._featuresById.get(r);if(!o)return this._add(e),e;this._usedMemory-=this.estimateFeatureUsedMemory?.(o)??0;const{geometry:i,attributes:a}=e;for(const t in a)o.attributes[t]=a[t];return i&&(o.geometry=i,this._boundsStore.set(r,u(n(),i,this.geometryInfo.hasZ,this.geometryInfo.hasM)??null)),this._usedMemory+=this.estimateFeatureUsedMemory?.(o)??0,o}_remove(e){null!=this.onFeatureRemove&&this.onFeatureRemove(e);const t=e.objectId;return this._boundsStore.delete(t),this._featuresById.delete(t),this._usedMemory-=this.estimateFeatureUsedMemory?.(e)??0,e}}export{f as default};\n"],"names":["F","S","constructor","this","_customParameters","_queryEngine","_supportsPagination","destroy","load","e","r","arguments","length","undefined","getFeatureUrl","a","getFeatureOutputFormat","o","fields","n","geometryType","i","featureType","u","maxRecordCount","l","maxTotalRecordCount","m","maxPageCount","d","objectIdField","g","customParameters","f","spatialReference","_","getFeatureSpatialReference","x","y","h","t","inSpatialReference","outSpatialReference","s","_featureType","_fieldsIndex","C","fromLayerJSON","dateFieldsTimeReference","some","type","timeZoneIANA","R","_geometryType","_getFeatureUrl","_getFeatureOutputFormat","_getFeatureSpatialReference","_maxRecordCount","_maxTotalRecordCount","_maxPageCount","_objectIdField","_spatialReference","w","_snapshotFeatures","errors","fieldName","p","fieldsIndex","hasM","hasZ","featureIdInfo","timeInfo","featureStore","c","addMany","features","warnings","E","extent","fetchRecomputedExtents","fullExtent","applyEdits","queryFeatures","_waitSnapshotComplete","executeQuery","signal","queryFeatureCount","executeQueryForCount","queryObjectIds","executeQueryForIds","filter","queryExtent","executeQueryForExtent","querySnapping","executeQueryForSnapping","queryAttributeBins","executeAttributeBinsQuery","refresh","_snapshotTask","abort","promise","then","clear","getLogger","warn","message","details","finished","typeName","_singleQuery","push","Math","min","_pageQuery","T","ceil","Promise","allSettled","Array","from","map","async","next","done","value","j","totalRecordCount","Number","isFinite","count","_processGeoJSON","startIndex","wkid","geometry","attributes","objectId","name","recordCount","minX","minY","maxX","maxY","search","_indexInvalid","_boundsToLoad","_boundsById","Map","_idByBounds","_index","has","_loadIndex","size","forEach","Set","fullBounds","values","max","valid","delete","get","remove","forEachInBounds","invalidateIndex","set","getObjectId","getAttributes","getAttribute","cloneWithGeometry","getGeometry","getCentroid","ensureCentroid","description","code","globalId","success","uniqueId","error","add","editable","requiredFields","parseFloat","String","TypeError","simplify","I","supportsAutoIntervalBin","supportsFixedIntervalBin","supportsFixedBoundariesBin","supportsDateBin","supportsStackBy","supportsSplitBy","supportsNormalization","supportedStatisticTypes","supportedNormalizationTypes","geometryInfo","_boundsStore","_featuresById","_usedMemory","events","featureAdapter","usedMemory","numFeatures","storeStatistics","coords","featureCount","vertexCount","getFullExtent","xmin","ymin","xmax","ymax","_add","_emitChanged","upsertMany","_upsert","removeById","_remove","removeManyById","forEachBounds","getFeature","emit","feature","displayId","estimateFeatureUsedMemory","onFeatureAdd","onFeatureRemove"],"sourceRoot":""}