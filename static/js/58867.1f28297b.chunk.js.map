{"version":3,"file":"static/js/58867.1f28297b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/i3s/meshUtils.js","../node_modules/@arcgis/core/geometry/support/MeshTransform.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport e from\"../../../../core/Error.js\";import t from\"../../../../geometry/Mesh.js\";import{projectBuffer as r}from\"../../../../geometry/projection/projectBuffer.js\";import{toExtent as o}from\"../../../../geometry/support/aaBoundingBox.js\";import n from\"../../../../geometry/support/MeshGeoreferencedVertexSpace.js\";import{MeshVertexAttributes as a}from\"../../../../geometry/support/MeshVertexAttributes.js\";import{b as s,a as i}from\"../../../../chunks/vec3.js\";import{Metadata as c}from\"../../../../geometry/support/meshUtils/Metadata.js\";function l(e){const r=new c,o=e.spatialReference??e.layerView.view.spatialReference;return r.externalSources.add({extent:e.extent??m(e,o),source:{type:\"loadable\",load:t=>p(t,e)}}),new t({metadata:r,vertexSpace:new n,spatialReference:o})}function m({layerView:e,nodeIndex:t,featureIndex:n},a){const s=e.getAABB(t,n);if(!s)return null;const i=e.view.spatialReference;return i.equals(a)||r(s,i,0,s,a,0),o(s,a)}async function p(t,{layerView:o,nodeIndex:n,featureIndex:c}){const l=o.getNodeComponentHandle(n);if(!l?.intersectionGeometry)throw new e(\"i3s-layer-view-geometry-missing\",\"Cannot load mesh because scene layer view data is no longer available.\");const m={indices:null,data:null,stride:0,startIndex:0,endIndex:0};l.intersectionGeometry.getComponentPositions(c,m);const{indices:p,data:d,stride:f,startIndex:u,endIndex:x}=m,y=new Float64Array(3*(x-u));let w=0;for(let e=u;e<x;e+=3){const t=f*p[e],r=f*p[e+1],o=f*p[e+2];y[w++]=d[t],y[w++]=d[t+1],y[w++]=d[t+2],y[w++]=d[r],y[w++]=d[r+1],y[w++]=d[r+2],y[w++]=d[o],y[w++]=d[o+1],y[w++]=d[o+2]}const g=l.transform;s(y,y,g.rotationScale),i(y,y,g.position),r(y,o.view.renderSpatialReference,0,y,t.spatialReference,0),t.vertexAttributes=new a({position:y})}export{l as createMesh};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import o from\"../../core/JSONSupport.js\";import{property as r}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as s}from\"../../core/accessorSupport/decorators/subclass.js\";import{fromRotationTranslationScale as i,invert as e,exactEquals as a}from\"../../core/libs/gl-matrix-2/math/mat4.js\";import{create as l}from\"../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{setAxisAngle as n}from\"../../core/libs/gl-matrix-2/math/quat.js\";import{create as c}from\"../../core/libs/gl-matrix-2/factories/quatf64.js\";import{create as p,fromArray as m,fromValues as u,clone as h}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromAxisAndAngle as x,angle as g,angleRad as f,axis as j,up as b}from\"./axisAngleDegrees.js\";var y;let A=class extends o{static{y=this}constructor(t){super(t),this.translation=p(),this.rotationAxis=m(b),this.rotationAngle=0,this.scale=u(1,1,1)}get rotation(){return x(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=h(j(t)),this.rotationAngle=g(t)}get localMatrix(){const t=l();return n(d,j(this.rotation),f(this.rotation)),i(t,d,this.translation,this.scale),t}get localMatrixInverse(){return e(l(),this.localMatrix)}equals(t){return this===t||null!=t&&a(this.localMatrix,t.localMatrix)}clone(){const t={translation:h(this.translation),rotationAxis:h(this.rotationAxis),rotationAngle:this.rotationAngle,scale:h(this.scale)};return new y(t)}};t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"translation\",void 0),t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"rotationAxis\",void 0),t([r({type:Number,nonNullable:!0,json:{write:!0}})],A.prototype,\"rotationAngle\",void 0),t([r({type:[Number],nonNullable:!0,json:{write:!0}})],A.prototype,\"scale\",void 0),t([r()],A.prototype,\"rotation\",null),t([r()],A.prototype,\"localMatrix\",null),t([r()],A.prototype,\"localMatrixInverse\",null),A=y=t([s(\"esri.geometry.support.MeshTransform\")],A);const d=c();export{A as default};\n"],"names":["l","e","r","c","o","spatialReference","layerView","view","externalSources","add","extent","m","source","type","load","t","async","_ref2","nodeIndex","n","featureIndex","getNodeComponentHandle","intersectionGeometry","indices","data","stride","startIndex","endIndex","getComponentPositions","p","d","f","u","x","y","Float64Array","w","g","transform","s","rotationScale","i","position","renderSpatialReference","vertexAttributes","a","metadata","vertexSpace","_ref","getAABB","equals","A","this","constructor","super","translation","rotationAxis","b","rotationAngle","scale","rotation","h","j","localMatrix","localMatrixInverse","clone","Number","nonNullable","json","write","prototype"],"sourceRoot":""}