"use strict";(self.webpackChunksc_pier_workable=self.webpackChunksc_pier_workable||[]).push([[40148],{2257:(e,t,n)=>{n.d(t,{D8:()=>s,TO:()=>l,d0:()=>r});var i=n(53430);async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.popupTemplate;if(null==t)return[];const n=await t.getRequiredFields(e.fieldsIndex),{lastEditInfoEnabled:l}=t,{objectIdField:s,typeIdField:r,globalIdField:a,relationships:o}=e;if(n.includes("*"))return["*"];const u=l?(0,i.eX)(e):[],c=(0,i.DB)(e.fieldsIndex,[...n,...u]);return r&&c.push(r),c&&s&&e.fieldsIndex?.has(s)&&!c.includes(s)&&c.push(s),c&&a&&e.fieldsIndex?.has(a)&&!c.includes(a)&&c.push(a),o?.forEach(t=>{const{keyField:n}=t;c&&n&&e.fieldsIndex?.has(n)&&!c.includes(n)&&c.push(n)}),c}function s(e,t){return e&&"object"==typeof e?t?.checkPopupEnabled&&"popupEnabled"in e&&!e.popupEnabled?null:"popupTemplate"in e&&e.popupTemplate?e.popupTemplate:null!=t&&t.defaultPopupTemplateEnabled&&"defaultPopupTemplate"in e&&e.defaultPopupTemplate?e.defaultPopupTemplate:null:null}function r(e,t){return null!=s(e,{defaultPopupTemplateEnabled:t})}},3109:(e,t,n)=>{n.d(t,{$x:()=>a,Wn:()=>c,XO:()=>o,iE:()=>u,y6:()=>r});var i=n(73582),l=n(2413),s=n(80963);class r{constructor(e,t,n,i,l){this.extent=e,this.timeExtent=t,this.size=n,this.pixelRatio=i,this.time=l}get flowExtentInfo(){return{modelSize:this.size,valid:(0,s.Vp)(this.extent.spatialReference)?.valid,extent:(0,l.VY)(this.extent)}}insideMapExtent(e,t){return a(this.flowExtentInfo,e,t)}modelToMapSpace(e,t,n){return o(this.flowExtentInfo,e,t,n)}}function a(e,t,n){const{extent:i,valid:l}=e,[s,r,a,o]=i;return!(n<r||n>o)&&(null!=l&&s>a?t>=a||t<=s:t>=s&&t<=a)}function o(e,t,n,s){const{extent:r,modelSize:a,valid:o}=e,[u,f,d]=r,h=c(u,d,o);let m=t/a[0]*h+u;return null!=o&&s&&(m=new i.hr(o[0],o[1]).normalize(m)),[m,(a[1]-n)/a[1]*(0,l.uJ)(r)+f]}function u(e,t,n){return null!=n&&Math.abs(e-n.valid[0])<n.dx&&Math.abs(t-n.valid[1])<n.dx}function c(e,t,n){if(null!=n&&e>t){const[i,l]=n;return l-e+(t-i)}return t-e}},31516:(e,t,n)=>{n.d(t,{F:()=>s});n(18690),n(53084);var i=n(18288),l=n(59187);n(42052),n(72027);function s(e,t,n){if(null==e?.timeInfo)return null;const{datesInUnknownTimezone:s=!1,timeOffset:r,useViewTime:a}=e;let o=e.timeExtent;s&&(o=function(e){if(!e)return e;const{start:t,end:n}=e;return new l.A({start:null!=t?(0,i.S1)(t,t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,i.S1)(n,n.getTimezoneOffset(),"minutes"):n})}(o));let u=a?t&&o?t.intersection(o):t||o:o;return!u||u.isEmpty||u.isAllTime?u:(r&&(u=u.offset(-r.value,r.unit)),s&&(u=function(e){if(!e)return e;const{start:t,end:n}=e;return new l.A({start:null!=t?(0,i.S1)(t,-t.getTimezoneOffset(),"minutes"):t,end:null!=n?(0,i.S1)(n,-n.getTimezoneOffset(),"minutes"):n})}(u)),u.equals(n)?n:u)}},31723:(e,t,n)=>{n.d(t,{DW:()=>f,Sw:()=>o,T5:()=>m,Xx:()=>u,Zt:()=>c,uu:()=>a});var i=n(2413),l=n(46533),s=n(76191),r=n(3109);function a(e){return e?4:3}function o(e){return e[0].vertices instanceof Float32Array}class u{constructor(e,t,n,i,l,s){this.data=e,this.mask=t,this.width=n,this.height=i,this.lij=l,this.extent=s}}function c(e){return(0,s.et)(e.lij[0],e.lij[1],e.lij[2])}function f(e,t){let[n,l,s,a]=[null,null,null,null];for(const i of e){const e=i.extent;n=h(e[0],n),l=h(e[1],l),s=d(e[2],s),a=d(e[3],a)}if(null==n||null==l||null==s||null==a)return null;if((0,r.iE)(n,s,t)){const t=[...e].toSorted((e,t)=>e.extent[0]-t.extent[0]);let i=t[0].extent[2],l=0,r=0,a=0;for(let e=1;e<t.length;e++){const[n,s,o]=t[e].extent;if(i<n&&(a++,l=i,r=n,a>1))break;i=Math.max(i,o)}1===a&&(n=r,s=l)}return(0,i.vt)([n,l,s,a])}function d(e,t){return null==t?e:Math.max(e,t)}function h(e,t){return null==t?e:Math.min(e,t)}function m(e,t,n){const[s,a]=n.modelSize;let o=null;const u=new Map;t.forEach(t=>{u.set(t.lij,(0,l.DE)(e,t))});const c=(e,t,n)=>(0,i.Rj)(e.extent,t,n);return(l,f)=>{const d=Math.round(l),h=Math.round(f);if(!e.wrapAround&&(d<0||d>=s||h<0||h>=a))return[0,0];const[m,p]=(0,r.XO)(n,l,f,!0);if(!(0,r.$x)(n,m,p))return[0,0];if(null==o||!c(o,m,p)){o=null;for(const[e,n]of t)if(c(n,m,p)){o=n;break}}if(null==o?.data)return[0,0];const x=u.get(o.lij);if(null==x)return[0,0];const{width:v,height:g,extent:y}=o;return x((m-y[0])/(0,i.VL)(y)*v,g-(p-y[1])/(0,i.uJ)(y)*g)}}},51939:(e,t,n)=>{n.d(t,{AL:()=>g,DV:()=>p,ER:()=>l,F_:()=>a,Nd:()=>h,Oo:()=>s,dy:()=>d,eS:()=>b,h4:()=>$,jC:()=>v,nq:()=>m,rZ:()=>f,y6:()=>x});var i=n(44135);const l="Raster.",s="Raster.Dim.",r=".Max",a={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},o=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function u(e,t){return new i.A({name:e,alias:t,domain:null,editable:!1,length:50,type:"string"})}function c(e,t){return new i.A({name:e,alias:t,domain:null,editable:!1,type:"double"})}function f(e){return u(a.servicePixelValue,e??"Service Pixel Value")}function d(e){return u(a.rawServicePixelValue,e??"Raw Service Pixel Value")}function h(){return u(a.itemPixelValue,"Item Pixel Value")}function m(e){return u(`${a.servicePixelValue}.${e}`,e)}function p(e){return c(`${a.magnitude}`,"Magnitude"+(e?` (${e})`:""))}function x(){return c(`${a.direction}`,"Direction (\xb0)")}function v(e){return e.fields.filter(e=>"oid"!==e.type&&"value"!==e.name.toLowerCase()).map(e=>{const t=e.clone();return t.name=`${l}${e.name}`,t})}function g(e){const t=new Set,n=new Set,l=new Map;return e.variables.forEach(e=>{let{dimensions:i}=e;i.forEach(e=>{if(e.recurring)l.set(e.name,e.unit);else{const i="ISO8601"===e.unit?.trim()||"stdtime"===e.name?.trim()?.toLowerCase()?t:n;i.add(e.name),e.hasRanges&&i.add(`${e.name}${r}`)}})}),[u(a.variable,"Variable"),...[...t].map(e=>function(e,t){return new i.A({name:e,alias:t,domain:null,editable:!1,type:"date"})}(`${s}${e}`,w(e))),...[...n].map(e=>c(`${s}${e}`,w(e))),...[...l].map(e=>{let[t,n]=e;return c(`${s}${t}`,y(t,n))})]}function y(e,t){return t=t?.toLowerCase(),t&&o.has(t)?o.get(t):w(e)}function w(e){const t=e.endsWith(r),n=t?e.slice(0,-4):e,i="StdTime"===n?"Standard Time":"StdZ"===n?"Standard Z":n;return t?`${i} Max`:i}function S(e,t){return t?new Date(e):e}function b(e,t,n){n?.length&&(t[a.variable]=n[0].variableName,n.forEach(n=>{let{dimensionName:i,values:l}=n;if(i&&l?.length){const n=`${s}${i}`,a=e.find(e=>{let{name:t}=e;return t===n});if(!a)return;const o="date"===a.type,u=l[0];if(Array.isArray(u)){if(t[`${s}${i}`]=S(u[0],o),null!=u[1]){const n=`${s}${i}${r}`;if(e.some(e=>{let{name:t}=e;return t===n})){const e=S(u[1],o);t[n]=e}}}else t[`${s}${i}`]=S(u,o)}}))}function $(e,t){if(t.pixelType.startsWith("f")&&e.forEach(e=>{let{format:t,fieldName:n}=e;t&&n&&/^raster\.(item|service)pixelvalue/i.test(n)&&(t.places=2)}),t.multidimensionalInfo){const n=t.multidimensionalInfo.variables.flatMap(e=>{let{dimensions:t}=e;return t});e.forEach(e=>{let{format:t,fieldName:i}=e;if(t&&i?.startsWith(s)){const e=i.slice(s.length),l=`${e}${r}`,a=n.find(t=>{let{name:n}=t;return n===e||n===l});a?.values?.every(e=>Number.isInteger(e))&&(t.places=0)}})}}},66917:(e,t,n)=>{n.d(t,{Dt:()=>g,EO:()=>h,Lu:()=>r,Sl:()=>x,UL:()=>f,YC:()=>u,hq:()=>s,l0:()=>o,oU:()=>c,r$:()=>m,vG:()=>p});var i=n(76931),l=n(31723);function s(e){const t=r(u(e)),n=t,l=Math.max(t/2,5),s=Math.round((0,i.Lz)(e.maxPathLength)/l)+1,{density:a}=e;return{smoothing:(0,i.Lz)(e.smoothing),interpolate:!0,velocityScale:"flow-from"===e.flowRepresentation?1:-1,verticesPerLine:s,minSpeedThreshold:.001,segmentLength:l,maxTurnAngle:1,collisions:!0,lineCollisionWidth:n,lineSpacing:10,density:a,onlyForwardTracing:!0,wrapAround:!1}}function r(e){return"constant"===e.kind?e.value[0]:e.values[e.values.length-1]}function a(e){const t=e.toRgba();return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function o(e){return{kind:"constant",value:[.1,.1,.1,1]}}function u(e){if(!e.hasVisualVariables("size"))return{kind:"constant",value:[(0,i.Lz)(e.trailWidth)]};const t=e.getVisualVariablesForType("size")[0],n=[],l=[];let s;if(t.stops){for(const e of t.stops)n.push(e.value),l.push((0,i.Lz)(e.size));s=t.stops.length}else n.push(t.minDataValue,t.maxDataValue),l.push((0,i.Lz)(t.minSize),(0,i.Lz)(t.maxSize)),s=2;return{kind:"ramp",stops:n,values:l,count:s}}function c(e){if(!e.hasVisualVariables("color"))return{kind:"constant",value:a(e.color)};const t=e.getVisualVariablesForType("color")[0],n=[],i=[];for(const l of t.stops)n.push(l.value),Array.prototype.push.apply(i,a(l.color));return{kind:"ramp",stops:n,values:i,count:t.stops.length}}function f(e){if(!e.hasVisualVariables("opacity"))return{kind:"constant",value:[1]};const t=e.getVisualVariablesForType("opacity")[0],n=[],i=[];for(const l of t.stops)n.push(l.value),i.push(l.opacity);return{kind:"ramp",stops:n,values:i,count:t.stops.length}}function d(e,t,n,i){switch(t){case"int":e.setUniform1iv(n,i);break;case"float":e.setUniform1fv(n,i);break;case"vec2":e.setUniform2fv(n,i);break;case"vec3":e.setUniform3fv(n,i);break;case"vec4":e.setUniform4fv(n,i)}}function h(e,t,n,i){"constant"===i.kind?d(e,n,`u_${t}`,i.value):(d(e,"float",`u_${t}_stops`,i.stops),d(e,n,`u_${t}_values`,i.values),e.setUniform1i(`u_${t}_count`,i.count))}function m(e,t){let n=!0;return n=n&&e.collisions===t.collisions,n=n&&e.density===t.density,n=n&&e.interpolate===t.interpolate,n=n&&e.lineCollisionWidth===t.lineCollisionWidth,n=n&&e.lineSpacing===t.lineSpacing,n=n&&e.maxTurnAngle===t.maxTurnAngle,n=n&&e.minSpeedThreshold===t.minSpeedThreshold,n=n&&e.segmentLength===t.segmentLength,n=n&&e.smoothing===t.smoothing,n=n&&e.velocityScale===t.velocityScale,n=n&&e.verticesPerLine===t.verticesPerLine,n}function p(e,t){return e===t||null!=e&&null!=t&&e.equals(t)}function x(e,t){if(!m(e.simulationSettings,t.simulationSettings))return!1;if(!p(e.timeExtent,t.timeExtent))return!1;let n=!0;return n=n&&e.loadImagery===t.loadImagery,n=n&&e.createFlowMesh===t.createFlowMesh,n=n&&e.color.kind===t.color.kind,n=n&&e.opacity.kind===t.opacity.kind,n=n&&e.size.kind===t.size.kind,n}function v(e,t,n,i){return e/=n.size[0],t=1-(t/=n.size[1]),e*=n.extent.xmax-n.extent.xmin,t*=n.extent.ymax-n.extent.ymin,e+=n.extent.xmin,t+=n.extent.ymin,e-=i.extent.xmin,t-=i.extent.ymin,e/=i.extent.xmax-i.extent.xmin,t=1-(t/=i.extent.ymax-i.extent.ymin),{x:e*=i.size[0],y:t*=i.size[1]}}function g(e,t,n,i){const s=[],r=n.time-t.time;if(0===e.length)return[];const a=(0,l.Sw)(e),o=a?(0,l.uu)(e[0].hasMagnitude):1,u=a?(e,t)=>{let{vertices:n}=e;const i=n,l=t*o;return{x:i[l],y:i[l+1],t:i[l+2],speed:0}}:(e,t)=>{let{vertices:n}=e;return n[t]};for(const l of e){const{stage:e,vertices:a}=l;if(2===e)continue;const c=a.length/o,f=u(l,0),d=f.t,h=(r*i-d)%(u(l,c-1).t-d)+d;let m,p=f.x,x=f.y,g=f.t;for(m=1;m<c&&g<h;m++){const e=u(l,m),t=Math.min(e.t,h)-g,n=e.t-g;p+=(e.x-p)*(t/n),x+=(e.y-x)*(t/n),g+=t}s.push(v(p,x,t,n))}return s}},76191:(e,t,n)=>{n.d(t,{Tb:()=>s,et:()=>u,mS:()=>a,nx:()=>r});var i=n(34111),l=n(2413);const s="virtual-snapshot-tile",r="virtual-display-filter-highlight-tile";class a{constructor(e,t,n,i){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u(e,t,n);this._tilingScheme=i,this.id=s,this.lij=[0,0,0],this.extent=null,this.measures=new o,this.loadPriority=0,this.used=!1,this.lij[0]=this.measures.lodLevel=e,this.lij[1]=t,this.lij[2]=n,i&&(this.extent=(0,l.vt)(),i?.getExtent(e,t,n,this.extent))}get planetRadius(){return(0,i.tO)(this.spatialReference).radius}get spatialReference(){return this._tilingScheme?.spatialReference}get resolution(){return this._tilingScheme?.resolutionAtLevel(this.measures.lodLevel)??0}get level(){return this.lij[0]}get lodLevelDelta(){return this.measures.lodLevel-this.level}createChildren(){const e=this.lij[0]+1,t=2*this.lij[1],n=2*this.lij[2];return[new a(e,t,n,this._tilingScheme),new a(e,t+1,n,this._tilingScheme),new a(e,t,n+1,this._tilingScheme),new a(e,t+1,n+1,this._tilingScheme)]}}class o{constructor(){this.visible=!0,this.distance=0,this.lodLevel=0,this.splitPriority=0,this.mergeable=!0}}function u(e,t,n){return`${e}/${t}/${n}`}}}]);
//# sourceMappingURL=40148.bf07526b.chunk.js.map