{"version":3,"file":"static/js/12454.dc54b81f.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/LineOfSightLayerView.js","../node_modules/@arcgis/core/views/3d/layers/LineOfSightLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/LayerViewAnalysisViewManager.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import r from\"../../core/Collection.js\";import{createAbortError as s}from\"../../core/promiseUtils.js\";import{property as t}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as i}from\"../../core/accessorSupport/decorators/subclass.js\";const o=o=>{let a=class extends o{constructor(...e){super(...e),this.layer=null}get interactive(){return this.analysisView?.interactive??!1}set interactive(e){null!=this.analysisView&&(this.analysisView.interactive=e)}get results(){return this.analysisView?.results??new r}place(e){if(null!=this.analysisView)return this.analysisView.place(e);throw s()}};return e([t()],a.prototype,\"layer\",void 0),e([t()],a.prototype,\"interactive\",null),e([t({readOnly:!0})],a.prototype,\"results\",null),a=e([i(\"esri.views.layers.LineOfSightLayerView\")],a),a};export{o as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../chunks/tslib.es6.js\";import{property as i}from\"../../../core/accessorSupport/decorators/property.js\";import{subclass as e}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerView3D as a}from\"./LayerView3D.js\";import{LayerViewAnalysisViewManager as r}from\"./support/LayerViewAnalysisViewManager.js\";import t from\"../../layers/LayerView.js\";import n from\"../../layers/LineOfSightLayerView.js\";var o;let l=class extends(a(n(t))){static{o=this}constructor(s){super(s),this.type=\"line-of-sight-3d\",this._analysisViewManager=null}initialize(){this._analysisViewManager=new r({getAnalysis:()=>this.layer.analysis,loadAnalysisViewModule:o.loadAnalysisViewModule,parent:this}),this.addResolvingPromise(this._analysisViewManager.whenAnalysisView())}destroy(){this._analysisViewManager.destroy()}get analysisView(){return this._analysisViewManager.analysisView}whenAnalysisView(){return this._analysisViewManager.whenAnalysisView()}isUpdating(){return this._analysisViewManager.updating}static{this.loadAnalysisViewModule=()=>import(\"../analysis/LineOfSightAnalysisView3D.js\")}};s([i()],l.prototype,\"type\",void 0),s([i()],l.prototype,\"_analysisViewManager\",void 0),s([i({readOnly:!0})],l.prototype,\"analysisView\",null),l=o=s([e(\"esri.views.3d.layers.LineOfSightLayerView3D\")],l);const y=l;export{y as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../../../chunks/tslib.es6.js\";import e from\"../../../../core/Accessor.js\";import{createTask as i}from\"../../../../core/asyncUtils.js\";import a from\"../../../../core/Error.js\";import{abortMaybe as t,destroyMaybe as r}from\"../../../../core/maybe.js\";import{throwIfAborted as n,isAborted as o}from\"../../../../core/promiseUtils.js\";import{watch as l,syncAndInitial as y}from\"../../../../core/reactiveUtils.js\";import{property as c}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as w}from\"../../../../core/accessorSupport/decorators/subclass.js\";let h=class extends e{get updating(){return null!=this._createAnalysisViewTask||null!=this.analysisView&&this.analysisView.updating}constructor(s){super(s),this._analysisModule=null,this._emitOnView=(s,e)=>this.parent.view.emit(s,e)}initialize(){this.addHandles(l((()=>this.getAnalysis()),(s=>this._createAnalysisView(s)),y))}destroy(){this._destroyAnalysisView()}async whenAnalysisView(){if(null!=this.analysisView)return this.analysisView;if(null!=this._createAnalysisViewTask)return this._createAnalysisViewTask.promise;throw new a(\"layerview:no-analysisview-for-analysis\",\"The analysis has not been set on the layer of this layer view\")}_createAnalysisView(s){const e=this._createAnalysisViewTask?.promise;if(this._destroyAnalysisView(),!s)return;const a=i((async i=>{try{await Promise.allSettled([e]);const a=await this._createAnalysisViewPromise(s,i);return n(i),this.analysisView=a,this._emitOnView(\"analysis-view-create\",{analysis:s,analysisView:a}),a}catch(t){throw this._emitOnView(\"analysis-view-create-error\",{analysis:s,error:t}),t}finally{this._createAnalysisViewTask===a&&(this._createAnalysisViewTask=null)}}));this._createAnalysisViewTask=a}_destroyAnalysisView(){const s=this.getAnalysis();this._createAnalysisViewTask=t(this._createAnalysisViewTask);const{analysisView:e}=this;e&&(this.analysisView=r(e),this._emitOnView(\"analysis-view-destroy\",{analysis:s,analysisView:e}))}async _createAnalysisViewPromise(s,e){let i,t=this._analysisModule;const r=e=>{if(!o(e))return;i?.destroy();const t=this.getAnalysis();throw new a(\"layerview:no-analysisview-for-analysis\",null!=t&&s!==t?\"The analysis changed before the analysis view could be created\":\"The analysis has not been added to the layer of this layer view\",{analysis:s})};return t||(t=await this.loadAnalysisViewModule(),r(e),this._analysisModule=t),i=new t.default({analysis:s,parent:this.parent,view:this.parent.view}),await i.when(),r(e),i}};s([c({constructOnly:!0})],h.prototype,\"getAnalysis\",void 0),s([c({constructOnly:!0})],h.prototype,\"loadAnalysisViewModule\",void 0),s([c({constructOnly:!0})],h.prototype,\"parent\",void 0),s([c()],h.prototype,\"analysisView\",void 0),s([c()],h.prototype,\"_createAnalysisViewTask\",void 0),s([c()],h.prototype,\"updating\",null),s([c()],h.prototype,\"_analysisModule\",void 0),h=s([w(\"esri.views.3d.layers.support.LayerViewAnalysisViewManager\")],h);export{h as LayerViewAnalysisViewManager};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as t}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{let n=class extends l{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,r=o.signal;this.addHandles(s((()=>o.abort()))),await t((()=>this.view.defaultsFromMap?.heightModelInfoReady),r),e(r);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([r()],n.prototype,\"view\",void 0),o([r()],n.prototype,\"slicePlaneEnabled\",void 0),n=o([i(\"esri.views.3d.layers.LayerView3D\")],n),n};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import i from\"../../core/Identifiable.js\";import s from\"../../core/Logger.js\";import{destroyMaybe as n}from\"../../core/maybe.js\";import l from\"../../core/Promise.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../core/support/UpdatingHandles.js\";import{validateScaleRange as d}from\"../support/layerViewUtils.js\";let u=class extends(i.IdentifiableMixin(l.EsriPromiseMixin(r.EventedMixin(t)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new p,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";s.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=n(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&d(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return d(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([o({readOnly:!0})],u.prototype,\"spatialReferenceSupported\",null),e([o()],u.prototype,\"view\",void 0),e([o()],u.prototype,\"fullOpacity\",null),e([o()],u.prototype,\"layer\",void 0),e([o()],u.prototype,\"parent\",void 0),e([o({readOnly:!0})],u.prototype,\"suspended\",null),e([o({readOnly:!0})],u.prototype,\"suspendInfo\",null),e([o({readOnly:!0})],u.prototype,\"legendEnabled\",null),e([o({type:Boolean,readOnly:!0})],u.prototype,\"updating\",null),e([o({readOnly:!0})],u.prototype,\"updatingProgress\",null),e([o()],u.prototype,\"updateSuspended\",null),e([o()],u.prototype,\"visible\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentScale\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentTimeExtent\",null),u=e([a(\"esri.views.layers.LayerView\")],u);export{u as default};\n"],"names":["o","a","constructor","super","arguments","this","layer","interactive","analysisView","e","results","r","place","s","t","prototype","readOnly","i","l","n","type","_analysisViewManager","initialize","getAnalysis","analysis","loadAnalysisViewModule","parent","addResolvingPromise","whenAnalysisView","destroy","isUpdating","updating","static","y","h","_createAnalysisViewTask","_analysisModule","_emitOnView","view","emit","addHandles","_createAnalysisView","_destroyAnalysisView","promise","async","Promise","allSettled","_createAnalysisViewPromise","error","default","when","c","constructOnly","w","slicePlaneEnabled","supportsHeightUnitConversion","postscript","p","_validateHeightModelInfo","AbortController","signal","abort","defaultsFromMap","heightModelInfoReady","heightModelInfo","u","IdentifiableMixin","EsriPromiseMixin","EventedMixin","spatialReferenceSupported","_updatingHandles","catch","name","id","title","getLogger","fullOpacity","opacity","suspended","destroyed","canResume","suspendInfo","getSuspendInfo","legendEnabled","updatingProgress","updateSuspended","visible","_overrideIfSome","visibleAtCurrentScale","visibleAtCurrentTimeExtent","timeExtent","visibilityTimeExtent","intersection","isEmpty","effectiveScaleRange","loaded","ready","d","viewNotReady","layerNotLoaded","outsideScaleRange","outsideVisibilityTimeExtent","layerInvisible","Boolean"],"sourceRoot":""}