{"version":3,"file":"static/js/3595.fa7a1e96.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BufferObject as e}from\"../../../../webgl/BufferObject.js\";import{Usage as t}from\"../../../../webgl/enums.js\";class r{constructor(r,i,s){this._elementSize=i,this._buffer=e.createVertex(r,t.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.usedMemory}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{reallocShrinkThreshold as t,reallocGrowthFactor as i,reallocShrinkFactor as e}from\"../../../../../core/arrayUtils.js\";import{BufferViewVec3f as s,BufferViewMat3f as a,BufferViewVec4f as r,BufferViewVec4u8 as n}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as h}from\"../Util.js\";import{VertexAttribute as d}from\"../VertexAttribute.js\";import _ from\"./BackedBufferObject.js\";class c{constructor(t){this.modelOriginHi=t.getField(d.INSTANCEMODELORIGINHI,s),this.modelOriginLo=t.getField(d.INSTANCEMODELORIGINLO,s),this.model=t.getField(d.INSTANCEMODEL,a),this.modelNormal=t.getField(d.INSTANCEMODELNORMAL,a),this.featureAttribute=t.getField(d.INSTANCEFEATUREATTRIBUTE,r),this.color=t.getField(d.INSTANCECOLOR,n),this.objectAndLayerIdColor=t.getField(d.INSTANCEOBJECTANDLAYERIDCOLOR,n)}}class f{constructor(t,i){this._rctx=t,this._instanceBufferLayout=i,this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){h(!this._updating,\"already updating\"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){h(this._updating,\"not updating\"),this.size<t*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){h(this._updating,\"not updating\"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),h(this._headIndex!==this._tailIndex,\"invalid pointers\"),t}freeTail(){h(this._updating,\"not updating\"),h(this.size>0,\"invalid size\");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(u,Math.floor(this._capacity*i));this._resize(t)}_shrink(){const t=Math.max(u,Math.floor(this._capacity*e));this._resize(t)}_resize(t){if(h(this._updating,\"not updating\"),t===this._capacity)return;const i=new _(this._rctx,this._instanceBufferLayout.stride,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);h(e===t,\"invalid compaction\"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const u=64;export{f as RenderInstanceData,c as RenderInstanceDataView,u as initialCapacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{reallocGrowthFactor as s}from\"../../../../../core/arrayUtils.js\";import i from\"../../../../../core/Evented.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{fromMat4 as o,invert as n,transpose as h}from\"../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as l}from\"../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{multiply as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as g}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as m}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BufferViewMat4f64 as d,BufferViewVec3f64 as p,BufferViewMat3f as _,BufferViewVec2f as T,BufferViewVec4f64 as u,BufferViewVec4f as L,BufferViewVec4u8 as O,BufferViewUint8 as A}from\"../../../../../geometry/support/buffer/BufferView.js\";import{scaleFromMatrix as E}from\"../../../support/mathUtils.js\";import{newLayout as v}from\"../../../support/buffer/InterleavedLayout.js\";import{assert as M}from\"../Util.js\";import{VertexAttribute as I}from\"../VertexAttribute.js\";import{initialCapacity as F}from\"./RenderInstanceData.js\";var S;function b(t){let e=v().mat4f64(I.LOCALTRANSFORM).mat4f64(I.GLOBALTRANSFORM).vec4f64(I.BOUNDINGSPHERE).vec3f64(I.MODELORIGIN).mat3f(I.INSTANCEMODEL).mat3f(I.INSTANCEMODELNORMAL).vec2f(I.MODELSCALEFACTORS);return t.includes(I.FEATUREATTRIBUTE)&&(e=e.vec4f(I.FEATUREATTRIBUTE)),t.includes(I.COLOR)&&(e=e.vec4u8(I.COLOR)),t.includes(I.OLIDCOLOR)&&(e=e.vec4u8(I.OLIDCOLOR)),e=e.u8(I.STATE).u8(I.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]=\"ALLOCATED\",t[t.DEFAULT_ACTIVE=2]=\"DEFAULT_ACTIVE\",t[t.VISIBLE=4]=\"VISIBLE\",t[t.HIGHLIGHT=8]=\"HIGHLIGHT\",t[t.HIGHLIGHT_ACTIVE=16]=\"HIGHLIGHT_ACTIVE\",t[t.REMOVE=32]=\"REMOVE\",t[t.TRANSFORM_CHANGED=64]=\"TRANSFORM_CHANGED\",t[t.ACTIVE=18]=\"ACTIVE\"}(S||(S={}));class C{constructor(t){this.localTransform=t.getField(I.LOCALTRANSFORM,d),this.globalTransform=t.getField(I.GLOBALTRANSFORM,d),this.modelOrigin=t.getField(I.MODELORIGIN,p),this.model=t.getField(I.INSTANCEMODEL,_),this.modelNormal=t.getField(I.INSTANCEMODELNORMAL,_),this.modelScaleFactors=t.getField(I.MODELSCALEFACTORS,T),this.boundingSphere=t.getField(I.BOUNDINGSPHERE,u),this.featureAttribute=t.getField(I.FEATUREATTRIBUTE,L),this.color=t.getField(I.COLOR,O),this.objectAndLayerIdColor=t.getField(I.OLIDCOLOR,O),this.state=t.getField(I.STATE,A),this.lodLevel=t.getField(I.LODLEVEL,A)}}let R=class extends e{constructor(t,e){super(t),this.events=new i,this._capacity=0,this._size=0,this._next=0,this._highlightOptionsMap=new Map,this._highlightOptionsMapPrev=new Map,this._layout=b(e),this._capacity=F,this._buffer=this._layout.createBuffer(this._capacity),this._view=new C(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,S.ALLOCATED),this._size++,this.events.emit(\"instances-changed\"),t}removeInstance(t){const e=this._view.state;M(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),\"invalid instance handle\"),this._getStateFlag(t,S.ACTIVE)?this._setStateFlags(t,S.REMOVE):this.freeInstance(t),this.events.emit(\"instances-changed\")}freeInstance(t){const e=this._view.state;M(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),\"invalid instance handle\"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=y,i=H;e.localTransform.getMat(t,N),e.globalTransform.getMat(t,D);const a=c(D,D,N);m(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),o(i,a),e.model.setMat(t,i);const r=E(y,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),n(i,i),h(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,S.TRANSFORM_CHANGED),this.events.emit(\"instance-transform-changed\",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,H),s.modelOrigin.getVec(t,y),e[0]=H[0],e[1]=H[1],e[2]=H[2],e[3]=0,e[4]=H[3],e[5]=H[4],e[6]=H[5],e[7]=0,e[8]=H[6],e[9]=H[7],e[10]=H[8],e[11]=0,e[12]=y[0],e[13]=y[1],e[14]=y[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=Math.max(y[0],y[1],y[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=w(y[0],y[1],y[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,S.VISIBLE,e),this.events.emit(\"instance-visibility-changed\",{index:t}))}getVisible(t){return this._getStateFlag(t,S.VISIBLE)}setHighlight(t,e){const{_highlightOptionsMap:s}=this,i=s.get(t);e?e!==i&&(s.set(t,e),this._setStateFlag(t,S.HIGHLIGHT,!0),this.events.emit(\"instance-highlight-changed\")):i&&(s.delete(t),this._setStateFlag(t,S.HIGHLIGHT,!1),this.events.emit(\"instance-highlight-changed\"))}get highlightOptionsMap(){return this._highlightOptionsMap}getHighlightStateFlag(t){return this._getStateFlag(t,S.HIGHLIGHT)}geHighlightOptionsPrev(t){const e=this._highlightOptionsMapPrev.get(t)??null;return this._highlightOptionsMapPrev.delete(t),e}getHighlightName(t){const e=this.highlightOptionsMap.get(t)??null;return e?this._highlightOptionsMapPrev.set(t,e):this._highlightOptionsMapPrev.delete(t),e}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(F,Math.floor(this._capacity*s)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new C(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&S.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function w(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}t([a({constructOnly:!0})],R.prototype,\"shaderTransformation\",void 0),t([a()],R.prototype,\"_size\",void 0),t([a({readOnly:!0})],R.prototype,\"size\",null),R=t([r(\"esri.views.3d.webgl-engine.lib.lodRendering.InstanceData\")],R);const y=f(),H=l(),N=g(),D=g();export{R as InstanceData,C as InstanceDataView,S as StateFlags};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e}from\"../../../../../chunks/vec32.js\";import{w as s,c as i,a as r}from\"../../../../../chunks/sphere.js\";import{maxScale as a}from\"../../../support/mathUtils.js\";import h from\"../Octree.js\";class n extends h{constructor(e,r){super((t=>s(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);e(r(this._tmpSphere),this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*a(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}export{n as InstanceOctree};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}export{e as LevelSelector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glLayout as e}from\"../../../support/buffer/glUtil.js\";import{Default3D as t}from\"../DefaultVertexAttributeLocations.js\";import{GLMaterials as r}from\"../GLMaterials.js\";import{VertexArrayObject as o}from\"../VertexArrayObject.js\";import{BufferObject as s}from\"../../../../webgl/BufferObject.js\";import{Usage as i}from\"../../../../webgl/enums.js\";class a{constructor(a,n){const m=a.renderContext.rctx,u=n.geometry,f=n.geometry.getRenderGeometry(),g=f.material;this._materials=a.materials,g.setParameters({instancedDoublePrecision:!0}),this.geometry=u,this.material=g,this.glMaterials=new r(g,this._materials),this.vertexBufferLayout=f.vertexBufferLayout,this.vbo=s.createVertex(m,i.STATIC_DRAW,f.buffer),this.vao=new o(m,t,new Map([[\"geometry\",e(f.vertexBufferLayout)]]),new Map([[\"geometry\",this.vbo]])),this.vertexCount=f.elementCount}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}get usedMemory(){return 128+this.vbo.usedMemory+this.vao.usedMemory}intersect(e,t,r,o,s,i,a,n){return this.geometry.intersect(e,t,r,o,s,i,a,n)}}export{a as LodComponentData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/arrayUtils.js\";import{isAborted as n,throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as r,expandWithVec3 as i,center as s,diameter as c}from\"../../../../../geometry/support/aaBoundingBox.js\";import{LodComponentData as u}from\"./LodComponentData.js\";class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((o=>e.controller.schedule((()=>new u(e,o)),i)))),c=s.map((o=>\"fulfilled\"===o.status?o.value:null)).filter(o);if(n(i)||c.length!==s.length){c.forEach((o=>o.destroy())),t(i);for(const o of s)if(\"rejected\"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach((o=>o.destroy()))}intersect(o,n,t,e,r,i,s){this.components.forEach((c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const o=r();this.components.forEach((n=>{null!=n.boundingInfo&&(i(o,n.boundingInfo.bbMin),i(o,n.boundingInfo.bbMax))})),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=e();s(o,n),this._boundingSphere={center:n,radius:.5*c(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((o,n)=>o+n.triangleCount),0)}}export{a as LodLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../../core/arrayUtils.js\";import r from\"../../../../../core/Error.js\";import{someMap as n,getOrCreateMapValue as s}from\"../../../../../core/MapUtils.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{isAborted as i,throwIfAborted as o}from\"../../../../../core/promiseUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as h}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{d,e as u,t as m}from\"../../../../../chunks/vec32.js\";import{create as p}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as f,fromValues as _}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{debugFlags as g}from\"../../../support/debugFlags.js\";import{glLayout as I}from\"../../../support/buffer/glUtil.js\";import{newLayout as y}from\"../../../support/buffer/InterleavedLayout.js\";import v from\"../../../webgl/RenderCamera.js\";import{ShaderOutput as C}from\"../../core/shaderLibrary/ShaderOutput.js\";import{AsyncRenderPlugin as E}from\"../../effects/RenderPlugin.js\";import{Default3D as R}from\"../DefaultVertexAttributeLocations.js\";import{DepthRange as D}from\"../DepthRange.js\";import{IntersectorType as A}from\"../IntersectorType.js\";import b from\"../Octree.js\";import{RenderSlot as T}from\"../RenderSlot.js\";import{assert as L}from\"../Util.js\";import{VertexAttribute as S}from\"../VertexAttribute.js\";import{InstanceData as O,StateFlags as j}from\"./InstanceData.js\";import{InstanceOctree as x}from\"./InstanceOctree.js\";import{LevelSelector as M}from\"./LevelSelector.js\";import{LodLevel as N}from\"./LodLevel.js\";import{RenderInstanceData as w}from\"./RenderInstanceData.js\";import{colorMixModes as H}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as U}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as F}from\"../../shaders/DefaultMaterialTechnique.js\";import{defaultHighlightName as V}from\"../../../../support/HighlightDefaults.js\";import{TaskPriority as B,noBudget as q}from\"../../../../support/Scheduler.js\";import{bindVertexBufferLayout as G,unbindVertexBufferLayout as P}from\"../../../../webgl/Util.js\";const z=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new M(t,r)};let k=class extends E{constructor(e,t){super(e),this.type=A.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDataMap=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new v,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[T.OPAQUE_MATERIAL,e=>this._produces(e)],[T.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new O({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(B.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=Y(this.optionalFields),this._glInstanceBufferLayout=I(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on(\"instances-changed\",(()=>this._requestUpdateCycle())),this._instanceData.events.on(\"instance-transform-changed\",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on(\"instance-visibility-changed\",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on(\"instance-highlight-changed\",(()=>this._requestUpdateCycle(!0)))])}get _allRenderInstanceData(){return[this._defaultRenderInstanceData,...this._highlightRenderInstanceDataMap.values()]}get _allRenderInstanceDataExceptHighlightShadow(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDataMap)t[0]!==V&&e.push(t[1]);return e}hasHighlight(e){return this._highlightRenderInstanceDataMap.has(e)}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerViewUid(){return this.metadata.layerViewUid}get instanceData(){return this._instanceData}get hasEmissions(){return this._levels.some((e=>e.components.some((e=>e.material.hasEmissions))))}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),this._levels.reduce(((e,t)=>e+t.components.reduce(((e,t)=>e+t.usedMemory),0)),0))}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const n=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,s=e.triangleCount;t.push({renderedInstances:n,renderedTriangles:n*s,trianglesPerInstance:s})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}_createRenderInstanceDataArray(e=[]){const{rctx:t}=this._context.renderContext;return this.symbol.levels.map((r=>{e.push(new w(t,this._instanceBufferLayout))})),e}async initializeRenderContext(e,r){this._context=e,this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const n=await Promise.allSettled(this.symbol.levels.map((t=>N.create(e,t,r)))),s=n.map((e=>\"fulfilled\"===e.status?e.value:null)).filter(t);if(i(r)||s.length!==n.length){s.forEach((e=>e.destroy())),o(r);for(const e of n)if(\"rejected\"===e.status)throw e.reason}this._levels=s,this._levelSelector=z(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceDataMap.forEach((e=>e.forEach((e=>e.destroy()))))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>{const t=e.material.produces.get(T.TRANSPARENT_MATERIAL);return t?.(C.Color)}))))}hasHighlights(){return n(this._highlightRenderInstanceDataMap,(e=>e.some((e=>e.size>0))))}_produces(e){return(e!==C.Highlight||this.hasHighlights())&&(e!==C.ShadowHighlight||this.hasHighlight(V))}prepareRender(e){if(!g.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(q),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,n=this.levels;return t.forEach((t=>n.forEach((({components:n},s)=>n.forEach((n=>r.push(this._beginComponent(e,t[s],n)))))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let n=0;e.rctx.bindVAO();const s=this.levels;r.forEach((r=>s.forEach((({components:s},a)=>s.forEach((s=>this._renderComponent(e,t[n++],r[a],s,a)))))))}_getInstanceDatas(e){const{output:t,bind:r}=e,n=t===C.Highlight,s=t===C.ShadowHighlight,a=!n&&!s,i=t!==C.ShadowExcludeHighlight;if(a)return i?this._allRenderInstanceData:this._allRenderInstanceDataExceptHighlightShadow;const{_highlightRenderInstanceDataMap:o}=this;if(i){if(n){const e=r.highlight?.name;if(!e)return null;const t=o.get(e);return t?[t]:null}const e=o.get(V);return s?e?[e]:null:Array.from(o.values())}return null}intersect(e,t,r,n){if(!this.baseMaterial.visible||null==this._octree)return;const s=p();d(s,n,r);const a=s=>{this._instanceData.getCombinedModelTransform(s,Z),e.transform.set(Z),m($,r,e.transform.inverse),m(X,n,e.transform.inverse);const a=this._instanceData.getState(s),i=this._instanceData.getLodLevel(s),o=this._levels.length;L(0!==(a&j.ACTIVE),\"invalid instance state\"),L(i>=0&&i<o,\"invaid lod level\"),this._levels[i].intersect(e,t,$,X,s,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(a):this._octree.forEachAlongRay(r,s,a)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new x(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&j.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=a(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return new D;const t=e.viewForward,r=this._octree.findClosest(t,b.DepthOrder.FRONT_TO_BACK,e.frustum),n=this._octree.findClosest(t,b.DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==n)return new D;const s=e.eye,a=this._instanceData.view;a.boundingSphere.getVec(r,Q),d(Q,Q,s);const i=u(Q,t)-Q[3];a.boundingSphere.getVec(n,Q),d(Q,Q,s);const o=u(Q,t)+Q[3];return new D(i,o)}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:n,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const i=this._instanceData,o=i.view;let l=i.size;const c=i.capacity;let h=this._instanceIndex;const d=Math.ceil(c/500),{_highlightRenderInstanceDataMap:u}=this;for(let m=0;m<l&&!e.done;++m){h===this._cycleStartIndex&&this._startUpdateCycle();const m=o.state.get(h);let p=0;if(!(m&j.ALLOCATED)){h=h+1===c?0:h+1,l++;continue}const f=o.lodLevel.get(h);if(m&j.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[f].freeTail(),m&j.HIGHLIGHT_ACTIVE){const e=i.geHighlightOptionsPrev(h);if(e){const t=u.get(e);if(!t)throw new r(\"internal:lod-renderer\",\"Internal error in lodRenderer\");t[f].freeTail(),t.every((e=>e.isEmpty))&&(t.forEach((e=>e.destroy())),u.delete(e))}}if(m&j.REMOVE)i.freeInstance(h);else if(m&j.VISIBLE){let e=0;if(t&&(o.modelOrigin.getVec(h,J),e=a.selectLevel(J,i.getCombinedMedianScaleFactor(h),n)),p=m&~(j.ACTIVE|j.TRANSFORM_CHANGED),e>=0)if(m&j.HIGHLIGHT){const t=i.getHighlightName(h);if(t){const n=()=>{const e=this._createRenderInstanceDataArray();return e.forEach((e=>e.beginUpdate())),e},a=s(u,t,n);if(e>=a.length)throw new r(\"internal:lod-renderer\",`LodRenderer internal error - missing lodLevel ${e}`);W(a[e],o,h)}p|=j.HIGHLIGHT_ACTIVE}else W(this._defaultRenderInstanceData[e],o,h),p|=j.DEFAULT_ACTIVE;o.state.set(h,p),o.lodLevel.set(h,e)}else p=m&~(j.ACTIVE|j.TRANSFORM_CHANGED),o.state.set(h,p);if(null!=this._octreeCached){const e=!!(m&j.ACTIVE),t=!!(p&j.ACTIVE);!e&&t?this._octreeCached.addInstance(h):e&&!t?this._octreeCached.removeInstance(h):e&&t&&m&j.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(h),this._octreeCached.addInstance(h))}h=h+1===c?0:h+1,h%d===0&&e.madeProgress()}this._instanceIndex=h,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const n=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return n?.beginSlot(e.bind)}_renderComponent(e,t,r,n,s){if(!t)return;const{bind:a,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,a,n.material.parameters,te);i.bindVAO(n.vao),t.ensureAttributeLocations(n.vao),g.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===C.Color&&(o.setUniform4fv(\"externalColor\",ee[Math.min(s,ee.length-1)]),o.setUniform1i(\"colorMixMode\",H.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,m=(e,s)=>{G(i,R,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,n.vertexCount,s-e),P(i,R,r.buffer,u)};n.material.transparent&&null!=d?c>h?(L(d>=h&&d<=c,\"invalid firstIndex\"),m(d,c),m(h,d)):c<h&&(d<=c?(L(d>=0&&d<=c,\"invalid firstIndex\"),m(d,c),m(h,l),m(0,d)):(L(d>=h&&d<=l,\"invalid firstIndex\"),m(d,l),m(0,c),m(h,d))):c>h?m(h,c):c<h&&(m(0,c),m(h,l)),i.bindVAO(null)}};function W(e,t,r){const n=e.allocateHead();K(t,r,e.view,n)}function K(e,t,r,n){U(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,n),r.model.copyFrom(n,e.model,t),r.modelNormal.copyFrom(n,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(n,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(n,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(n,e.featureAttribute,t)}function Y(e){let t=y().vec3f(S.INSTANCEMODELORIGINHI).vec3f(S.INSTANCEMODELORIGINLO).mat3f(S.INSTANCEMODEL).mat3f(S.INSTANCEMODELNORMAL);return null!=e&&e.includes(\"featureAttribute\")&&(t=t.vec4f(S.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes(\"color\")&&(t=t.vec4u8(S.INSTANCECOLOR)),null!=e&&e.includes(\"objectAndLayerIdColor\")&&(t=t.vec4u8(S.INSTANCEOBJECTANDLAYERIDCOLOR)),t}e([l({constructOnly:!0})],k.prototype,\"symbol\",void 0),e([l({constructOnly:!0})],k.prototype,\"optionalFields\",void 0),e([l({constructOnly:!0})],k.prototype,\"metadata\",void 0),e([l({constructOnly:!0})],k.prototype,\"shaderTransformation\",void 0),e([l()],k.prototype,\"_instanceData\",void 0),e([l()],k.prototype,\"_cycleStartIndex\",void 0),e([l({readOnly:!0})],k.prototype,\"_enableLevelSelection\",null),e([l()],k.prototype,\"_updateCyclesWithStaticCamera\",void 0),e([l({readOnly:!0})],k.prototype,\"running\",null),k=e([c(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")],k);const J=p(),Q=f(),Z=h(),$=p(),X=p(),ee=[_(1,0,1,1),_(0,0,1,1),_(0,1,0,1),_(1,1,0,1),_(1,0,0,1)],te=new F;export{k as LodRenderer};\n"],"names":["r","constructor","i","s","this","_elementSize","_buffer","e","createVertex","t","STATIC_DRAW","resize","destroy","dispose","elementSize","capacity","_capacity","array","_array","buffer","usedMemory","byteLength","copyRange","arguments","length","undefined","Uint8Array","set","transferAll","setData","transferRange","setSubData","ArrayBuffer","subarray","setSize","c","modelOriginHi","getField","d","INSTANCEMODELORIGINHI","modelOriginLo","INSTANCEMODELORIGINLO","model","INSTANCEMODEL","a","modelNormal","INSTANCEMODELNORMAL","featureAttribute","INSTANCEFEATUREATTRIBUTE","color","INSTANCECOLOR","n","objectAndLayerIdColor","INSTANCEOBJECTANDLAYERIDCOLOR","f","_rctx","_instanceBufferLayout","_headIndex","_tailIndex","_firstIndex","_captureFirstIndex","_updating","_prevHeadIndex","_resized","view","_view","size","isEmpty","isFull","headIndex","tailIndex","firstIndex","reset","startUpdateCycle","beginUpdate","h","endUpdate","_shrink","_transferRange","allocateHead","_grow","_incrementHead","freeTail","_incrementTail","Math","max","u","floor","_resize","_","stride","_compactInstances","createView","S","ALLOCATED","DEFAULT_ACTIVE","VISIBLE","HIGHLIGHT","HIGHLIGHT_ACTIVE","REMOVE","TRANSFORM_CHANGED","ACTIVE","C","localTransform","I","LOCALTRANSFORM","globalTransform","GLOBALTRANSFORM","modelOrigin","MODELORIGIN","p","modelScaleFactors","MODELSCALEFACTORS","T","boundingSphere","BOUNDINGSPHERE","FEATUREATTRIBUTE","L","COLOR","O","OLIDCOLOR","state","STATE","A","lodLevel","LODLEVEL","R","super","events","_size","_next","_highlightOptionsMap","Map","_highlightOptionsMapPrev","_layout","v","mat4f64","vec4f64","vec3f64","mat3f","vec2f","includes","vec4f","vec4u8","u8","b","F","createBuffer","addInstance","_findSlot","emit","removeInstance","M","get","_getStateFlag","_setStateFlags","freeInstance","setLocalTransform","setMat","updateModelTransform","getLocalTransform","getMat","setGlobalTransform","getGlobalTransform","y","H","N","D","m","setVec","o","E","sort","index","getModelTransform","getVec","applyShaderTransformation","shaderTransformation","applyTransform","getCombinedModelTransform","getCombinedLocalTransform","getCombinedMaxScaleFactor","scaleFactor","getCombinedMedianScaleFactor","min","w","getModel","setFeatureAttribute","getFeatureAttribute","setColor","setObjectAndLayerIdColor","setVisible","getVisible","_setStateFlag","setHighlight","delete","highlightOptionsMap","getHighlightStateFlag","geHighlightOptionsPrev","getHighlightName","getState","getLodLevel","countFlags","_clearStateFlags","copyFrom","constructOnly","prototype","readOnly","l","g","_instanceData","_tmpSphere","maximumDepth","_boundingSphere","_tmpMat4","center","radius","add","remove","_worldSpaceRadius","_minScreenSpaceRadii","selectLevel","computeScreenPixelSizeAt","renderContext","rctx","geometry","getRenderGeometry","material","_materials","materials","setParameters","instancedDoublePrecision","glMaterials","vertexBufferLayout","vbo","vao","vertexCount","elementCount","boundingInfo","triangleCount","intersect","create","Promise","allSettled","components","map","controller","schedule","status","value","filter","forEach","reason","minScreenSpaceRadius","boundingBox","_boundingBox","bbMin","bbMax","reduce","k","type","LOD","isGround","_levels","_defaultRenderInstanceData","Array","_highlightRenderInstanceDataMap","_instanceIndex","_cycleStartIndex","_slicePlane","_camera","_updateCyclesWithStaticCamera","_needFullCycle","produces","OPAQUE_MATERIAL","_produces","TRANSPARENT_MATERIAL","_hasTransparentLevels","optionalFields","addHandles","registerTask","B","LOD_RENDERER","initialize","vec3f","Y","_glInstanceBufferLayout","on","_requestUpdateCycle","_ref","metadata","notifyGraphicGeometryChanged","_ref2","notifyGraphicVisibilityChanged","_allRenderInstanceData","values","_allRenderInstanceDataExceptHighlightShadow","V","push","hasHighlight","has","_enableLevelSelection","symbol","levels","baseBoundingBox","baseBoundingSphere","baseMaterial","slicePlaneEnabled","layerViewUid","instanceData","hasEmissions","some","renderStats","renderedInstances","renderedTriangles","trianglesPerInstance","totalInstances","_createRenderInstanceDataArray","_context","initializeRenderContext","_levelSelector","z","uninitializeRenderContext","_invalidateOctree","Color","hasHighlights","Highlight","ShadowHighlight","prepareRender","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","bind","contentCamera","equals","runTask","q","acquireTechniques","visible","isVisibleForOutput","output","_getInstanceDatas","_ref3","_beginComponent","render","bindVAO","_ref4","_renderComponent","ShadowExcludeHighlight","highlight","name","from","_octree","Z","transform","$","inverse","X","j","parameters","verticalOffset","forEachAlongRay","notifyShaderTransformationChanged","_octreeCached","x","queryDepthRange","viewForward","findClosest","DepthOrder","FRONT_TO_BACK","frustum","BACK_TO_FRONT","eye","Q","requestRender","_startUpdateCycle","running","ceil","done","every","J","W","madeProgress","load","slot","beginSlot","runAppleAmdDriverHelper","bindTechnique","te","ensureAttributeLocations","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","setUniform4fv","ee","setUniform1i","replace","G","drawArraysInstanced","primitiveType","P","transparent","U","K"],"sourceRoot":""}